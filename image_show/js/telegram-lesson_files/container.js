define(["require","exports","tslib","esignature/data/store","esignature/public/utils","external/prop-types","react","modules/clean/auth/login_or_register/types","modules/clean/react/file_viewer/file_viewer","modules/clean/open_in_app/actions","modules/clean/sharing/async_share_modal_util","modules/clean/viewer","modules/clean/react/file_viewer/data/store","modules/clean/web_timing_logger","modules/constants/file_viewer","modules/clean/react/app_actions/data/store"],function(e,t,r,i,n,a,o,s,l,d,u,c,p,_,m,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=r.__importDefault(a),o=r.__importDefault(o);var f=(function(t){function f(e){var r=t.call(this,e)||this,a=c.Viewer.get_viewer(),o=e.userId?a.get_user_by_id(e.userId):a.work_user||a.personal_user;r.state={user:o},_.log_js_modules_application_code_start(),n.registerEsignatureData(e.esignatureToken);var s=e.file,l=p.getStoreForFileViewer();return p.hydrateFileViewerNamespace(l,{file:s}),i.hydrateEsignatureNamespaceForGuest(l,e.esignatureToken),o&&h.hydrateExtensionsNamespace(l,[s],o),r}return r.__extends(f,t),f.prototype.componentDidMount=function(){var t=this,i=this.props.shareEmail;if(i&&this.state.user)new Promise(function(t,r){e(["modules/clean/react/browse/models"],t,r)}).then(r.__importStar).then(function(e){var r=e.File;u.asyncShowPrefilledShareModal({user:t.state.user,sharePrefillEmail:i,content:new r(t.props.file)})});else if(m.SHARED_LINK_REACT_AUTH_MODAL&&this.props.authModalKind===s.LoginOrRegisterKind.IMMEDIATE&&!this.state.user){var n=function(){return r.__awaiter(t,void 0,void 0,function(){var t,i,n;return r.__generator(this,function(a){switch(a.label){case 0:return[4,Promise.all([new Promise(function(t,r){e(["modules/clean/react/modal"],t,r)}).then(r.__importStar),new Promise(function(t,r){e(["modules/clean/auth/login_or_register/modal"],t,r)}).then(r.__importStar)])];case 1:return t=a.sent(),i=t[0].Modal,n=t[1].LoginOrRegisterModal,i.showInstance(o.default.createElement(n,{downloadAction:null,id:"shared-link-immediate-signup-modal",initialMode:s.Mode.REGISTER,kind:s.LoginOrRegisterKind.IMMEDIATE,onAuthenticateSuccess:function(){},onCancel:function(){},signup_tag:"shmodel_modal_register"})),[2]}})})};n()}if(this.props.openImmediatelyInApp){var a=this.props.file;d.openImmediately(a.open_in_app_data)}},f.prototype.render=function(){var e=this.props,t=e.fileViewerProps,i=e.onCloseUrl,n=e.isEmbedded,a=e.sharedLinkInfo,s=e.shareToken,d=e.sharePermission,u=o.default.createElement(l.FileViewer,r.__assign({},t,{fileCount:1,fileIndex:0,titleBarCloseUrl:i,sharedLinkInfo:a,shareToken:s,sharePermission:d,user:this.state.user,transparentBackground:!0}));return n?o.default.createElement("div",{className:"embedded"},u):u},f.prototype.getChildContext=function(){return{authModalKind:this.props.authModalKind}},f.childContextTypes={authModalKind:a.default.oneOf(["download","immediate",null])},f})(o.default.Component);t.FileViewerContainer=f});
//# sourceMappingURL=container.min.js-vflLvHcfo.map