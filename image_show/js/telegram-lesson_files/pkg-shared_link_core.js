define("esignature/data/reducer",["require","exports","tslib","esignature/data/types"],function(e,t,n,i){"use strict";function r(e,r){void 0===e&&(e=t.defaultState);var a=r.payload;switch(r.type){case i.Actions.EnableFormCreationMode:return n.__assign({},e,{formMode:i.FormMode.Creation,recipientModalOpen:!0});case i.Actions.EnableFormFillingMode:return n.__assign({},e,{currentParticipant:a.currentParticipant,fields:a.fields||{},fieldsData:a.fieldsData||{},formMode:i.FormMode.Filling,apiToken:a.apiToken});case i.Actions.DisableFormModes:return n.__assign({},t.defaultState);case i.Actions.SelectFieldType:return n.__assign({},e,{selectedFieldType:a.fieldType});case i.Actions.CreateField:return n.__assign({},e,{selectedFieldType:void 0,fields:n.__assign({},e.fields,(s={},s[a.field.id]=a.field,s))});case i.Actions.UpdateField:return n.__assign({},e,{fields:n.__assign({},e.fields,(l={},l[a.field.id]=a.field,l))});case i.Actions.DeleteField:var o=n.__assign({},e.fields);return delete o[a.id],n.__assign({},e,{fields:o});case i.Actions.CreateSignature:return n.__assign({},e,{signatureImages:e.signatureImages.concat([a.signature])});case i.Actions.ReplaceState:return n.__assign({},r.payload.state);case i.Actions.FillField:return n.__assign({},e,{fieldsData:n.__assign({},e.fieldsData,(u={},u[r.payload.id]=r.payload.fieldData,u))});case i.Actions.CreateFormRequest:return n.__assign({},e,{apiStatus:i.ApiStatus.Sending});case i.Actions.CreateFormSuccess:return n.__assign({},e,{apiStatus:i.ApiStatus.Sent});case i.Actions.SignFormRequest:return n.__assign({},e,{apiStatus:i.ApiStatus.Signing});case i.Actions.SignFormSuccess:return n.__assign({},e,{apiStatus:i.ApiStatus.Signed});case i.Actions.CloseRecipientModal:return n.__assign({},e,{recipientModalOpen:!1});case i.Actions.OpenRecipientModal:return n.__assign({},e,{recipientModalOpen:!0});case i.Actions.UpdateParticipant:return n.__assign({},e,{participants:n.__assign({},e.participants,(c={},c[r.payload.participant.id]=r.payload.participant,c))});case i.Actions.UpdateParticipants:return n.__assign({},e,{participants:r.payload.participants});case i.Actions.CloseSendingModal:return n.__assign({},e,{sendingModalOpen:!1});case i.Actions.OpenSendingModal:return n.__assign({},e,{sendingModalOpen:!0});default:return e}var s,l,u,c}Object.defineProperty(t,"__esModule",{value:!0}),t.defaultState={apiToken:"",formMode:i.FormMode.Disabled,fields:{},fieldsData:{},selectedFieldType:void 0,signatureImages:[],currentParticipant:void 0,participants:[],recipientModalOpen:!0,sendingModalOpen:!1},t.esignatureReducer=r}),define("esignature/data/types",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});(function(e){e.Text="text_field",e.Signature="signature_field",e.Date="date_field",e.Initials="initial_field"})(t.FieldType||(t.FieldType={}));(function(e){e.User="user",e.Guest="guest",e.Other="other"})(t.UserType||(t.UserType={}));(function(e){e.Disabled="Disabled",e.Creation="Creation",e.Filling="Filling",e.Filled="Filled",e.Complete="Complete"})(t.FormMode||(t.FormMode={}));(function(e){e[e.Sending=0]="Sending",e[e.Sent=1]="Sent",e[e.Signing=2]="Signing",e[e.Signed=3]="Signed"})(t.ApiStatus||(t.ApiStatus={}));(function(e){e.EnableFormCreationMode="Esignature/EnableFormCreationMode",e.EnableFormFillingMode="Esignature/EnableFormFillingMode",e.DisableFormModes="Esignature/DisableFormModes",e.SelectFieldType="Esignature/SelectFieldType",e.CreateField="Esignature/CreateField",e.UpdateField="Esignature/UpdateField",e.DeleteField="Esignature/DeleteField",e.FillField="Esignature/FillField",e.CreateSignature="Esignature/CreateSignature",e.CancelRequest="Esignature/CancelRequest",e.ReplaceState="Esignature/ReplaceState",e.CreateFormRequest="Esignature/CreateFormRequest",e.CreateFormSuccess="Esignature/CreateFormSuccess",e.CreateFormError="Esignature/SendForSignatureError",e.SignFormRequest="Esignature/SignFormRequest",e.SignFormSuccess="Esignature/SignFormSuccess",e.SignFormError="Esignature/SignFormError",e.CloseRecipientModal="Esignature/CloseRecipientModal",e.OpenRecipientModal="Esignature/OpenRecipientModal",e.UpdateParticipant="Esignature/UpdateParticipant",e.UpdateParticipants="Esignature/UpdateParticipants",e.CloseSendingModal="Esignature/CloseSendingModal",e.OpenSendingModal="Esignature/OpenSendingModal"})(t.Actions||(t.Actions={}))}),define("esignature/public/selectors",["require","exports","modules/clean/redux/selectors","modules/clean/redux/types","esignature/data/types","esignature/data/reducer","esignature/public/utils"],function(e,t,n,i,r,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEsignatureState=function(e){return o.esignatureEnabled()?n.getStateAtNamespace(e,i.ESIGNATURE_NAMESPACE_KEY)||a.defaultState:a.defaultState},t.isSignatureMode=function(e){var n=t.getEsignatureState(e).formMode;return n===r.FormMode.Creation||n===r.FormMode.Filling},t.isSignatureCreationMode=function(e){return t.getEsignatureState(e).formMode===r.FormMode.Creation}}),define("esignature/public/utils",["require","exports","tslib","external/lodash","modules/core/i18n","esignature/data/types","modules/clean/file_store/utils","modules/clean/react/file_viewer/constants","modules/clean/react/file_viewer/open_button/types","modules/constants/file_viewer"],function(e,t,n,i,r,a,o,s,l,u){"use strict";function c(e){v=null!=e}function d(e){return!!v||(e?u.ESIGNATURE_BY_USER_ID[e]===g.GA:i.some(i.map(u.ESIGNATURE_BY_USER_ID,function(e){return e===g.GA})))}function p(e,t){return"pdf"===o.getExtension(e)&&d(t)}function f(e,t,n){return p(e,n)&&t===a.FormMode.Disabled}function _(e,t,n,i){if(f(e,n,i))return{handler:t,spriteName:null,text:r._("Prepare for Signature"),type:l.OpenButtonAction.PREPARE_FOR_SIGNATURE,userAction:s.UserAction.OpenPrepareForSignature}}function m(e){return e===a.FormMode.Creation||e===a.FormMode.Filling}Object.defineProperty(t,"__esModule",{value:!0}),i=n.__importStar(i);var g;(function(e){e.GA="GA"})(g||(g={}));var v=!1;t.registerEsignatureData=c,t.esignatureEnabled=d,t.canPrepareForSignature=p,t.shouldShowEsignatureOpenButtonOption=f,t.getEsignatureOpenButtonOption=_,t.esignatureInUse=m,t.getEsignatureCssPaths=function(){return["/static/js/spectrum_signatures/index.web-vflcq0wkx.css","/static/css/esignature/toolbar-vflBYkqCg.css"]},t.loadDebugConsole=i.once(function(){}),t.loadDebugConsole()}),define("modules/clean/auth/login_or_register/types",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n;(function(e){e.COMMENT="comment",e.DOWNLOAD="download",e.IMMEDIATE="immediate"})(n||(n={})),t.LoginOrRegisterKind=n;var i;(function(e){e.DIRECT_DOWNLOAD="direct_download",e.SAVE_TO_DROPBOX="add_to_dropbox"})(i||(i={})),t.DownloadAction=i;var r;(function(e){e[e.LOGIN=0]="LOGIN",e[e.REGISTER=1]="REGISTER"})(r||(r={})),t.Mode=r;var a;(function(e){e.DEFAULT="",e.POST="post_comment_variant",e.SUBSCRIBE="subscribe_variant"})(a||(a={})),t.CommentTextVariant=a}),define("modules/clean/crypto",["require","exports","tslib","external/sjcl"],function(e,t,n,i){"use strict";function r(e){for(var t=i.random.randomWords(e.length),n=0,r=e.length,a=0<=r;a?n<r:n>r;a?n++:n--)e[n]=t[n];return e}Object.defineProperty(t,"__esModule",{value:!0}),i=n.__importStar(i),t.getRandomValues=r}),define("modules/clean/open_in_app/actions",["require","exports","tslib","modules/clean/open_in_app/types","modules/clean/open_in_mobile_app"],function(e,t,n,i,r){"use strict";function a(){var e=navigator.userAgent||"",t=e.match(/OS (\d+)_(\d+)_?(\d+)?/);return!t||parseInt(t[1],10)>=9}function o(e,t){var n=t.onAppNeeded,o=t.onAppInstalled;i.areUrlsIOS(e)?r.default.open_ios(e.iOSAppUrl,e.iOSAppStoreUrl,a(),n,o):i.areUrlsAndroid(e)&&r.default.open_android_intent(e.androidAppUrl)}function s(e){var t;if(i.areUrlsIOS(e))t=e.iOSAppUrl;else{if(!i.areUrlsAndroid(e))return;t=e.androidAppUrl}var n=document.createElement("iframe");n.setAttribute("class","open-in-app-transport"),n.setAttribute("src",t),n.setAttribute("style","display: none"),document.body.appendChild(n)}function l(){r.default.cleanup()}Object.defineProperty(t,"__esModule",{value:!0}),r=n.__importDefault(r),t.openInApp=o,t.openImmediately=s,t.cleanUp=l}),define("modules/clean/open_in_mobile_app",["require","exports","tslib","jquery","modules/clean/analytics","modules/core/exception","modules/core/i18n"],function(e,t,n,i,r,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=n.__importDefault(i),r=n.__importStar(r);var s=(function(){function e(){}return e.initClass=function(){var e=this;this.vischange_listener=null,this.open_app_mode=!0,this.try_open_ios_9=function(t,n,i,r){return void 0===i&&(i=function(){}),void 0===r&&(r=function(){}),e.vischange_listener||(e.vischange_listener=function(t){return e.open_app_mode=!0,r()},document.addEventListener("visibilitychange",e.vischange_listener)),e.open_app_mode?(e.open_app_mode=!1,e._onOpenLoggingHandler(),i(),window.location=t):(e._onInstallLoggingHandler(),window.location=n)},this.fallback_will_launch=!1,this.try_open=function(t,n,a){if(e._onOpenLoggingHandler(),!e.fallback_will_launch){var o=i.default("body"),s=function(){var e=i.default("<iframe />",{src:t,style:"display: none;"});return o.append(e)},l=!1,u=function(e){return l=!0};document.addEventListener("visibilitychange",u);var c=!1,d=function(e){return c=!0};window.addEventListener("pagehide",d),null!=a&&r.ShareTibEventLogger.log_unauth("CLICK_MOBILE_OPEN","WEB_MOBILE",{scl_url:a}),s();var p=Date.now(),f=function(){if(e.fallback_will_launch=!1,document.removeEventListener("visibilitychange",u),window.removeEventListener("pagehide",d),!c&&!l&&Date.now()<p+4700)return null!=a&&r.ShareTibEventLogger.log_unauth("CLICK_MOBILE_INSTALL","WEB_MOBILE",{scl_url:a}),window.location.replace(n)};return setTimeout(f,3200),e.fallback_will_launch=!0}}},e._onOpenLoggingHandler=function(){},e._onInstallLoggingHandler=function(){},e.registerLoggingHandlers=function(e,t){return this._onOpenLoggingHandler=e,this._onInstallLoggingHandler=t},e.open_on_click=function(e,t,n,r,a,s,l){var u=this;void 0===s&&(s=null);var c=function(n){if(n.preventDefault(),l)return u.open_android_intent(l);if(a){r||(r=i.default("<div/>"));var c=r.text();return u.try_open_ios_9(e,t,function(){return r.text(o._("Install app?"))},function(){return r.text(c)})}return u.try_open(e,t,s)};return i.default(n).on("click",c)},e.open_ios=function(e,t,n,i,r){return void 0===i&&(i=function(){}),void 0===r&&(r=function(){}),n?this.try_open_ios_9(e,t,i,r):this.try_open(e,t)},e.open_android_intent=function(e){return a.assert(e&&e.startsWith("intent://www.dropbox.com/sm/launch_intent_or_fallback_page"),"intentUrl must use intent:// protocol"),this._onOpenLoggingHandler&&this._onOpenLoggingHandler(),window.location.href=e},e.redirect_on_load=function(e,t){return this.try_open(e,t)},e.cleanup=function(){if(this.vischange_listener)return document.removeEventListener("visibilitychange",this.vischange_listener)},e})();s.initClass(),t.default=s}),define("modules/clean/react/file_viewer/app_download_interstitial/app_download_interstitial",["require","exports","tslib","external/classnames","react","spectrum/button","spectrum/file_icon","spectrum/icon_content","spectrum/icon_form","modules/clean/open_in_app/types","modules/clean/static_urls","modules/core/i18n","modules/clean/react/css"],function(e,t,n,i,r,a,o,s,l,u,c,d,p){"use strict";function f(e){var t=e.onClose;return r.default.createElement("header",null,r.default.createElement("h1",{className:"DropboxLogo"},r.default.createElement("img",{src:c.static_url("/static/images/index/rebrand/logos/glyphs/glyph_blue-vfla3iXuq.svg"),className:"DropboxLogo--glyph",alt:"Dropbox"}),r.default.createElement("img",{src:c.static_url("/static/images/index/rebrand/logos/wordmarks/wordmark_black-vflmhE3RY.svg"),className:"Dropbox--wordmark",alt:"Dropbox"})),r.default.createElement("button",{className:"button-as-link app-download-interstitial-close","aria-label":"Close",onClick:t},r.default.createElement(l.IconForm,{name:"cancel"})))}function _(e){var t=e.appUrl,n=e.onContinue,i=e.onAppDownload;return r.default.createElement("div",{className:"app-download-interstitial-ctas"},r.default.createElement(a.Button,{className:"app-download-interstitial-cta",size:"large",href:t,onClick:i},d._("Get the app")),r.default.createElement(a.Button,{className:"app-download-interstitial-cta",size:"large",variant:"secondary",onClick:n},d._("Or continue to website")))}function m(e,t){return e&&t?d._("%(owner)s (%(team)s) shared this with you.").format({owner:e,team:t}):e&&!t?d._("%(owner)s shared this with you.").format({owner:e}):!e&&t?d._("%(team)s shared this with you.").format({team:t}):d._("This file was shared with you.")}function g(e){var t=e.fileOrFolderName,n=e.isFolder,i=e.ownerName,a=e.ownerTeamName;return r.default.createElement("section",{className:"app-download-interstitial-content"},r.default.createElement("header",null,r.default.createElement("h2",null,d._("Get a better view with our mobile app"))),r.default.createElement("div",{className:"app-download-interstitial-content-thumbnail"},n?r.default.createElement(s.IconContent,{name:"folder_shared-large"}):r.default.createElement(o.FileIcon,{path:t,variant:"large"}),r.default.createElement("p",{className:"app-download-interstitial-filename"},t),r.default.createElement("p",{className:"app-download-interstitial-owner"},m(i,a))))}function v(e){if(e){if(u.areUrlsIOS(e))return e.iOSAppStoreUrl;if(u.areUrlsAndroid(e))return e.androidAppUrl}}Object.defineProperty(t,"__esModule",{value:!0}),i=n.__importDefault(i),r=n.__importDefault(r);var S=function(e){var t=e.className,n=e.open_in_app_data,a=e.fileOrFolderName,o=e.isFolder,s=e.onClose,l=e.onContinue,u=e.onAppDownload,c=e.ownerName,d=e.ownerTeamName;return r.default.createElement("section",{className:i.default("app-download-interstitial-container",t)},r.default.createElement(f,{onClose:s}),r.default.createElement(g,{isFolder:o,fileOrFolderName:a,ownerName:c,ownerTeamName:d}),r.default.createElement(_,{onContinue:l,onAppDownload:u,appUrl:v(n)}))},w=p.requireCssWithComponent(S,["/static/css/index/obsidian/logo-vflM1D8V1.css","/static/css/file_viewer/app_download_interstitial-vfllUPOgM.css"]);t.AppDownloadInterstitial=w}),define("modules/clean/react/file_viewer/data/actions",["require","exports","tslib","modules/clean/ajax","modules/clean/react/file_viewer/constants","modules/clean/file_store/actions","modules/clean/previews/data/actions","modules/clean/previews/data/actions","modules/clean/react/file_viewer/logging","modules/clean/react/file_viewer/data/selectors","modules/clean/file_store/utils","modules/clean/react/file_viewer/data/types","modules/clean/previews/data/util","modules/clean/react/file_viewer/constants","modules/clean/downloads","modules/core/uri","modules/core/browser"],function(e,t,n,i,r,a,o,s,l,u,c,d,p,f,_,m,g){"use strict";function v(e,t){return void 0===e&&(e=r.DocType.default),function(n){n({type:d.Actions.OpenSidebar,payload:{type:e}}),l.logUserAction(r.UserAction.ToggleSidebarOn,t)}}function S(e,t){return void 0===e&&(e=r.DocType.default),function(n){n({type:d.Actions.CloseSidebar,payload:{type:e}}),l.logUserAction(r.UserAction.ToggleSidebarOff,t)}}function w(){return{type:d.Actions.DismissAppDownloadInterstitial}}function h(e){return{type:d.Actions.OpenFile,payload:{fileId:e}}}function y(){return{type:d.Actions.CloseFile}}function F(e){var t=this;return function(i,r){return n.__awaiter(t,void 0,void 0,function(){var t,l,u;return n.__generator(this,function(n){return t=c.getFileStoreId(e),l=a.putFile(e),i(l),u=!p.previewDataPresentForFile(r(),e)&&!p.previewDataInFlight(r(),e),u&&i(l.payload.file.preview?o.populateFilesPreviewData([l.payload.file]):s.fetchPreviewData([l.payload.file])),i(h(t)),[2]})})}}function E(e,t){return{type:d.Actions.UpdateRenderStatus,payload:{fileId:e,renderStatus:t}}}function b(){return function(e,t){var n=u.getCurrentFileId(t());n&&e(E(n,f.PreviewRenderStatus.Succeeded))}}function A(e){return{type:d.Actions.SetShowOverQuotaUpsell,payload:e}}function C(e){return function(t,n){e&&void 0===u.getShowOverQuotaUpsell(n())&&i.SilentBackgroundRequest({url:"/should_show_file_preview_upsell",data:{_subject_uid:e.id},success:function(e){try{var n=JSON.parse(e);n&&t(A(n.shouldShowFilePreviewUpsell))}catch(e){}}})}}function O(e){return function(t){e.preview&&t(o.overridePreviewForComments(e,e.preview)),t({type:d.Actions.SwitchRevision,payload:{file:e}})}}function P(){return function(e,t){var n=u.getActiveFile(t());n&&e(o.clearCommentsPreviewOverride(n)),e({type:d.Actions.RestoreRevision})}}function M(e){return function(t){t(a.putFile(e,e.revision_id)),e.preview&&t(o.overridePreviewForComments(e,e.preview)),t({type:d.Actions.SaveForwardRevision,payload:{revisionKey:e.revision_id}})}}function I(e){var t=m.URI.parse(e.href);t.updateQuery({dl:"1"}),_.get({url:t.toString()})}function R(){g.reload(!0)}function D(){return function(e){e({type:d.Actions.PlayMedia})}}function T(){return function(e){e({type:d.Actions.PauseMedia})}}function U(){return function(e){e({type:d.Actions.ResetStore})}}function x(){return function(e){e({type:d.Actions.DisableRegionCreation})}}function N(){return function(e){e({type:d.Actions.EnableRegionCreation})}}function L(){return{type:d.Actions.ForceHideToolbar}}function q(){return{type:d.Actions.DisableForceHideToolbar}}Object.defineProperty(t,"__esModule",{value:!0}),i=n.__importStar(i),_=n.__importStar(_),g=n.__importStar(g),t.openFullScreen=function(){return{type:d.Actions.OpenFullScreen}},t.closeFullScreen=function(){return{type:d.Actions.CloseFullScreen}},t.openSidebar=v,t.closeSidebar=S,t.dismissAppDownloadInterstitial=w,t.openFileById=h,t.closeFile=y,t.openFile=F,t.setRenderStatusSuccessForCurrentFile=b,t.fetchShowOverQuotaUpsell=C,t.switchRevisionAction=O,t.restoreRevisionAction=P,t.saveForwardRevision=M,t.download=I,t.pendingFileUploaded=R,t.setMediaPlaying=D,t.setMediaPaused=T,t.resetFileViewerStore=U,t.disableRegionCreation=x,t.enableRegionCreation=N,t.forceHideToolbar=L,t.disableForceHideToolbar=q}),define("modules/clean/react/file_viewer/data/reducer",["require","exports","tslib","modules/clean/react/file_viewer/data/types","modules/clean/react/file_viewer/constants"],function(e,t,n,i,r){"use strict";function a(e,r){void 0===e&&(e=t.defaultState);var a=r.payload;switch(r.type){case i.Actions.CloseFile:return n.__assign({},e,{currentFileId:void 0,fileRevision:void 0,latestFileId:void 0});case i.Actions.OpenFile:return n.__assign({},e,{currentFileId:a.fileId,fileRevision:void 0,latestFileId:void 0});case i.Actions.SwitchRevision:return n.__assign({},e,{fileRevision:a.file});case i.Actions.RestoreRevision:return n.__assign({},e,{fileRevision:void 0,currentFileId:e.latestFileId||e.currentFileId,latestFileId:void 0});case i.Actions.SaveForwardRevision:return n.__assign({},e,{latestFileId:a.revisionKey});case i.Actions.OpenFullScreen:return n.__assign({},e,{isFullScreen:!0});case i.Actions.CloseFullScreen:return n.__assign({},e,{isFullScreen:!1});case i.Actions.OpenSidebar:return n.__assign({},e,{isSidebarOpen:n.__assign({},e.isSidebarOpen,(o={},o[a.type]=!0,o))});case i.Actions.CloseSidebar:return n.__assign({},e,{isSidebarOpen:n.__assign({},e.isSidebarOpen,(s={},s[a.type]=!1,s))});case i.Actions.DismissAppDownloadInterstitial:return n.__assign({},e,{appDownloadInterstitialDismissed:!0});case i.Actions.SetShowOverQuotaUpsell:return n.__assign({},e,{showOverQuotaUpsell:a});case i.Actions.UpdateRenderStatus:return n.__assign({},e,{renderStatuses:n.__assign({},e.renderStatuses,(l={},l[a.fileId]=a.renderStatus,l))});case i.Actions.PlayMedia:return n.__assign({},e,{isMediaPlaying:!0});case i.Actions.PauseMedia:return n.__assign({},e,{isMediaPlaying:!1,pauseCount:e.pauseCount?e.pauseCount+1:1});case i.Actions.ResetStore:return t.defaultState;case i.Actions.EnableRegionCreation:return n.__assign({},e,{isAnnotationRegionEnabled:!0});case i.Actions.DisableRegionCreation:return n.__assign({},e,{isAnnotationRegionEnabled:!1});case i.Actions.ForceHideToolbar:return n.__assign({},e,{forceHideToolbar:!0});case i.Actions.DisableForceHideToolbar:return n.__assign({},e,{forceHideToolbar:!1});default:return e}var o,s,l}Object.defineProperty(t,"__esModule",{value:!0}),t.defaultState={currentFileId:void 0,fileRevision:void 0,latestFileId:void 0,forceHideToolbar:!1,isFullScreen:!1,isSidebarOpen:(o={},o[r.DocType.ppt]=!0,o[r.DocType.pdf]=!1,o),renderStatuses:{},showOverQuotaUpsell:void 0},t.fileViewerReducer=a;var o}),define("modules/clean/react/file_viewer/data/selectors",["require","exports","tslib","modules/clean/redux/types","modules/clean/redux/selectors","modules/clean/file_store/selectors","modules/clean/previews/data/selectors","modules/clean/previews/data/preview_type_util","external/reselect","external/lodash","modules/clean/react/app_actions/data/selectors","modules/clean/react/extensions/client"],function(e,t,n,i,r,a,o,s,l,u,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),u=n.__importStar(u);var p=function(e){return r.getStateAtNamespace(e,i.FILE_VIEWER_NAMESPACE_KEY)};t.getIsFullScreen=function(e){return p(e).isFullScreen},t.getIsSidebarOpen=function(e){return p(e).isSidebarOpen},t.getAppDownloadInterstitial=function(e){return p(e).appDownloadInterstitialDismissed},t.getCurrentFileId=function(e){return p(e).currentFileId},t.getCurrentFile=l.createSelector(u.nthArg(0),t.getCurrentFileId,a.getFile),t.getPastFile=function(e){return p(e).fileRevision},t.getActiveFile=function(e){return t.getPastFile(e)||t.getCurrentFile(e)},t.getShowOverQuotaUpsell=function(e){return p(e).showOverQuotaUpsell};var f=function(e,t){return p(e).renderStatuses[t]};t.getRenderStatusForCurrentFile=function(e){var n=t.getCurrentFileId(e);if(n)return f(e,n)},t.getIsMediaPlaying=function(e){return p(e).isMediaPlaying},t.getPauseCount=function(e){var t=p(e).pauseCount;return t?t:0},t.getPreviewApiDataForCurrentFile=function(e){var n=t.getCurrentFile(e);return o.getApiDataForFile(e,n).data},t.getIsFlippingEnabled=function(e){var n=t.getPreviewApiDataForCurrentFile(e);return!(t.getIsMediaPlaying(e)||t.getIsFullScreen(e)&&s.isSsrDoc(n))},t.getIsAnnotationRegionEnabled=function(e){return p(e).isAnnotationRegionEnabled},t.shouldForceHideToolbar=function(e){return p(e).forceHideToolbar},t.getExtensionsConfig=function(e){var n=t.getActiveFile(e);if(n&&c.fileExtensionsConfigs(e)[n.file_id])return c.fileExtensionsConfigs(e)[n.file_id];var i=c.isLoaded(e)?d.DisplayState.DISABLED:d.DisplayState.LOADING;return d.newExtensionsConfig("",[],i)}}),define("modules/clean/react/file_viewer/data/store",["require","exports","tslib","esignature/public/utils","esignature/data/reducer","modules/clean/redux/store","modules/clean/redux/types","modules/clean/file_store/reducer","modules/clean/react/file_viewer/data/reducer","modules/clean/previews/data/reducer","modules/clean/previews/data/actions","modules/clean/file_store/actions","modules/clean/react/file_viewer/data/actions","modules/clean/react/app_actions/data/reducer"],function(e,t,n,i,r,a,o,s,l,u,c,d,p,f){"use strict";function _(){return i.esignatureEnabled()?n.__assign((e={},e[o.ESIGNATURE_NAMESPACE_KEY]=r.esignatureReducer,e),t.fileViewerReducerMap):t.fileViewerReducerMap;var e}function m(e,t){var n=t.file;n&&e.dispatch(p.openFile(n))}function g(e,t){e.dispatch(c.populateFilesPreviewData(t)),e.dispatch(d.putFiles(t))}function v(e,t){e.dispatch(d.putFiles(t))}Object.defineProperty(t,"__esModule",{value:!0}),t.fileViewerReducerMap=(S={},S[o.FILE_NAMESPACE_KEY]=s.fileNamespaceReducer,S[o.FILE_VIEWER_NAMESPACE_KEY]=l.fileViewerReducer,S[o.EXTENSIONS_NAMESPACE_KEY]=f.extensionsReducer,S[o.PREVIEW_NAMESPACE_KEY]=u.reducer,S),t.getStoreForFileViewer=function(){return a.getStoreAndRegisterReducers(_())},t.hydrateFileViewerNamespace=m,t.hydrateFileStore=g,t.updateFileStore=v;var S}),define("modules/clean/react/file_viewer/data/types",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});(function(e){e.CloseFile="FileViewer/CloseFile",e.CloseFullScreen="FileViewer/CloseFullScreen",e.CloseSidebar="FileViewer/CloseSidebar",e.DisableRegionCreation="FileViewer/DisableRegionCreation",e.DismissAppDownloadInterstitial="FileViewer/DismissAppDownloadInterstitial",e.DisableForceHideToolbar="FileViewer/DisableForceHideToolbar",e.EnableRegionCreation="FileViewer/EnableRegionCreation",e.ForceHideToolbar="FileViewer/ForceHideToolbar",e.OpenFile="FileViewer/OpenFile",e.OpenFullScreen="FileViewer/OpenFullScreen",e.OpenSidebar="FileViewer/OpenSidebar",e.PauseMedia="FileViewer/PauseMedia",e.PlayMedia="FileViewer/PlayMedia",e.ResetStore="FileViewer/ResetStore",e.RestoreRevision="FileViewer/RestoreRevision",e.SaveForwardRevision="FileViewer/SaveForwardRevision",e.SetShowOverQuotaUpsell="FileViewer/SetShowOverQuotaUpsell",e.SwitchRevision="FileViewer/SwitchRevision",e.UpdateRenderStatus="FileViewer/UpdateRenderStatus"})(t.Actions||(t.Actions={}))}),define("modules/clean/react/file_viewer/file_preview_event_emitter",["require","exports","tslib","external/eventemitter3"],function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=n.__importDefault(i),t.filePreviewEventEmitter=new i.default}),define("modules/clean/react/file_viewer/location_utils",["require","exports","tslib","modules/clean/react/file_viewer/constants","modules/clean/history","modules/core/exception"],function(e,t,n,i,r,a){"use strict";function o(e){return e?e.query.preview:""}function s(e,t){return e?e+"/"+t:"/"+t}function l(e,t){if(e&&!(t<=0))return e.split("/").slice(0,t+1).join("/")}function u(e,t){if(e){if(t<=0)return e;return l(e,e.split("/").length-t-1)}}function c(e){p(d(i.SubpathQueryKey,e))}function d(e,t){var n=r.default.get_uri();return t?n.updateQuery(e,t):n.removeQuery(e),n}function p(e){r.default.push_state(e.getPath(),e.getQuery())}function f(e){var t,n=e.query[i.SubpathQueryKey];return t=n instanceof Array?n.length?n[0]:void 0:n,t&&0!==t.indexOf("/")?void a.reportStack("path malformed",{severity:a.SEVERITY.NONCRITICAL,exc_extra:{fileSubpath:t}}):t}function _(e){var t=e.query[i.PageQueryKey];if(t){var n=+t;return n?n:void 0}}function m(e){e?e>0&&p(d(i.PageQueryKey,e.toString())):p(d(i.PageQueryKey,null))}Object.defineProperty(t,"__esModule",{value:!0}),r=n.__importDefault(r),a=n.__importStar(a),t.getFilenameFromLocation=o,t.addToFileSubpath=s,t.truncateFileSubpath=l,t.shortenFileSubpathBy=u,t.updateFileSubpathQuery=c,t.getFileSubpath=f,t.getPageQuery=_,t.updatePageQuery=m}),define("modules/clean/react/file_viewer/logging",["require","exports","modules/clean/react/file_viewer/models","modules/clean/react/file_viewer/file_preview_event_emitter","modules/clean/react/file_viewer/constants"],function(e,t,n,i,r){"use strict";function a(e,t,a){void 0===a&&(a={}),null!=n.FilePreviewSession.currentSession&&i.filePreviewEventEmitter.emit(r.EventType.FilePreviewUserAction,n.FilePreviewSession.currentSession,e,t,a)}Object.defineProperty(t,"__esModule",{value:!0}),t.logUserAction=a}),define("modules/clean/react/file_viewer/models",["require","exports","tslib","modules/clean/react/file_viewer/constants","modules/clean/react/file_viewer/file_preview_event_emitter","modules/clean/react/previews/constants","modules/clean/uuid","modules/clean/web_timing_logger","modules/core/browser","modules/core/browser_detection","modules/core/exception"],function(e,t,n,i,r,a,o,s,l,u,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),l=n.__importStar(l),c=n.__importStar(c);var d={};d[i.EventType.FilePreviewAttemptStarted]=null,d[i.EventType.FilePreviewSupportConfirmed]=i.EventType.FilePreviewAttemptStarted,d[i.EventType.FilePreviewSupportDenied]=i.EventType.FilePreviewAttemptStarted,d[i.EventType.FilePreviewDownloadAttempted]=i.EventType.FilePreviewSupportConfirmed,d[i.EventType.FilePreviewDownloadSucceeded]=i.EventType.FilePreviewDownloadAttempted,d[i.EventType.FilePreviewDownloadFailed]=i.EventType.FilePreviewDownloadAttempted,d[i.EventType.FilePreviewRenderSucceeded]=i.EventType.FilePreviewDownloadSucceeded,d[i.EventType.FilePreviewRenderFailed]=i.EventType.FilePreviewDownloadSucceeded;var p=(function(){function e(e){this.id=e||o.UUID.v4({allowInsecure:!0}),this.deviceType=this._deviceTypeString()}return e.prototype._deviceTypeString=function(){return u.is_supported_mobile_browser()?"mobile":u.is_tablet()?"tablet":"desktop"},e.currentSession=null,e})();t.FileViewerSession=p;var f=(function(){function e(e){var t=e.id,n=e.fileViewerSession,i=e.file,r=e.previewType,a=e.sourceContext,s=e.sourceAction;this.passwordNeeded=!1,c.assert(!!n,"FileViewerSession required"),c.assert(!!i,"File required"),this.id=t||o.UUID.v4({allowInsecure:!0}),this.fileViewerSession=n,this.file=i,this.previewType=r,this.sourceContext=a,this.sourceAction=s,this.previewTimeline={},this.lastEvent=null}return e.prototype.recordEvent=function(e,t){if(void 0===t&&(t={}),!(t instanceof Object))throw new Error("extra param of recordEvent should be an object.");this.isEventInTimeline(e)||d.hasOwnProperty(e)&&this.lastEvent!==d[e]||(this.addToTimeline(e),r.filePreviewEventEmitter.emit(e,this,t),this.lastEvent=e)},e.prototype.markPrimaryEvent=function(){var e;e=window._timingData&&window._timingData.tti?window._timingData.tti.getTime():l.now(),this.primaryMarkTs||(this.primaryMarkTs=e)},e.prototype.timeToPrimaryMark=function(){return this.timeToMark(this.primaryMarkTs)},e.prototype.timeToMark=function(e){if(void 0!==e)switch(this.sourceAction){default:return;case a.PreviewSourceAction.Visit:var t=s.start_time();if(void 0!==t)return e-t;return;case a.PreviewSourceAction.Click:var n=this.previewTimeline[i.EventType.FilePreviewAttemptStarted];if(!n)return;var r=n.timestamp;if(void 0===r)return;return e-r}},e.prototype.isEventInTimeline=function(e){return e in this.previewTimeline},e.prototype.addToTimeline=function(e){this.previewTimeline[e]={timestamp:l.now()}},e.currentSession=null,e})();t.FilePreviewSession=f}),define("modules/clean/react/file_viewer/open_button/types",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});(function(e){e[e.DOWNLOAD=0]="DOWNLOAD",e[e.UNITY_FILE=1]="UNITY_FILE",e[e.UNITY_FOLDER=2]="UNITY_FOLDER",e[e.OPEN_WITH=3]="OPEN_WITH",e[e.OPEN_IN_PAPER=4]="OPEN_IN_PAPER",e[e.APP_ACTION=5]="APP_ACTION",e[e.PREPARE_FOR_SIGNATURE=6]="PREPARE_FOR_SIGNATURE",e[e.SHARE_TO_SLACK=7]="SHARE_TO_SLACK"})(t.OpenButtonAction||(t.OpenButtonAction={}))}),define("modules/clean/react/file_viewer/url_utils",["require","exports","tslib","modules/clean/history","modules/core/browser"],function(e,t,n,i,r){"use strict";function a(e){return function(t){t.ctrlKey||t.metaKey||e(t)}}function o(){var e=r.get_uri();return e.removeQuery("preview"),e}function s(){d("preview")}function l(e){c("preview",e.filename)}function u(e){i.default.push_state(e.getPath(),e.getQuery())}function c(e,t){var n={};n[e]=t;var r=i.default.get_uri();r.updateQuery(n),u(r)}function d(e){var t=i.default.get_uri();t.removeQuery(e),u(t)}Object.defineProperty(t,"__esModule",{value:!0}),i=n.__importDefault(i),r=n.__importStar(r),t.linkClickHandler=a,t.getCurrentFolderHref=o,t.closeFile=s,t.openFile=l}),define("modules/clean/react/location/types",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(function(){function e(e,t){void 0===t&&(t={}),this.path=e,this.query=t}return e.fromURI=function(t){return new e(t.getPath(),t.getQuery())},e})();t.Location=n}),define("modules/clean/react/location/with_location",["require","exports","tslib","react","modules/clean/react/location/types","modules/clean/react/size_class/utils","modules/core/browser","modules/clean/history"],function(e,t,n,i,r,a,o,s){"use strict";function l(e,t){return void 0===t&&(t=u),l=(function(a){function l(e){var n=a.call(this,e)||this;n.onLocationChange=function(e,i){n.setState(t(new r.Location(n.basePathComponent+"/"+decodeURIComponent(e),i),n.props))};var i=o.get_uri(),s=i.getPath()
;return n.basePathComponent="/"+s.split("/")[1],n.state=t(r.Location.fromURI(i),e),n}return n.__extends(l,a),l.prototype.componentDidMount=function(){s.default.add_callback(this.basePathComponent,this.onLocationChange,!0)},l.prototype.componentWillUnmount=function(){s.default.remove_callback(this.basePathComponent,this.onLocationChange)},l.prototype.render=function(){return i.default.createElement(e,n.__assign({},this.props,this.state))},l})(i.default.PureComponent),l.displayName="WithLocation("+a.getDisplayName(e)+")",l;var l}Object.defineProperty(t,"__esModule",{value:!0}),i=n.__importDefault(i),o=n.__importStar(o),s=n.__importDefault(s);var u=function(e){return{location:e}};t.withLocation=l}),define("modules/clean/react/open_in_app/banner",["require","exports","tslib","react","modules/clean/react/css","modules/clean/open_in_app/actions","modules/core/i18n"],function(e,t,n,i,r,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=n.__importDefault(i);var s=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={closed:!1,showInstallAppText:!1},t.handleAppRedirect=function(){t.props.onClick&&t.props.onClick(),a.openInApp(t.props.urls,{onAppNeeded:function(){return t.setState({showInstallAppText:!0})},onAppInstalled:function(){return t.setState({showInstallAppText:!1})}})},t.dismiss=function(){t.setState({closed:!0});var e=t.props.onClose;e&&e()},t}return n.__extends(t,e),t.prototype.componentWillUnmount=function(){a.cleanUp()},t.prototype.render=function(){var e=this.state,t=e.closed,n=e.showInstallAppText;return t?null:i.default.createElement("div",{className:"open-in-app-banner-container"},i.default.createElement("button",{className:"button-as-link open-in-app-banner-text",onClick:this.handleAppRedirect},n?o._("Get the Dropbox App"):o._("View In App")),i.default.createElement("button",{className:"button-as-link open-in-app-banner-close","aria-label":"Close",onClick:this.dismiss}))},t})(i.default.Component),l=["/static/css/open_in_app/banner-vflSK4--U.css"],u=r.requireCssWithComponent(s,l);t.OpenInAppBanner=u}),define("modules/clean/react/size_class/size_class",["require","exports","tslib","react","external/classnames","hoist-non-react-statics","spectrum/match","modules/clean/react/size_class/constants","modules/clean/react/size_class/utils","modules/clean/react/size_class/utils"],function(e,t,n,i,r,a,o,s,l,u){"use strict";function c(e,t){void 0===t&&(t={});var c=(function(a){function c(){var t=null!==a&&a.apply(this,arguments)||this;return t.displayName="WithSizeClass("+u.getDisplayName(e),t.state={},t.getHandleMatch=function(e,n){return function(){t.setState((i={},i[e]=n,i));var i}},t.onMatchMedium=t.getHandleMatch("matchSizeClassMedium",!0),t.onUnmatchMedium=t.getHandleMatch("matchSizeClassMedium",!1),t.onMatchLarge=t.getHandleMatch("matchSizeClassLarge",!0),t.onUnmatchLarge=t.getHandleMatch("matchSizeClassLarge",!1),t}return n.__extends(c,a),c.prototype.render=function(){var a=t.isResponsiveEnabled,u=t.responsiveClassName,c=void 0===u?"":u;return i.default.createElement("div",{className:r.default((d={},d[c]=!a||a(),d))},i.default.createElement(o.Match,{media:s.MEDIA_SIZE_CLASS_MEDIUM,onMatch:this.onMatchMedium,onUnmatch:this.onUnmatchMedium}),i.default.createElement(o.Match,{media:s.MEDIA_SIZE_CLASS_LARGE,onMatch:this.onMatchLarge,onUnmatch:this.onUnmatchLarge}),i.default.createElement(e,n.__assign({},this.props,{sizeClass:l.getSizeClass(this.state.matchSizeClassMedium,this.state.matchSizeClassLarge,a)})));var d},c})(i.default.Component);return a.default(c,e)}Object.defineProperty(t,"__esModule",{value:!0}),i=n.__importDefault(i),r=n.__importDefault(r),a=n.__importDefault(a),t.withSizeClass=c}),define("modules/clean/react/size_class/utils",["require","exports","modules/clean/react/size_class/constants"],function(e,t,n){"use strict";function i(e,t,i){return i&&!i()?n.SizeClass.Large:t?n.SizeClass.Large:e?n.SizeClass.Medium:n.SizeClass.Small}function r(e){return e.displayName||e.name||"Component"}Object.defineProperty(t,"__esModule",{value:!0}),t.getSizeClass=i,t.getDisplayName=r}),define("modules/clean/redux/reselect-utils",["require","exports","tslib","external/reselect","external/lodash"],function(e,t,n,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=n.__importStar(r);var a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce(function(e,t){return e+"-"+JSON.stringify(t)},"")};t.unboundCreateSelector=i.createSelectorCreator(r.memoize,a)}),define("modules/clean/uuid",["require","exports","tslib","modules/clean/crypto","modules/clean/insecure_uuid"],function(e,t,n,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=n.__importStar(i);var a=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.getRandomBytes=function(e){var t=this;void 0===e&&(e={});var n=new Array(16);try{i.getRandomValues(n)}catch(t){if(t.message.match(/generator isn't seeded/)&&e.allowInsecure)return this.getInsecureRandomValues(n);throw t}return n.map(function(e){return t.toByte(e)})},t.v4=function(e){void 0===e&&(e={});var t=this.getRandomBytes({allowInsecure:e.allowInsecure});return t[6]=15&t[6]|64,t[8]=63&t[8]|128,this.bytesToUUIDString(t)},t})(r.InsecureUUID);t.UUID=a});
//# sourceMappingURL=pkg-shared_link_core.min.js-vflAybr__.map