define(["require","exports","tslib"],function(e,t,a){"use strict";function n(e,t){return function(a){a({type:"@@DeepIntegrations/saveChatMessage",meta:{userKey:e.account_id},payload:{chatMessage:t}})}}function s(e,t){return function(a){a({type:"@@DeepIntegrations/changeDefaultChatService",meta:{userKey:e.account_id},payload:{service:t}})}}function r(e,t,n){var s=this;return function(t,r,c){return a.__awaiter(s,void 0,void 0,function(){var s,r,i,o;return a.__generator(this,function(a){switch(a.label){case 0:s=c().deepIntegrationsHandler,r={target:e.email||"",message:n},t({type:"@@DeepIntegrations/sendChatMessage",meta:{userKey:e.account_id},payload:{state:"pending"}}),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,s.ns("slack").rpc("send_direct_message",r,{})];case 2:return i=a.sent(),t({type:"@@DeepIntegrations/sendChatMessage",meta:{userKey:e.account_id},payload:{state:"fulfilled",value:i}}),t({type:"@@DeepIntegrations/saveChatMessage",meta:{userKey:e.account_id},payload:{chatMessage:""}}),[3,4];case 3:return o=a.sent(),t({type:"@@DeepIntegrations/sendChatMessage",meta:{userKey:e.account_id},payload:{state:"rejected",error:o}}),[3,4];case 4:return[2]}})})}}function c(e){return function(t){t({type:"@@DeepIntegrations/clearLastSentMessage",meta:{userKey:e.account_id}})}}function i(e){var t=this;return function(n,s,r){return a.__awaiter(t,void 0,void 0,function(){var t,s,c,i,o,u;return a.__generator(this,function(a){switch(a.label){case 0:t=r().deepIntegrationsHandler,s={account_ids_or_emails:[e.account_id],range_start_time:Date.now(),range_end_time:Date.now()+864e5},n({type:"@@DeepIntegrations/loadCalendarEvents",meta:{userKey:e.account_id},payload:{state:"pending"}}),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,t.ns("calendar").rpc("fetch_events_in_common",s,{})];case 2:return c=a.sent(),i=c.event_mapping,o=i[e.account_id]||[],n({type:"@@DeepIntegrations/loadCalendarEvents",meta:{userKey:e.account_id},payload:{state:"fulfilled",value:o}}),[3,4];case 3:return u=a.sent(),n({type:"@@DeepIntegrations/loadCalendarEvents",meta:{userKey:e.account_id},payload:{state:"rejected",error:u}}),[3,4];case 4:return[2]}})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.saveChatMessage=n,t.changeDefaultChatService=s,t.sendChatMessage=r,t.clearLastSentMessage=c,t.loadCalendarEvents=i});
//# sourceMappingURL=actions.min.js-vflrUp4nT.map