define(["require","exports","tslib","external/lodash","react","deep-integrations/profile_card/sections/seen_state_section","deep-integrations/profile_card/sections/chat_section","deep-integrations/profile_card/sections/calendar_section","deep-integrations/data/actions","deep-integrations/profile_card/dropdown_menu"],function(e,t,n,r,a,s,o,i,c,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.sectionBaseProps,r=e.seenStateProps,c=e.messageProps,l=e.calendarProps,d=[];return d.push(a.createElement(s.SeenStateSection,n.__assign({key:"seen_state_action"},t,r))),l&&d.push(a.createElement(i.CalendarSection,n.__assign({key:"calendar_section"},t,l))),c&&d.push(a.createElement(o.ChatSection,n.__assign({key:"chat_section"},t,c))),a.createElement("div",{className:"int-profile-card-content"},a.createElement("div",{className:"int-profile-card-seen-state-section-banner",style:{backgroundColor:this.props.seenStateProps.avatarColor}}),d.map(function(e){return a.createElement("div",{className:"int-profile-card-section-container"},e)}))},t})(a.Component);t.ProfileCard=d;var u=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){return a.createElement("div",{className:"int-profile-card-content-wrapper-container"},a.createElement("div",{className:"int-profile-card-content-wrapper-content"},a.createElement(d,n.__assign({},this.props))))},t})(a.Component);t.ProfileCardWithWrapper=u,t.mapStateToProps=function(e){return e},t.mapDispatchToProps=function(e){return{dispatch:e}},t.mergeProps=function(e,t,r){return n.__assign({sectionBaseProps:{targetUser:r.targetUser,file:r.file,localization:r.localization,featureGates:r.featureGates,renderDropdownMenu:r.renderDropdownMenu||l.defaultRenderDropdownMenu,onConnectService:r.onConnectService,onConnectServices:r.onConnectServices},seenStateProps:{seenState:r.seenState,avatarColor:r.avatarColor,isActive:r.isActive,initials:r.initials,photoUrl:r.photoUrl}},p(e,t.dispatch,r),f(e,t.dispatch,r))};var p=function(e,t,n){if("fulfilled"!==n.listServices.state)return{};if(!n.featureGates.showMessageSection)return{};var a=n.listServices.value,s=r.find(a.services,function(e){return"zoom"===e.service_type[".tag"]}),o=s&&"is_connected"===s.connection_state[".tag"],i=r.find(a.services,function(e){return"slack_dropbox"===e.service_type[".tag"]}),l=i&&"is_connected"===i.connection_state[".tag"];if(!o&&!l)return{};var d=n.targetUser,u=e.chatState[d.account_id];return{messageProps:{defaultChatService:u&&u.defaultChatService||{".tag":"slack_dropbox"},savedMessage:u&&u.savedMessage,lastSendMessageRequest:u&&u.lastSendMessageRequest,onChangeDefaultChatService:function(e,n){return t(c.changeDefaultChatService(e,n))},onClearLastSentMessage:function(e){return t(c.clearLastSentMessage(e))},onSendMessage:function(e,n,r){return t(c.sendChatMessage(n,e,r))},onMessageChange:function(e){return t(c.saveChatMessage(d,e))}}}},f=function(e,t,n){if("fulfilled"!==n.listServices.state)return{};if(!n.featureGates.showCalendarSection)return{};var a=n.listServices.value,s=r.find(a.services,function(e){return"google"===e.service_type[".tag"]}),o=r.find(a.services,function(e){return"outlook"===e.service_type[".tag"]});if(!s&&!o)return{};var i=s&&"is_connected"===s.connection_state[".tag"],l=o&&"is_connected"===o.connection_state[".tag"],d=r.find(a.services,function(e){return"zoom"===e.service_type[".tag"]}),u=d&&"is_connected"===d.connection_state[".tag"],p=n.targetUser,f=e.calendarState[p.account_id];return{calendarProps:{anyCalendarsLinked:i||l,isZoomConnected:u,loadCalendarEvents:function(){return t(c.loadCalendarEvents(p))},calendarEvents:f&&f.calendarEvents}}}});
//# sourceMappingURL=profile_card.min.js-vfl8DlzDv.map