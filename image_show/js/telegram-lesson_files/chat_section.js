define(["require","exports","tslib","react","deep-integrations/profile_card/toast_bar","spectrum/button","deep-integrations/profile_card/assets"],function(e,t,a,n,o,s,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={hasInputFocus:!1},t.mounted=!1,t.delayRemovingLastSentMessage=function(){setTimeout(t.onClearLastSentMessage,5e3)},t.onMessageChange=function(e){t.props.onMessageChange(e.target.value)},t.onSendMessage=function(){var e=t.props,a=e.onSendMessage,n=e.defaultChatService,o=e.targetUser,s=e.savedMessage;a(n,o,void 0===s?"":s),t.delayRemovingLastSentMessage()},t.onCancelMessage=function(){t.mounted&&t.setState({hasInputFocus:!1}),t.props.onMessageChange("")},t.onClearLastSentMessage=function(){var e=t.props;(0,e.onClearLastSentMessage)(e.targetUser)},t.onFocus=function(){t.mounted&&t.setState({hasInputFocus:!0})},t.resize=function(){t.textarea&&(t.textarea.style.height="auto",t.textarea.style.height=t.textarea.scrollHeight+"px")},t.buildIcon=function(){switch(t.props.defaultChatService[".tag"]){case"slack_dropbox":return r.slackIcon;case"zoom":return r.zoomIcon;default:return null}},t.onSelectDropdownOption=function(e){var a=t.props,n=a.targetUser,o=a.onChangeDefaultChatService;switch(e){case"slack_dropbox":o(n,{".tag":"slack_dropbox"});break;case"zoom":o(n,{".tag":"zoom"});break;case"manage_apps":}},t}return a.__extends(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,this.resize(),this.props.lastSendMessageRequest&&this.delayRemovingLastSentMessage()},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.componentDidUpdate=function(t,a){e.prototype.componentDidUpdate&&e.prototype.componentDidUpdate.call(this,t,a),t.savedMessage!==this.props.savedMessage&&this.resize()},t.prototype.renderToastBar=function(){var e=this.props.lastSendMessageRequest;if(!e)return null;var t,a;switch(e.state){case"pending":t="info",a="Sending";break;case"fulfilled":t="complete",a="Message sent successfully";break;case"rejected":t="warn",a="Something went wrong";break;default:t="info",a=""}return n.createElement(o.ToastBar,{variant:t,title:a,actions:[{title:"close",onActionTrigger:this.onClearLastSentMessage}]})},t.prototype.buildDropdownMenu=function(){var e=this.props,t=e.renderDropdownMenu,a=e.defaultChatService,o=a[".tag"],s=[[{title:"Slack",value:"slack_dropbox",icon:r.slackIcon,secondaryIcon:"slack_dropbox"===o?r.checkIcon:void 0,selected:"slack_dropbox"===o},{title:"Zoom",value:"zoom",icon:r.zoomIcon,secondaryIcon:"zoom"===o?r.checkIcon:void 0,selected:"zoom"===o}],[{title:"Manage Apps",value:"manage_apps",icon:r.gearIcon,selected:!1}]];return t(n.createElement("div",{className:"int-profile-card-dropdown-button"},r.arrowIcon),s,this.onSelectDropdownOption)},t.prototype.render=function(){var e=this,t=this.props,a=t.savedMessage,o=void 0===a?"":a,r=t.defaultChatService,c=n.createElement("div",{className:"int-profile-card-dropdown-button-wrapper"},this.buildDropdownMenu()),i=o.length||this.state.hasInputFocus?n.createElement("div",{className:"int-profile-card-chat-section-message-buttons"},n.createElement(s.Button,{variant:"primary",onClick:this.onSendMessage,disabled:!o.length},"Send"),n.createElement(s.Button,{variant:"borderless",className:"int-transparent-background",onClick:this.onCancelMessage},"Cancel"),n.createElement("div",{className:"int-profile-card-chat-section-message-buttons-dropdown"},c)):null,l="zoom"===r[".tag"]?"Message On Zoom":"Message On Slack";return n.createElement("div",null,n.createElement("div",{className:"int-profile-card-chat-section"},this.buildIcon(),n.createElement("div",{className:"int-profile-card-chat-section-message"},n.createElement("div",{className:"int-flex"},n.createElement("textarea",{ref:function(t){return e.textarea=t},placeholder:l,className:"int-profile-card-chat-section-message-input",value:o,rows:1,onChange:this.onMessageChange,onFocus:this.onFocus}),!i&&c),i)),this.renderToastBar())},t})(n.Component);t.ChatSection=c});
//# sourceMappingURL=chat_section.min.js-vflc-bL12.map