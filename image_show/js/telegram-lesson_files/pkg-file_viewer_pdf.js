define("esignature/public/gated_esignature_field_flag_group",["require","exports","tslib","react","modules/clean/react/async/loadable","esignature/public/utils"],function(e,t,n,o,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),t.GatedFieldFlagGroup=function(e){return i.esignatureEnabled()?o.default.createElement(a,n.__assign({},e)):null};var a=r.Loadable({loader:function(){return new Promise(function(t,n){e(["esignature/components/connected_field_flag_group"],t,n)}).then(n.__importStar).then(function(e){return e.ConnectedFieldFlagGroup})}})}),define("esignature/public/gated_esignature_layer",["require","exports","tslib","react","modules/clean/react/async/loadable","esignature/public/utils"],function(e,t,n,o,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),t.GatedEsignatureLayer=function(e){return i.esignatureEnabled()?o.default.createElement(a,n.__assign({},e)):null};var a=r.Loadable({loader:function(){return new Promise(function(t,n){e(["esignature/components/esignature_layer"],t,n)}).then(n.__importStar).then(function(e){return e.EsignatureLayer})}})}),define("file-viewer/i18n",["require","exports","file-viewer/invariant"],function(e,t,n){"use strict";function o(e,t){var n=Array.isArray(e)?e.slice():[e];if(n.sort(),!t)return n.join("|");var o=Object.keys(t);return o.sort(),o.reduce(function(e,n){return e+"|"+n+"="+t[n]},n.join("|"))}function r(e,t){return function(n,r){var i=o(e,r);return t[i]||(t[i]=new Intl.NumberFormat(e,r)),t[i].format(n)}}function i(e,t){return function(n,r){var i=o(e,r);return t[i]||(t[i]=new Intl.DateTimeFormat(e,r)),t[i].format(n)}}function a(e){var t=e.split(/(\{.*?\})|(%\(.*?\)s)/g);if(1===t.length)return{str:[e],tokens:[]};var n=[];return{str:t.filter(Boolean).map(function(e,t){if(t%2){var o=e;"{"===e[0]?o=e.slice(1,e.length-1):"%"===e[0]&&(o=e.slice(2,e.length-2));var r=n.indexOf(o);return~r?r:(n.push(o),n.length-1)}return e}),tokens:n}}function s(e,t){return void 0===t&&(t={}),Object.keys(e).forEach(function(n){return t[n]=a(e[n].defaultMessage)}),function(e,o){n.invariant(!!e.id,"Missing message ID");var r=t[e.id];n.invariant(!!r,e.id+" was not in our list of translated messages");var i=r.str.map(function(t){if("string"==typeof t)return t;var i=r.tokens[t];return n.invariant(!!(i&&o&&i in o),"Missing token "+i+" when attempting to translate "+e.defaultMessage),o[i]}).reduce(function(e,t){var n=e[e.length-1];return"number"==typeof t&&(t+=""),"string"!=typeof n||"string"!=typeof t?(e.push(t),e):(e[e.length-1]=n+t,e)},[]);return 1===i.length?i[0]:i}}function l(){return{messageFormat:{},numberFormat:{},dateTimeFormat:{}}}function d(e,t,n){return{formatMessage:s(t,n.messageFormat),formatNumber:r(e,n.numberFormat),formatDateTime:i(e,n.dateTimeFormat)}}Object.defineProperty(t,"__esModule",{value:!0});t.createI18nCache=l,t.createFormatters=d,t.dummyFormatMessage=function(e){return e.defaultMessage}}),define("file-viewer/interesection_observer",["require","exports","intersection-observer"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PolyfilledIntersectionObserver=IntersectionObserver}),define("intersection-observer",["require","exports"],function(e,t){"use strict";(function(e,t){function n(e){this.time=e.time,this.target=e.target,this.rootBounds=e.rootBounds,this.boundingClientRect=e.boundingClientRect,this.intersectionRect=e.intersectionRect||c(),this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,n=t.width*t.height,o=this.intersectionRect,r=o.width*o.height;this.intersectionRatio=n?Number((r/n).toFixed(4)):this.isIntersecting?1:0}function o(e,t){var n=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(n.root&&1!=n.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=i(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(n.rootMargin),this.thresholds=this._initThresholds(n.threshold),this.root=n.root||null,this.rootMargin=this._rootMarginValues.map(function(e){return e.value+e.unit}).join(" ")}function r(){return e.performance&&performance.now&&performance.now()}function i(e,t){var n=null;return function(){n||(n=setTimeout(function(){e(),n=null},t))}}function a(e,t,n,o){"function"==typeof e.addEventListener?e.addEventListener(t,n,o||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,n)}function s(e,t,n,o){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,o||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,n)}function l(e,t){var n=Math.max(e.top,t.top),o=Math.min(e.bottom,t.bottom),r=Math.max(e.left,t.left),i=Math.min(e.right,t.right),a=i-r,s=o-n;return a>=0&&s>=0&&{top:n,bottom:o,left:r,right:i,width:a,height:s}}function d(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):c()}function c(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function p(e,t){for(var n=t;n;){if(n==e)return!0;n=u(n)}return!1}function u(e){var t=e.parentNode;return t&&11==t.nodeType&&t.host?t.host:t}if("IntersectionObserver"in e&&"IntersectionObserverEntry"in e&&"intersectionRatio"in e.IntersectionObserverEntry.prototype)return void("isIntersecting"in e.IntersectionObserverEntry.prototype||Object.defineProperty(e.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}}));var f=[];o.prototype.THROTTLE_TIMEOUT=100,o.prototype.POLL_INTERVAL=null,o.prototype.USE_MUTATION_OBSERVER=!0,o.prototype.observe=function(e){if(!this._observationTargets.some(function(t){return t.element==e})){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},o.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter(function(t){return t.element!=e}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},o.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},o.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},o.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter(function(e,t,n){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==n[t-1]})},o.prototype._parseRootMargin=function(e){var t=e||"0px",n=t.split(/\s+/).map(function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}});return n[1]=n[1]||n[0],n[2]=n[2]||n[0],n[3]=n[3]||n[1],n},o.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(a(e,"resize",this._checkForIntersections,!0),a(t,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in e&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},o.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,s(e,"resize",this._checkForIntersections,!0),s(t,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},o.prototype._checkForIntersections=function(){var e=this._rootIsInDom(),t=e?this._getRootRect():c();this._observationTargets.forEach(function(o){var i=o.element,a=d(i),s=this._rootContainsTarget(i),l=o.entry,c=e&&s&&this._computeTargetAndRootIntersection(i,t),p=o.entry=new n({time:r(),target:i,boundingClientRect:a,rootBounds:t,intersectionRect:c});l?e&&s?this._hasCrossedThreshold(l,p)&&this._queuedEntries.push(p):l&&l.isIntersecting&&this._queuedEntries.push(p):this._queuedEntries.push(p)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},o.prototype._computeTargetAndRootIntersection=function(n,o){if("none"!=e.getComputedStyle(n).display){for(var r=d(n),i=r,a=u(n),s=!1;!s;){var c=null,p=1==a.nodeType?e.getComputedStyle(a):{};if("none"==p.display)return;if(a==this.root||a==t?(s=!0,c=o):a!=t.body&&a!=t.documentElement&&"visible"!=p.overflow&&(c=d(a)),c&&(i=l(c,i),!i))break;a=u(a)}return i}},o.prototype._getRootRect=function(){var e;if(this.root)e=d(this.root);else{var n=t.documentElement,o=t.body;e={top:0,left:0,right:n.clientWidth||o.clientWidth,width:n.clientWidth||o.clientWidth,bottom:n.clientHeight||o.clientHeight,height:n.clientHeight||o.clientHeight}}return this._expandRectByRootMargin(e)},o.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map(function(t,n){return"px"==t.unit?t.value:t.value*(n%2?e.width:e.height)/100}),n={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},o.prototype._hasCrossedThreshold=function(e,t){var n=e&&e.isIntersecting?e.intersectionRatio||0:-1,o=t.isIntersecting?t.intersectionRatio||0:-1;if(n!==o)for(var r=0;r<this.thresholds.length;r++){var i=this.thresholds[r];if(i==n||i==o||i<n!=i<o)return!0}},o.prototype._rootIsInDom=function(){return!this.root||p(t,this.root)},o.prototype._rootContainsTarget=function(e){return p(this.root||t,e)},o.prototype._registerInstance=function(){f.indexOf(this)<0&&f.push(this)},o.prototype._unregisterInstance=function(){var e=f.indexOf(this);e!=-1&&f.splice(e,1)},e.IntersectionObserver=o,e.IntersectionObserverEntry=n})(window,document)}),define("file-viewer/invariant",["require","exports"],function(e,t){"use strict";function n(e,t){if(!e){var n=void 0;throw void 0===t?n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings."):(n=new Error(t),n.name="Invariant Violation"),n.framesToPop=1,n}}Object.defineProperty(t,"__esModule",{value:!0}),t.invariant=n}),define("file-viewer/preview_pdf/img_layer",["require","exports","tslib","react"],function(e,t,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o);var r=(function(e){function t(){var t=e.apply(this,arguments)||this;return t.el=null,t}return n.__extends(t,e),t.prototype.componentDidMount=function(){"function"==typeof this.props.onComponentDidMount&&this.props.onComponentDidMount(),this.el&&this.el.complete&&("function"==typeof this.props.onLoad&&(this.el.naturalHeight||this.el.naturalWidth)?this.props.onLoad():"function"==typeof this.props.onError&&this.props.onError())},t.prototype.render=function(){var e=this,t=this.props,n=t.className,r=t.onLoad,i=t.onError,a=t.alt,s=t.src;return o.createElement("div",{className:n},o.createElement("img",{ref:function(t){return e.el=t},alt:a,width:"100%",role:"tabpanel","aria-hidden":"true",src:s,onLoad:r,onError:i}))},t})(o.PureComponent);t.ImgLayer=r,r.defaultProps={src:"",alt:"",onLoad:function(){},onError:function(){}}}),define("file-viewer/preview_pdf",["require","exports","file-viewer/preview_pdf/sidebar","file-viewer/preview_pdf/links_layer","file-viewer/preview_pdf/text_transform","file-viewer/preview_pdf/img_layer","file-viewer/preview_pdf/text_layer","file-viewer/preview_pdf/text_transform"],function(e,t,n,o,r,i,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sidebar=n.Sidebar,t.SIDEBAR_THUMBNAIL_WIDTH=n.SIDEBAR_THUMBNAIL_WIDTH,t.LinksLayer=o.LinksLayer,t.normalizeUrl=r.normalizeUrl,t.ImgLayer=i.ImgLayer,t.TextLayer=a.TextLayer,t.transformText=s.transform,t.TextNodeType=s.TextNodeType,t.TextDir=s.TextDir}),define("file-viewer/preview_pdf/links_layer",["require","exports","tslib","react","file-viewer/preview_pdf/text_transform"],function(e,t,n,o,r){"use strict";function i(e){return!!e.ur}Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o);var a={textbox:"_3vFF3xH4Yd",textLayerInner:"_1KgDGecM-D",linksLayer:"_15JT0CLHfC",internalLink:"_3LdRo_g_9w",imgLayer:"_1Sbhj3cHk4"};t.LinksLayer=function(e){var t=e.formatMessage,n=e.links.map(function(n,a){var s=n.a,l=n.r,d=l[0],c=l[1],p=l[2],u=l[3];u<0&&(c+=u,u=-u),p<0&&(d+=p,p=-p);var f={position:"absolute",bottom:c,left:d,width:p,height:u};return i(s)?s.ur.startsWith("mailto:")?o.createElement("a",{key:a,style:f,href:s.ur,"aria-label":t({id:"uh_2T",defaultMessage:"External Link"})}):o.createElement("a",{key:a,style:f,href:r.normalizeUrl(s.ur),target:"_blank",rel:"noreferrer noopener","aria-label":t({id:"uh_2T",defaultMessage:"External Link"})}):o.createElement("div",{key:a,className:e.css.internalLink,style:f,"aria-label":t({id:"PLDnD",defaultMessage:"Internal Link"}),onClick:function(t){return e.onInternalLinkClicked(s.pn,t)}})});return o.createElement("div",{className:e.css.linksLayer,style:{transform:"scale("+e.clientScaleFactor+")"}},n)},t.LinksLayer.defaultProps={formatMessage:function(e){return e.defaultMessage},css:a,links:[],width:0,height:0,clientScaleFactor:1,onInternalLinkClicked:function(){}}}),define("file-viewer/preview_pdf/sidebar",["require","exports","tslib","react","classnames","file-viewer/i18n","file-viewer/interesection_observer","file-viewer/utils"],function(e,t,n,o,r,i,a,s){"use strict";function l(){}function d(e,n){return t.SIDEBAR_THUMBNAIL_WIDTH/e*n}function c(e,t){var n=e.children[t];if(!n)return!1;var o=n.offsetTop+n.clientHeight<e.scrollTop||n.offsetTop>e.scrollTop+e.clientHeight;return o&&(e.scrollTop=n.offsetTop),o}function p(e,t){return e.length===t.length&&!e.find(function(e,n){return e.thumbnailUrl!==t[n].thumbnailUrl})}Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o),r=n.__importDefault(r);var u={"thumbnail-width":"120px",container:"_3iLfc1LnFm",thumbnail:"wtK5vXKwk2",loader:"_3BKIhQr00U _3fqREDOmbd",selected:"_3y6gOEd4Tg",focused:"_30lMtDdLNU",thumbnailWidth:"120px"};t.SIDEBAR_THUMBNAIL_WIDTH=parseInt(u.thumbnailWidth,10);var f=(function(e){function t(){var t=e.apply(this,arguments)||this;return t.state={error:!1},t.handleError=function(e){t.setState({error:!0})},t}return n.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.isSelected,n=e.onClick,i=e.index,a=e.css,s=e.formatMessage,l=e.thumbnailUrl,d=e.aspectRatio,c=e.renderBadge,p=e.isVisible,u=this.state.error;return o.createElement("li",{"data-index":i},o.createElement("a",{href:"#",onClick:function(e){return n(i)},tabIndex:-1,"aria-current":t?"page":void 0},o.createElement("div",{className:r.default(a.thumbnail,(f={},f[a.selected]=t,f)),style:{height:parseInt(a.thumbnailWidth,10)*d}},p&&u?void 0:o.createElement("i",{className:a.loader}),p&&!u?o.createElement("img",{src:l,onError:this.handleError,alt:s({id:"2yLzB",defaultMessage:"Page {index}"},{index:i})}):void 0),c?c(i):void 0,i+1));var f},t})(o.PureComponent);t.InternalSidebarItem=f;var g=(function(e){function t(){var t=e.apply(this,arguments)||this;return t.state={visibleItemIndices:{}},t.handleIntersection=function(e){var o=t.state.visibleItemIndices,r=e.filter(function(e){return e.isIntersecting}).map(function(e){return e.target.dataset.index}).filter(function(e){return!(e in o)}).reduce(function(e,t){return e[t]=!0,e},{});Object.keys(r).length&&t.setState({visibleItemIndices:n.__assign({},o,r)})},t.renderBadge=function(e){var n=t.props.pages[e];return"function"==typeof n.renderBadge?n.renderBadge(e,d(n.dimension[0],n.dimension[1])):null},t}return n.__extends(t,e),t.prototype.shouldComponentUpdate=function(e,t){var o=this.props,r=o.pages,i=n.__rest(o,["pages"]),a=e.pages,l=n.__rest(e,["pages"]);return!s.shallowEqual(i,l)||!s.shallowEqual(this.state,t)||!p(r,a)},t.prototype.componentDidMount=function(){var e=this;this.ol&&void 0!==a.PolyfilledIntersectionObserver&&(this.intersectionObserver=new a.PolyfilledIntersectionObserver(this.handleIntersection,{root:this.ol,rootMargin:"0px",threshold:.1}),Array.from(this.ol.children).forEach(function(t){return e.intersectionObserver.observe(t)}),c(this.ol,this.props.currentPageIndex))},t.prototype.componentWillReceiveProps=function(e){var t=this;p(e.pages,this.props.pages)||(this.setState({visibleItemIndices:{}}),this.ol&&this.intersectionObserver&&Array.from(this.ol.children).forEach(function(e){return t.intersectionObserver.unobserve(e)}))},t.prototype.componentWillUnmount=function(){this.intersectionObserver&&this.intersectionObserver.disconnect()},t.prototype.componentDidUpdate=function(e){var t=this;if(this.ol){e.pages!==this.props.pages&&this.intersectionObserver&&Array.from(this.ol.children).forEach(function(e){return t.intersectionObserver.observe(e)});var n=this.props.currentPageIndex;n!==e.currentPageIndex&&c(this.ol,n)}},t.prototype.render=function(){var e=this,t=this.props,n=t.className,i=t.currentPageIndex,a=t.isFocused,s=t.onBlur,l=t.onFocus,d=t.pages,c=t.css,p=t.formatMessage,u=t.style,g=this.state.visibleItemIndices,m=d.map(function(t,n){return o.createElement(f,{key:n,isSelected:i===n,onClick:e.props.onPageChange,index:n,formatMessage:p,thumbnailUrl:t.thumbnailUrl,css:c,isVisible:g[n],renderBadge:e.renderBadge,aspectRatio:t.dimension[1]/t.dimension[0]})});return o.createElement("nav",{className:r.default(c.container,n,(h={},h[c.focused]=a,h)),"aria-label":p({id:"2w1Rq",defaultMessage:"Document Sidebar"}),style:u},o.createElement("ol",{ref:function(t){return e.ol=t},tabIndex:0,onFocus:l,onBlur:s},m));var h},t})(o.PureComponent);t.Sidebar=g,g.defaultProps={currentPageIndex:0,pages:[],onPageChange:l,formatMessage:i.dummyFormatMessage,css:u}}),define("file-viewer/preview_pdf/text_box",["require","exports","tslib","react"],function(e,t,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o);var r=(function(e){function t(){var t=e.apply(this,arguments)||this;return t.state={xScale:1,yScale:1},t}return n.__extends(t,e),t.prototype.getDerivedStateFromProps=function(e){var t=e.rawText,n=e.width,o=e.height,r=e.fontSize;return this.scaleText(t,n,o,r,this.textElement)},t.prototype.componentDidMount=function(){this.setState(this.getDerivedStateFromProps(this.props),this.props.onRender)},t.prototype.componentWillReceiveProps=function(e){this.setState(this.getDerivedStateFromProps(e))},t.prototype.scaleText=function(e,t,n,o,r){var i=!0;if(e.length<=1)i=!1;else if(2===e.length){var a=e.charCodeAt(0),s=e.charCodeAt(1);a>=55296&&a<=56319&&s>=56320&&s<=57343&&(i=!1)}return i&&r?{xScale:t/r.clientWidth,yScale:o?1:n/r.clientHeight}:{xScale:1,yScale:1}},t.prototype.render=function(){var e=this,t=this.props,n=t.dir,r=t.x,i=t.y,a=t.rotation,s=t.transformedText,l=t.className,d={left:r,bottom:i,transform:"rotate("+-a+"rad) scale("+this.state.xScale+", "+this.state.yScale+")"};this.props.font&&(d.fontFamily=this.props.font.fontFamily,this.props.font.isBold&&(d.fontWeight="bold"),this.props.font.isItalic&&(d.fontStyle="italic")),this.props.fontSize&&(d.fontSize=this.props.fontSize+"px");var c=s.map(function(e){switch(e.type){case 1:return o.createElement("a",{href:"mailto:"+e.text},e.text);case 2:return o.createElement("a",{href:e.href,target:"_blank",rel:"noreferrer noopener"},e.text);default:return e.text}});return o.createElement("p",{className:l,style:d,ref:function(t){return e.textElement=t},dir:n,"data-test":"textbox"},c)},t})(o.PureComponent);t.TextBox=r,r.defaultProps={rawText:"",transformedText:[],x:0,y:0,width:0,height:0,rotation:0,dir:"ltr"}}),define("file-viewer/preview_pdf/text_layer",["require","exports","tslib","react","file-viewer/preview_pdf/text_box"],function(e,t,n,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o);var i={textbox:"_3vFF3xH4Yd",textLayerInner:"_1KgDGecM-D",linksLayer:"_15JT0CLHfC",internalLink:"_3LdRo_g_9w",imgLayer:"_1Sbhj3cHk4"},a=(function(e){function t(){var t=e.apply(this,arguments)||this;return t.numTextboxes=t.props.textboxes.length,t.onTextboxRender=function(){t.numTextboxes--,0===t.numTextboxes&&t.props.onRender()},t}return n.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){this.numTextboxes=e.textboxes.length},t.prototype.componentDidMount=function(){0===this.props.textboxes.length&&this.props.onRender()},t.prototype.render=function(){var e=this,t=this.props,n=t.css,i=t.textboxes,a={position:"absolute",top:0,left:0,width:this.props.width,height:this.props.height,transform:"scale("+this.props.clientScaleFactor+")",transformOrigin:"top left"},s=i.map(function(t,i){var a=t.t,s=t.r,l=t.d,d=s[0],c=s[1],p=s[2],u=s[3];return o.createElement(r.TextBox,{className:n.textbox,key:i,rawText:a,transformedText:t.transformedText,dir:t.dir,x:d,y:c,width:p,height:u,rotation:l,font:t.font,fontSize:t.h,onRender:e.onTextboxRender})});return o.createElement("div",{style:a,"data-test":"text-layer"},o.createElement("div",{className:n.textLayerInner},s))},t})(o.PureComponent);t.TextLayer=a,a.defaultProps={textboxes:[],onRender:function(){},css:i,clientScaleFactor:1,width:0,height:0}}),define("file-viewer/preview_pdf/text_transform",["require","exports","modules/clean/react/previews/pdf_viewer/text/unicode","modules/clean/react/previews/pdf_viewer/text/bidi"],function(e,t,n,o){"use strict";function r(e){return"http"===e.substr(0,4)?e:"http://"+e}function i(e){return e.split(l).map(function(e){if(l.test(e))return{type:0,text:e.replace("\t"," ")};var t;return s.test(e)?{text:e,type:1}:(t=e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/))&&t[2]&&t[4]?{href:r(e),text:e,type:2}:{type:0,text:e}}).reduce(function(e,t){var n=e[e.length-1];return n&&0===n.type&&0===t.type?n.text+=t.text:e.push(t),e},[])}function a(e){for(var t=n.getNormalizedUnicodes(),r="",a=0;a<e.length;a++){var s=e.charAt(a);void 0!==t[s]&&(s=t[s]),s=n.reverseIfRtl(s),"\t"===s&&(s=" "),r+=s}var l=o.bidi(r,-1,!1);return{dir:l.dir,str:i(l.str)}}Object.defineProperty(t,"__esModule",{value:!0});var s=/[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,63}/,l=/(\s+)/;(function(e){e.ltr="ltr",e.rtl="rtl",e.ttb="ttb"})(t.TextDir||(t.TextDir={})),(function(e){e[e.text=0]="text",e[e.email=1]="email",e[e.link=2]="link"})(t.TextNodeType||(t.TextNodeType={})),t.normalizeUrl=r,t.transform=a}),define("file-viewer/strings",["require","exports","modules/core/i18n"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.strings={"2yLzB":{id:"2yLzB",defaultMessage:n._("Page %(index)s",{comment:"label for each document page"})},"2w1Rq":{id:"2w1Rq",defaultMessage:n._("Document Sidebar",{comment:"a11y label for doc sidebar"})},uh_2T:{id:"uh_2T",defaultMessage:n._("External Link",{comment:"Label for external anchor link"})},PLDnD:{id:"PLDnD",defaultMessage:n._("Internal Link",{comment:"Label for internal anchor link"})},"1D-MZ":{id:"1D-MZ",defaultMessage:n._("Can\\u2019t show link. Something\\u2019s wrong with this file.",{comment:"Shown instead of description if there is an error"})},iTxna:{id:"iTxna",defaultMessage:n._("Open in new tab",{comment:"Label text for open button"})}}}),define("file-viewer/utils",["require","exports"],function(e,t){"use strict";function n(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t}function o(e,t){if(n(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var o=Object.keys(e),r=Object.keys(t);if(o.length!==r.length)return!1;for(var i=0;i<o.length;i++)if(!Object.prototype.hasOwnProperty.call(t,o[i])||!n(e[o[i]],t[o[i]]))return!1;return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.shallowEqual=o}),define("modules/clean/frame_messenger/frame_messenger_client",["require","exports","tslib","modules/clean/frame_messenger/frame_messenger_base"],function(e,t,n,o){"use strict";function r(e,t){return t.indexOf(e)>=0}Object.defineProperty(t,"__esModule",{value:!0});var i=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._trustedOriginForPosting=null,t._validActions=[],t._parentMessageQueue=[],t._onParentReady=null,t}return n.__extends(t,e),t.prototype.configureParentMessaging=function(e,t,n){void 0===n&&(n=null),this._trustedOriginForPosting=null,this._validActions=t,this._trustedMessageHandler=e,this._onParentReady=n},t.prototype.startListening=function(){e.prototype.startListening.call(this),this.requestParentOrigin()},t.prototype.postMessageToParent=function(e,t){void 0===t&&(t={});var n=this.packagePostMessage(e,t);null===this._trustedOriginForPosting?this._parentMessageQueue.push(n):this.getWindow().parent.postMessage(n,this._trustedOriginForPosting)},t.prototype.dispatchMessage=function(e,t){"parent-ready"===t.action&&this.updateParentOrigin(e.origin),r(t.action,this._validActions)&&null!==this._trustedMessageHandler&&this._trustedMessageHandler(t)},t.prototype.resetOriginsForPosting=function(){this._trustedOriginForPosting=null},t.prototype.updateParentOrigin=function(e){var t=this._trustedOriginForPosting;if(!this.isOriginAllowed(e))return!1;if(this._trustedOriginForPosting=e,this._parentMessageQueue.length>0){for(var n=0;n<this._parentMessageQueue.length;n++){var o=this._parentMessageQueue[n],r=JSON.parse(o);this.postMessageToParent(r.action,r.parameters)}this._parentMessageQueue=[]}return null!=this._trustedOriginForPosting&&null==t&&null!==this._onParentReady&&this._onParentReady(),!0},t.prototype.requestParentOrigin=function(){var e=this;this.getWindow().parent.postMessage('{"action": "child-requesting-parent-origin"}',"*");var n=function(){null===e._trustedOriginForPosting&&e.requestParentOrigin()};this.getWindow().setTimeout(n,t._REQUEST_PARENT_ORIGIN_POLL_DELAY)},t._REQUEST_PARENT_ORIGIN_POLL_DELAY=100,t})(o.FrameMessengerBase);t.FrameMessengerClient=i}),define("modules/clean/react/file_viewer/frame_interface",["require","exports","tslib","modules/clean/react/file_viewer/interface","modules/clean/react/previews/frame_messenger_host"],function(e,t,n,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=["annotation-end-drag","annotation-enter","annotation-hidden","annotation-leave","annotation-placed","annotation-start-drag","annotation-ui-click","annotation-ui-enter","annotation-ui-leave","annotation-ui-over","mouse-up","on-keydown","page-change","page-rendered","scale-change","scroll","doc-metadata-load"],a=(function(e){function t(n){var o=e.call(this,n)||this;return o.handleMessageFromFrame=function(e){o.eventEmitter.emit(e.action,e.parameters)},t.frameMessengerFactory?o.frameMessenger=t.frameMessengerFactory():o.frameMessenger=new r.PreviewFrameMessengerHost,o.frameMessenger.configureChildMessaging('iframe[name="preview-content"]',o.handleMessageFromFrame,i),o.frameMessenger.startListening(),o}return n.__extends(t,e),t.prototype.dispatchEvent=function(e,t){this.frameMessenger.postMessageToChildren(e,t)},t.prototype.destroy=function(){this.frameMessenger.stopListening()},t.setFrameMessengerFactory=function(e){t.frameMessengerFactory=e},t})(o.FileViewerInterface);t.FileViewerFrameInterface=a}),define("modules/clean/react/file_viewer/interface",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(function(){function e(e){this.eventEmitter=e}return e.prototype.destroy=function(){},e})();t.FileViewerInterface=n}),define("modules/clean/react/file_viewer/sidebar_helpers",["require","exports","modules/clean/react/file_viewer/constants","modules/clean/react/file_viewer/data/actions","modules/clean/react/size_class/constants"],function(e,t,n,o,r){"use strict";function i(e,t,o){return t===r.SizeClass.Large&&!o&&(e===n.DocType.ppt||e===n.DocType.pdf)}Object.defineProperty(t,"__esModule",{value:!0}),t.mapDispatchToProps={onSidebarOpen:o.openSidebar,onSidebarClose:o.closeSidebar},t.isSidebarEnabled=i}),define("modules/clean/react/previews/pdf_viewer/annotation_creation_layer",["require","exports","tslib","external/keymaster","external/lodash","react","modules/clean/react/previews/pdf_viewer/event_emitter","modules/clean/react/previews/pdf_viewer/transform","modules/clean/annotations/annotation_controller"],function(e,t,n,o,r,i,a,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),r=n.__importStar(r),i=n.__importDefault(i),l=n.__importDefault(l);var d=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={draftAnnotationVersion:0,postedAnnotationKey:"",draftAnnotationExists:!1},t.escKey=function(e){e.stopPropagation(),t.clearDraftAnnotationCommon()},t.onRefAnnotationController=function(e){t.annotationController=e},t.onPlaceDefaultAnnotation=function(){t.props.isFocusedPage&&t.clearDraftAnnotationCommon(!1,"",function(){t.annotationController.createRegion({top:0,left:0,bottom:t.scaledHeight,right:t.scaledWidth})})},t.handleHideAnnotation=function(e){e&&e.excludePage===t.props.pageNumber||t.clearDraftAnnotationCommon()},t.clearDraftAnnotationWithSignal=function(){t.clearDraftAnnotationCommon(!0,"",function(){t.props.frameMessenger.postMessageToParent("annotation-hidden")})},t.clearDraftAnnotationCommon=function(e,o,r){void 0===e&&(e=!0),void 0===o&&(o="");var i={draftAnnotationVersion:t.state.draftAnnotationVersion+1,postedAnnotationKey:o},a=e?n.__assign({},i,{draftAnnotationExists:!1}):i;t.setState(a,r)},t.onResize=r.debounce(t.clearDraftAnnotationCommon,1e3,{leading:!0,trailing:!1}),t.onUpdateAnnotations=function(e){var n=e.annotations.filter(function(e){return"POSTING"===e.commentActivity.status});if(n.length>0){var o=n[0].commentActivity.activity_key;o!==t.state.postedAnnotationKey&&t.clearDraftAnnotationCommon(o)}},t.onAnnotationHiddenCallback=function(){t.setState({draftAnnotationExists:!1}),a.eventEmitter.emit("annotation-hidden"),t.props.frameMessenger.postMessageToParent("annotation-hidden")},t.onAnnotationPlacedCallback=function(e){t.setState({draftAnnotationExists:!0});var n={annotation:t.finalizeAnnotation(e)};a.eventEmitter.emit("annotation-placed",n),t.props.frameMessenger.postMessageToParent("annotation-placed",n)},t.onAnnotationStartDragCallback=function(e){t.props.frameMessenger.postMessageToParent("annotation-start-drag",{annotation:t.finalizeAnnotation(e)})},t.onAnnotationEndDragCallback=function(e){t.props.frameMessenger.postMessageToParent("annotation-end-drag",{annotation:t.finalizeAnnotation(e)})},t.onAnnotationScrollCallback=function(e){e&&t.props.frameMessenger.postMessageToParent("scroll",{annotation:t.finalizeAnnotation(e)})},t.onAnnotationScaleChangeCallback=function(e){t.props.frameMessenger.postMessageToParent("scale-change",{annotation:t.finalizeAnnotation(e)})},t.onAnnotationEnterCallback=function(e){t.props.frameMessenger.postMessageToParent("annotation-enter",{annotation:t.finalizeAnnotation(e)})},t.onAnnotationRegionStart=function(){t.setState({draftAnnotationExists:!0})},t.onAnnotationLeaveCallback=function(e){t.props.frameMessenger.postMessageToParent("annotation-leave",{annotation:t.finalizeAnnotation(e)})},t}return n.__extends(t,e),t.prototype.componentDidMount=function(){a.eventEmitter.on("resize",this.onResize),a.eventEmitter.on("update-annotations",this.onUpdateAnnotations),a.eventEmitter.on("place-default-annotation",this.onPlaceDefaultAnnotation),a.eventEmitter.on("hide-annotation",this.handleHideAnnotation),a.eventEmitter.on("zoom-in",this.clearDraftAnnotationWithSignal),a.eventEmitter.on("zoom-out",this.clearDraftAnnotationWithSignal),o.default("esc","fileviewer",this.escKey)},t.prototype.componentWillUnmount=function(){a.eventEmitter.off("resize",this.onResize),a.eventEmitter.off("update-annotations",this.onUpdateAnnotations),a.eventEmitter.off("place-default-annotation",this.onPlaceDefaultAnnotation),a.eventEmitter.off("hide-annotation",this.handleHideAnnotation),
a.eventEmitter.off("zoom-in",this.clearDraftAnnotationWithSignal),a.eventEmitter.off("zoom-out",this.clearDraftAnnotationWithSignal),o.default.unbind("esc","fileviewer",this.escKey)},Object.defineProperty(t.prototype,"scaledWidth",{get:function(){var e=this.props,t=e.width,n=e.scaleFactor;return t*(void 0===n?1:n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaledHeight",{get:function(){var e=this.props,t=e.height,n=e.scaleFactor;return t*(void 0===n?1:n)},enumerable:!0,configurable:!0}),t.prototype.finalizeAnnotation=function(e){return e.pdf_coordinates=s.transformViewportCoordinates(this.props.pageNumber,this.props.parentOffset.left,this.props.parentOffset.top,this.props.width,this.props.height,this.props.scaleFactor,e.viewportCoordinates),e.pdf_page={rotate:0,view:{}},e},t.prototype.render=function(){return i.default.createElement("div",{"data-draft-annotation-exists":this.state.draftAnnotationExists,className:"db-annotation-creation-layer"},i.default.createElement(l.default,n.__assign({ref:this.onRefAnnotationController},r.pick(this.props,"disableTinyAnnotationRegions","isAnnotationCreationEnabled","isAnnotationHighlightEnabled","isAnnotationRegionEnabled"),{parentContainerOffset:this.props.parentOffset,creationLayerWidth:this.scaledWidth,creationLayerHeight:this.scaledHeight,controllerEventHandlers:this.props.delegate,onAnnotationHiddenCallback:this.onAnnotationHiddenCallback,onAnnotationRegionStart:this.onAnnotationRegionStart,onAnnotationPlacedCallback:this.onAnnotationPlacedCallback,onAnnotationStartDragCallback:this.onAnnotationStartDragCallback,onAnnotationEndDragCallback:this.onAnnotationEndDragCallback,onAnnotationScrollCallback:this.onAnnotationScrollCallback,onAnnotationScaleChangeCallback:this.onAnnotationScaleChangeCallback,onAnnotationEnterCallback:this.onAnnotationEnterCallback,onAnnotationLeaveCallback:this.onAnnotationLeaveCallback,draftAnnotationVersion:this.state.draftAnnotationVersion})))},t.defaultProps={scaleFactor:1},t})(i.default.Component);t.AnnotationCreationLayer=d}),define("modules/clean/react/previews/pdf_viewer/annotation_view_layer",["require","exports","tslib","jquery","react","external/classnames","external/react-dom","external/lodash","modules/clean/annotations/annotation","modules/clean/annotations/annotation_highlight_ui","modules/clean/annotations/annotation_region_ui","modules/clean/react/previews/pdf_viewer/transform","modules/clean/react/previews/pdf_viewer/event_emitter","modules/clean/react/css","modules/clean/react/comments2/position_utils"],function(e,t,n,o,r,i,a,s,l,d,c,p,u,f,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),r=n.__importDefault(r),i=n.__importDefault(i),a=n.__importStar(a),s=n.__importStar(s),d=n.__importDefault(d),c=n.__importDefault(c);var m=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderedAnnotations={},t.state={},t.onClick=function(e){t.props.frameMessenger.postMessageToParent("annotation-ui-click",{rankedActivityKeys:t.getRankedActivityKeysFromMouseEvent(e)})},t.onAnnotationClickCallback=function(e){t.props.frameMessenger.postMessageToParent("annotation-ui-click",{annotation:e.annotation,commentActivity:e.commentActivity})},t.onAnnotationEnterCallback=function(e){t.props.frameMessenger.postMessageToParent("annotation-ui-enter",{annotation:e.annotation,commentActivity:e.commentActivity})},t.onAnnotationLeaveCallback=function(e,n){if(t.props.useOverlappingHover)return void t.updateHoverOnMouseEvent(n);t.props.frameMessenger.postMessageToParent("annotation-ui-leave",{annotation:e.annotation,commentActivity:e.commentActivity})},t.clearCachedAnnotationClientRects=function(){t.getBoundingClientRectForActivityKey.cache.clear()},t.getBoundingClientRectForActivityKey=s.memoize(function(e){var n=t.renderedAnnotations[e];if(!n)throw new Error("no annotation for activityKey: "+e);return g.getBoundingClientRectOfRects(Array.from(n.children).map(function(e){return e.getBoundingClientRect()}))}),t.updateHoverOnMouseEvent=function(e){e.persist(),t.updateHoverOnMouseEventThrottled(e)},t.updateHoverOnMouseEventThrottled=s.throttle(function(e){var n=t.getRankedActivityKeysFromMouseEvent(e);if(!n.length)return void t.props.frameMessenger.postMessageToParent("annotation-ui-leave",{});var o=n[0];t.props.frameMessenger.postMessageToParent("annotation-ui-enter",{commentActivity:{activity_key:o}})},150),t.onScroll=function(){t.clearCachedAnnotationClientRects()},t.onFocusAnnotation=function(e){var n=e.id;t.setState({focusedAnnotationId:n})},t.onHoverAnnotation=function(e){var n=e.id;t.setState({emphasizedAnnotationId:n})},t.onHighlightAnnotation=function(e){var n=e.activity_key,r=t.renderedAnnotations[n];if(r){var i=!1;if(!t.isElementVisible(n)){i=!0;var a=o.default(".page-container"),s=o.default(r.firstChild);a.animate({scrollTop:a.scrollTop()+s.offset().top-300+"px"},300)}r.classList.remove("start-highlight-animation"),r.classList.remove("start-highlight-animation--delay"),requestAnimationFrame(function(){r.classList.add("start-highlight-animation"),i&&r.classList.add("start-highlight-animation--delay")})}},t}return n.__extends(t,e),t.prototype.componentDidMount=function(){u.eventEmitter.on("highlight-annotation",this.onHighlightAnnotation),u.eventEmitter.on("focus-annotation",this.onFocusAnnotation),u.eventEmitter.on("hover-annotation",this.onHoverAnnotation),u.eventEmitter.on("scroll",this.onScroll),u.eventEmitter.on("zoom-in",this.clearCachedAnnotationClientRects),u.eventEmitter.on("zoom-out",this.clearCachedAnnotationClientRects),window.addEventListener("resize",this.clearCachedAnnotationClientRects),this.addEventListeners(this.props.pageEl)},t.prototype.componentDidUpdate=function(e){var t=this.props,n=t.pageEl,o=t.useOverlappingHover;e.pageEl===n&&o===e.useOverlappingHover||(this.removeEventListeners(e.pageEl),this.addEventListeners(n)),this.props.annotations.length!==e.annotations.length&&this.clearCachedAnnotationClientRects()},t.prototype.componentWillUnmount=function(){u.eventEmitter.off("highlight-annotation",this.onHighlightAnnotation),u.eventEmitter.off("focus-annotation",this.onFocusAnnotation),u.eventEmitter.off("hover-annotation",this.onHoverAnnotation),u.eventEmitter.off("scroll",this.onScroll),u.eventEmitter.off("zoom-in",this.clearCachedAnnotationClientRects),u.eventEmitter.off("zoom-out",this.clearCachedAnnotationClientRects),window.removeEventListener("resize",this.clearCachedAnnotationClientRects),this.removeEventListeners(this.props.pageEl),this.renderedAnnotations={}},t.prototype.addEventListeners=function(e){this.props.useOverlappingHover&&e&&(e.addEventListener("mousemove",this.updateHoverOnMouseEventThrottled),e.addEventListener("click",this.onClick))},t.prototype.removeEventListeners=function(e){e&&(e.removeEventListener("mousemove",this.updateHoverOnMouseEventThrottled),e.removeEventListener("click",this.onClick))},t.prototype.isElementVisible=function(e){var t=this.renderedAnnotations[e];if(!t)return!1;var n=o.default(".page-container"),r=o.default(t.firstChild),i=r.offset().top;return 0<i&&i<n.height()},t.prototype.getRankedActivityKeysFromMouseEvent=function(e){var t=this,n=s.mapValues(this.renderedAnnotations,function(e,n){return t.getBoundingClientRectForActivityKey(n)});return g.getRankedElementsForMousePosition(e,n,200)},t.prototype.render=function(){var e=this,t=null;this.props.annotations&&(t=this.props.annotations.map(function(t,o){var i=l.Annotation.createAnnotationFromDict(t.annotation);i.viewportCoordinates=p.transformPdfCoordinates(0,e.props.height,t.annotation.pdf_coordinates);var s=t.commentActivity.activity_key,u=e.props.useOverlappingHover?{}:{onAnnotationEnterCallback:e.onAnnotationEnterCallback,onAnnotationClickCallback:e.onAnnotationClickCallback},f=n.__assign({key:s,annotation:i,isEmphasized:e.state.focusedAnnotationId===s||e.state.emphasizedAnnotationId===s,scaleFactor:e.props.scaleFactor||1,commentActivity:t.commentActivity,options:t.options,ref:function(n){n&&(e.renderedAnnotations[t.commentActivity.activity_key]=a.findDOMNode(n))},onAnnotationLeaveCallback:e.onAnnotationLeaveCallback},u);return i.type===l.AnnotationTypes.HIGHLIGHT?r.default.createElement(d.default,n.__assign({},f)):i.type===l.AnnotationTypes.REGION?r.default.createElement(c.default,n.__assign({},f)):null}));var o=i.default({"db-annotation-layer":!0,"db-annotation-view-layer":!0,"annotation-is-emphasized":!!this.state.emphasizedAnnotationId||!!this.state.focusedAnnotationId});return r.default.createElement("div",{className:o},t)},t.defaultProps={scaleFactor:1},t})(r.default.PureComponent),h=["/static/css/comments_annotations-vflGPe3Jj.css"],v=f.requireCssWithComponent(m,h);t.AnnotationViewLayer=v}),define("modules/clean/react/previews/pdf_viewer/async_print_modal",["require","exports","tslib","modules/clean/react/async/loadable","modules/clean/web_timing_logger"],function(e,t,n,o,r){"use strict";var i=this;Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncPrintModal=o.Loadable({loader:function(){return n.__awaiter(i,void 0,void 0,function(){var t;return n.__generator(this,function(o){switch(o.label){case 0:return[4,r.waitForTTI()];case 1:return o.sent(),[4,new Promise(function(t,n){e(["modules/clean/react/previews/pdf_viewer/print_modal"],t,n)}).then(n.__importStar)];case 2:return t=o.sent().PrintModal,[2,t]}})})}})}),define("modules/clean/react/previews/pdf_viewer/continuous_page",["require","exports","tslib","external/classnames","react","external/lodash","modules/core/browser_detection","modules/clean/react/previews/pdf_viewer/utils","modules/clean/react/previews/pdf_viewer/zoom","modules/clean/react/previews/pdf_viewer/event_emitter","modules/clean/react/previews/pdf_viewer/page"],function(e,t,n,o,r,i,a,s,l,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),r=n.__importDefault(r),i=n.__importStar(i),a=n.__importStar(a);var p=(function(e){function t(t){var n=e.call(this,t)||this;n.pageContainerRef=function(e){return n.pageContainerDOM=e},n.debouncedUpdateTextLayerPageIndex=n.props.updateTextLayerPageIndex?i.debounce(n.props.updateTextLayerPageIndex,200):null,n.onScrollTopChange=function(e){if(void 0===e&&(e=function(e){}),n.props.metadata){d.eventEmitter.emit("scroll"),n.props.annotationProps&&n.props.annotationProps.frameMessenger.postMessageToParent("scroll");for(var t=n.pageContainerDOM.scrollTop+n.pageContainerDOM.clientHeight/2,o=0,r=n.state.clientScaleFactor,i=0,a=n.props.metadata.dimensions;i<a.length;i++){var s=a[i],l=(s[0],s[1]),c=s[2],p=(l*r+16)*c;if(!(t>p)){o+=Math.floor((t+1)/(l*r+16));break}t-=p,o+=c}o!==n.props.currentPageIndex?n.props.onPageNumberUpdated(o,function(){return e(o)}):e(o)}},n.throttledOnScrollTopChange=i.throttle(n.onScrollTopChange,100),n.debouncedOnScrollTopChange=i.debounce(n.onScrollTopChange,200),n.maxScrollSpeed=100,n.onInternalLinkClick=function(e,t){t.preventDefault(),n.props.jumpToPage(e)},n.onScroll=function(){var e=n.checkScrollSpeed();if(Math.abs(e)>n.maxScrollSpeed)return void n.debouncedOnScrollTopChange();n.throttledOnScrollTopChange(),n.debouncedUpdateTextLayerPageIndex&&n.debouncedUpdateTextLayerPageIndex()},n.lastPos=null,n.checkScrollSpeed=function(){var e=0,t=n.pageContainerDOM.scrollTop;return null!==n.lastPos&&(e=t-n.lastPos),n.lastPos=t,e},n.scrollDown=function(){n.setScrollTop(n.pageContainerDOM.scrollTop+60)},n.scrollUp=function(){n.setScrollTop(n.pageContainerDOM.scrollTop-60)},n.zoomIn=function(){var e=Math.min(1.1*n.state.clientScaleFactor,10);n.setState({clientScaleFactor:e,fittingMode:l.FittingMode.NONE})},n.zoomOut=function(){var e=Math.max(n.state.clientScaleFactor/1.1,.1);n.setState({clientScaleFactor:e,fittingMode:l.FittingMode.NONE})};var o=l.FittingMode.FIT_TO_WIDTH,r=t.height&&t.width?l.computeClientScaleFactor(o,t.metadata.dimensions,t.height,t.width-32):1;return n.state={clientScaleFactor:r,fittingMode:o},n.isMobileOrTablet=a.is_mobile_or_tablet(),n.backwardBatchSize=n.isMobileOrTablet?1:3,n.forwardBatchSize=n.isMobileOrTablet?2:4,n}return n.__extends(t,e),t.prototype.setScrollTop=function(e,t){void 0===t&&(t=function(e){}),this.pageContainerDOM.scrollTop=e,this.onScrollTopChange(t),this.props.updateTextLayerPageIndex()},t.prototype.getStartPage=function(e){return Math.max(0,e-this.backwardBatchSize)},t.prototype.getEndPage=function(e){return Math.min(this.props.metadata.page_count,e+this.forwardBatchSize)},t.prototype.displayPage=function(e,t){if(void 0===t&&(t=function(e){}),!(e<0||e>=this.props.metadata.page_count)){for(var n=0,o=this.state.clientScaleFactor,r=0,i=this.props.metadata.dimensions;r<i.length;r++){var a=i[r],s=(a[0],a[1]),l=a[2];if(!(e>=l)){n+=(16+s*o)*e;break}n+=(16+s*o)*l,e-=l}this.setScrollTop(n,t)}},t.prototype.componentDidMount=function(){d.eventEmitter.on("zoom-in",this.zoomIn),d.eventEmitter.on("zoom-out",this.zoomOut)},t.prototype.componentWillReceiveProps=function(e){this.props.height===e.height&&this.props.width===e.width||!this.props.annotationProps||s.resetAnnotationState(this.props.annotationProps.frameMessenger,this.pageContainerDOM)},t.prototype.componentDidUpdate=function(e,t){var n=this;if(this.state.fittingMode!==l.FittingMode.NONE&&(e.height!==this.props.height||e.width!==this.props.width)){var o=l.computeClientScaleFactor(this.state.fittingMode,this.props.metadata.dimensions,this.props.height,this.props.width-32);this.setState({clientScaleFactor:o})}if(this.pageContainerDOM&&this.state.clientScaleFactor&&t.clientScaleFactor&&this.state.clientScaleFactor!==t.clientScaleFactor){var r=this.pageContainerDOM.scrollTop,i=this.pageContainerDOM.scrollLeft,a=16*(this.props.currentPageIndex+1),s=t.clientScaleFactor,c=this.state.clientScaleFactor/s;r>a&&(this.pageContainerDOM.scrollTop=(r-a)*c+a),i>16&&(this.pageContainerDOM.scrollLeft=(i-16)*c+16),this.maxScrollSpeed+=s/this.state.clientScaleFactor}if(e.currentPageIndex!==this.props.currentPageIndex&&this.props.shouldMoveToPage===!0&&this.displayPage(this.props.currentPageIndex,function(e){d.eventEmitter.emit("page-set-to",e,n.props.currentPageIndex),d.eventEmitter.emit("page-set")}),e.isFullscreen!==this.props.isFullscreen){var p=e.isFullscreen?l.FittingMode.FIT_TO_WIDTH:l.FittingMode.FIT_PAGE;this.setState({fittingMode:p})}},t.prototype.componentWillUnmount=function(){d.eventEmitter.off("zoom-in",this.zoomIn),d.eventEmitter.off("zoom-out",this.zoomOut)},t.prototype.render=function(){var e=this,t=this.props,n=t.annotationProps,l=t.onImageError,d=t.onPageRenderComplete,p=t.onPageImageLoad,u=t.formatMessage,f=[],g={},m={},h=this.getStartPage(this.props.currentPageIndex),v=this.getEndPage(this.props.currentPageIndex);f=i.range(h,v).map(function(t){return r.default.createElement(c.Page,{formatMessage:u,key:t,pageData:e.props.pages[t],imageUrlTmpl:e.props.imageUrlTmpl,useCanned:e.props.useCanned,clientScaleFactor:e.state.clientScaleFactor,loadImageOnly:e.isMobileOrTablet,annotationProps:s.annotationsAtPage(n,t),isFocusedPage:t===e.props.currentPageIndex,onRenderComplete:d,onImageLoad:p,onImageError:l,isMounted:e.props.isMounted,onInternalLinkClicked:e.onInternalLinkClick,comments2AnnotationsEnabled:e.props.comments2AnnotationsEnabled,onImageLayerMounted:e.props.onImageLayerMounted})});var b=this.props.pages.map(function(e){return e.dimension}),_=h>0?s.getTotalSize(b.slice(0,h),this.state.clientScaleFactor,16)[1]+16:0;return g={height:s.getTotalSize(b,this.state.clientScaleFactor,16)[1],margin:"auto"},m={top:_},r.default.createElement("div",{className:o.default("viewer-container__sizer","page-container","pdf-viewer__pages",{"ios-enable-inertial-scroll":a.iOS}),onScroll:this.onScroll,ref:this.pageContainerRef},r.default.createElement("div",{style:g},r.default.createElement("div",{className:"page-container-inner",style:m},f)))},t})(r.default.PureComponent);t.ContinuousPage=p}),define("modules/clean/react/previews/pdf_viewer/doc_viewer",["require","exports","tslib","external/classnames","external/lodash","react","modules/core/browser","modules/clean/react/previews/pdf_viewer/continuous_page","spectrum/dimensions","modules/clean/react/file_viewer/full_screen_helpers","modules/clean/react/previews/pdf_viewer/event_emitter","modules/clean/react/previews/pdf_viewer/keyboard_bindings","modules/clean/previews/util","modules/clean/react/file_viewer/sidebar_helpers","modules/clean/react/keyboard_binding/keyboard_binding_connector","modules/clean/react/async/loadable","modules/clean/react/previews/loading_indicator","modules/clean/react/previews/pdf_viewer/placeholder_image","modules/clean/react/previews/pdf_viewer/urls","modules/clean/react/previews/pdf_viewer/single_page","spectrum/snackbar","modules/clean/web_timing_logger","modules/clean/react/keyboard_binding/keyboard_binding","external/react-redux","modules/core/i18n","modules/clean/react/file_viewer/constants","modules/clean/react/previews/constants","modules/clean/react/previews/pdf_viewer/utils","modules/clean/react/comments2/data/selectors","modules/clean/react/previews/pdf_viewer/zoom","file-viewer/preview_pdf","file-viewer/strings","file-viewer/i18n","esignature/public/gated_esignature_field_flag_group"],function(e,t,n,o,r,i,a,s,l,d,c,p,u,f,g,m,h,v,b,_,w,P,y,E,M,S,A,L,T,x,C,I,F,D){"use strict";var N=this;Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),r=n.__importStar(r),i=n.__importDefault(i),a=n.__importStar(a);var O=F.createFormatters("en",I.strings,F.createI18nCache()).formatMessage,R=m.Loadable({loader:function(){return n.__awaiter(N,void 0,void 0,function(){var t;return n.__generator(this,function(o){switch(o.label){case 0:return[4,P.waitForTTI()];case 1:return o.sent(),[4,new Promise(function(t,n){e(["modules/clean/react/previews/pdf_viewer/print_modal"],t,n)}).then(n.__importStar)];case 2:return t=o.sent().PrintModal,[2,t]}})})}}),k=(function(e){function t(t){var n=e.call(this,t)||this;return n.iframeRef=function(e){e&&e.contentWindow&&(e.contentWindow.addEventListener("load",n.onResize),e.contentWindow.addEventListener("resize",n.onResize))},n.containerRef=function(e){return n.containerDOM=e},n.continuousPageRef=function(e){return n.continuousPage=e},n.singlePageRef=function(e){return n.singlePage=e},n.docType=u.isPptExtension(n.props.fileExtension)?S.DocType.ppt:S.DocType.pdf,n.onResize=function(){n.props.metadata&&n.props.annotationProps&&L.resetAnnotationState(n.props.annotationProps.frameMessenger,n.containerDOM)},n.enterFullscreen=function(){n.props.isFullscreen||d.enterFullScreen(S.UserActionContext.Keyboard)},n.onToolbarMounted=function(){"function"==typeof n.props.onToolbarMounted&&n.props.onToolbarMounted(n.state.currentPageIndex)},n.setPage=function(e,t){void 0===t&&(t=function(){}),n.props.metadata&&(e<0||e>=n.props.metadata.page_count||("function"==typeof n.props.onPageChange&&n.props.onPageChange(e),n.setState({currentPageIndex:e},t)))},n.jumpToPage=function(e,t){void 0===t&&(t=function(){}),n.setState({shouldMoveToPage:!0}),n.setPage(e,t)},n.shouldNotMoveToPage=function(){n.setState({shouldMoveToPage:!1})},n.setTextLayerPageIndex=function(){n.setState({textLayerPageIndex:n.state.currentPageIndex})},n.onPageRenderComplete=function(){n.props.onPageRenderComplete&&n.props.onPageRenderComplete(),n.setState({pageRendered:!0})},n.onFirstPageError=function(){n.setState({firstPageFailed:!0})},n.onError=function(e){n.setState({error:e})},n.onImageError=function(){n.setState({error:M._("Some pages failed to load")})},n.onReload=function(){a.reload(!0)},n.onDismissError=function(){n.setState({error:void 0})},n.pageDown=function(){n.jumpToPage(n.state.currentPageIndex+1)},n.pageUp=function(){n.jumpToPage(n.state.currentPageIndex-1)},n.scrollDown=function(){n.continuousPage||n.pageDown(),n.continuousPage.scrollDown()},n.scrollUp=function(){n.continuousPage||n.pageUp(),n.continuousPage.scrollUp()},n.zoomIn=function(){n.continuousPage&&n.continuousPage.zoomIn(),n.singlePage&&n.singlePage.zoomIn()},n.zoomOut=function(){n.continuousPage&&n.continuousPage.zoomOut(),n.singlePage&&n.singlePage.zoomOut()},n.print=function(){c.eventEmitter.emit("print",{context:S.UserActionContext.Keyboard})},n.onPageUp=y.withPreventDefault(n.pageUp),n.onPageDown=y.withPreventDefault(n.pageDown),n.onScrollUp=y.withPreventDefault(n.scrollUp),n.onScrollDown=y.withPreventDefault(n.scrollDown),n.onEnterFullscreen=y.withPreventDefault(n.enterFullscreen),n.onZoomIn=y.withPreventDefault(n.zoomIn),n.onZoomOut=y.withPreventDefault(n.zoomOut),n.onPrintKeyPressed=y.withPreventDefault(n.print),n.docFullScreenKeyboardBindings=n.docType===S.DocType.pdf?p.getContinuousPageKeyboardBindings(!0,n.onScrollUp,n.onScrollDown,n.onPageUp,n.onPageDown,n.onEnterFullscreen,n.onZoomIn,n.onZoomOut,n.onPrintKeyPressed):p.getSinglePageKeyboardBindings(!0,n.onPageUp,n.onPageDown,n.onEnterFullscreen,n.onZoomIn,n.onZoomOut,n.onPrintKeyPressed),n.docSidebarFocusedKeyboardBindings=n.docType===S.DocType.pdf?p.getContinuousPageKeyboardBindings(!1,n.pageUp,n.onPageDown,n.onPageUp,n.onPageDown,n.onEnterFullscreen,n.onZoomIn,n.onZoomOut,n.onPrintKeyPressed):p.getSinglePageKeyboardBindings(!1,n.onPageUp,n.onPageDown,n.onEnterFullscreen,n.onZoomIn,n.onZoomOut,n.onPrintKeyPressed),n.docKeyboardBindings=n.docType===S.DocType.pdf?p.getContinuousPageKeyboardBindings(!1,n.onScrollUp,n.onScrollDown,n.onPageUp,n.onPageDown,n.onEnterFullscreen,n.onZoomIn,n.onZoomOut,n.onPrintKeyPressed):p.getSinglePageKeyboardBindings(!1,n.onPageUp,n.onPageDown,n.onEnterFullscreen,n.onZoomIn,n.onZoomOut,n.onPrintKeyPressed),n.getDocKeyboardBindings=function(e,t){return e?n.docFullScreenKeyboardBindings:t?n.docSidebarFocusedKeyboardBindings:n.docKeyboardBindings},n.handleSidebarClick=function(e){n.jumpToPage(e),n.focusSidebar()},n.focusSidebar=function(){n.setState({isSidebarFocused:!0})},n.unfocusSidebar=function(){n.setState({isSidebarFocused:!1})},n.renderBadge=function(e,t){return[i.default.createElement(D.GatedFieldFlagGroup,{page:e,maxHeight:t})]},n.state={fittingMode:n.props.isFullscreen?x.fullscreenFittingMode():u.isPptExtension(t.fileExtension)?x.FittingMode.FIT_PAGE:x.FittingMode.FIT_TO_WIDTH,currentPageIndex:0,shouldMoveToPage:!1,textLayerPageIndex:0,isSidebarFocused:!1},n}return n.__extends(t,e),t.prototype.isSidebarOpen=function(e,t){void 0===t&&(t=this.props);var n=t.isSidebarOpen,o=t.sizeClass,r=t.isFullscreen;return f.isSidebarEnabled(e,o,!!r)&&(n||{})[e]},t.prototype.componentDidMount=function(){c.eventEmitter.on("page-down",this.pageDown),c.eventEmitter.on("page-up",this.pageUp),c.eventEmitter.on("set-current-page",this.jumpToPage),c.eventEmitter.on("page-set",this.shouldNotMoveToPage),c.eventEmitter.on("error",this.onError),c.eventEmitter.on("toolbar-mounted",this.onToolbarMounted);var e=this.props,t=e.metadata,n=e.startPage;t&&n&&n>=0&&n<t.page_count&&this.jumpToPage(n)},t.prototype.componentWillUnmount=function(){c.eventEmitter.off("page-down",this.pageDown),c.eventEmitter.off("page-up",this.pageUp),c.eventEmitter.off("set-current-page",this.jumpToPage),c.eventEmitter.off("page-set",this.shouldNotMoveToPage),c.eventEmitter.off("error",this.onError),c.eventEmitter.off("toolbar-mounted",this.onToolbarMounted)},t.prototype.componentWillReceiveProps=function(e){var t=this.state.fittingMode;this.props.isFullscreen!==e.isFullscreen&&(t=e.isFullscreen?x.fullscreenFittingMode():u.isPptExtension(e.fileExtension)?x.FittingMode.FIT_PAGE:x.FittingMode.FIT_TO_WIDTH,this.setState({fittingMode:t})),this.props.fileExtension!==e.fileExtension&&(this.docType=u.isPptExtension(e.fileExtension)?S.DocType.ppt:S.DocType.pdf)},t.prototype.componentDidUpdate=function(e){var t=this.props,n=t.activatedAnnotationRectangle,o=t.metadata,r=t.startPage;if(n&&e.activatedAnnotationRectangle!==n)return void this.jumpToPage(n.page);!e.metadata&&o&&r&&r>=0&&r<o.page_count&&this.jumpToPage(r)},t.prototype.renderErrorSnackbar=function(){if(!this.state.error)return null;var e={"pdf-snackbar":!0,"pdf-snackbar__toolbar-visible":this.props.isToolbarVisible};return i.default.createElement(w.Snackbar,{className:o.default(e),title:this.state.error,variant:"fail",disablePositioningAndBackdrop:!0},i.default.createElement(w.SnackbarAction,{onClick:this.onReload},"Reload"),i.default.createElement(w.SnackbarAction,{onClick:this.onDismissError},"Close"))},t.prototype.renderViewer=function(e,t){var o=this.props.links||{},a=this.props,l=a.annotationProps,d=a.comments2AnnotationsEnabled,c=a.isFullscreen,p=a.metadata,u=a.text,f=a.imageUrlTmpl,g=a.useCanned;if(p&&u&&p.page_count>0){var m={height:e,width:t,comments2AnnotationsEnabled:d,currentPageIndex:this.state.currentPageIndex,imageUrlTmpl:f,useCanned:g,annotationProps:l,metadata:p,onImageError:this.onImageError,isFullscreen:c,onPageImageLoad:this.props.onPageImageLoad,onPageRenderComplete:this.onPageRenderComplete,onPageNumberUpdated:this.setPage,onImageLayerMounted:this.props.onImageLayerMounted},h=L.expandDimensions(p.dimensions),v=r.range(0,p.page_count).map(function(e){return{pageIndex:e,dimension:h[e],textboxes:u[e],links:o[e]||[],thumbnailUrl:b.imageUrl(f,e,Math.ceil(200*C.SIDEBAR_THUMBNAIL_WIDTH/h[e][0]),g)}});return this.docType===S.DocType.ppt&&_.deviceSupported()?i.default.createElement(_.SinglePage,n.__assign({},m,{formatMessage:O,pages:v,ref:this.singlePageRef})):i.default.createElement(s.ContinuousPage,n.__assign({},m,{formatMessage:O,pages:v,shouldMoveToPage:this.state.shouldMoveToPage,textLayerPage:this.state.textLayerPageIndex,updateTextLayerPageIndex:this.setTextLayerPageIndex,comments2AnnotationsEnabled:this.props.comments2AnnotationsEnabled,isMounted:this.props.filePreviewSession&&(this.props.filePreviewSession.sourceContext===A.PreviewSourceContext.Home||this.props.filePreviewSession.sourceContext===A.PreviewSourceContext.Browse),jumpToPage:this.jumpToPage,ref:this.continuousPageRef}))}return null},t.prototype.renderSidebar=function(){var e=this,t=this.isSidebarOpen(this.docType),n=this.props.metadata;if(n){var a=L.expandDimensions(n.dimensions),s=r.range(0,n.page_count).map(function(t){return{dimension:a[t],thumbnailUrl:b.imageUrl(e.props.imageUrlTmpl,t,Math.ceil(200*C.SIDEBAR_THUMBNAIL_WIDTH/a[t][0]),e.props.useCanned),renderBadge:e.renderBadge}});return i.default.createElement(C.Sidebar,{className:o.default("fv-sidebar",{open:t}),currentPageIndex:this.state.currentPageIndex,pages:s,formatMessage:O,isFocused:this.state.isSidebarFocused,onPageChange:this.handleSidebarClick,onFocus:this.focusSidebar,onBlur:this.unfocusSidebar})}return null},t.prototype.renderCloseFullscreenButton=function(){return this.props.isFullscreen?i.default.createElement("div",{className:"close-x"},i.default.createElement("button",{onClick:this.props.onExitFullscreen,className:"close-x-button","aria-label":M._("Close")},"")):null},t.prototype.renderPlaceholder=function(){var e=this.props.placeholderImageUrl;return this.state.pageRendered||!e||this.state.firstPageFailed?null:i.default.createElement(v.PlaceholderImage,{url:e,addLeftMargin:u.isPptExtension(this.props.fileExtension),onError:this.onFirstPageError})},t.prototype.render=function(){var e=this,t=this.renderSidebar(),n=this.renderCloseFullscreenButton(),r={"viewer-container":!0,"sidebar-visible":this.isSidebarOpen(this.docType)},a=this.renderPlaceholder(),s=this.state.pageRendered?null:i.default.createElement(h.LoadingIndicator,{className:"loading-indicator"}),d=this.props.metadata&&this.props.printProps?i.default.createElement(R,{imageUrlTmpl:this.props.imageUrlTmpl,useCanned:this.props.useCanned,metadata:this.props.metadata,printProps:this.props.printProps}):null,c=i.default.createElement("iframe",{"aria-hidden":"true",ref:this.iframeRef,style:{position:"absolute",left:0,bottom:0,top:0,width:"100%",zIndex:-1e3,opacity:0}});return i.default.createElement("div",{className:o.default(r)},s,a,c,n,i.default.createElement("div",{className:o.default("pdf-viewer",{fullscreen:this.props.isFullscreen}),style:{visibility:this.state.pageRendered?"visible":"hidden"},ref:this.containerRef},i.default.createElement(g.KeyboardBindingConnector,{keyboardBindings:this.getDocKeyboardBindings(!!this.props.isFullscreen,this.state.isSidebarFocused)}),t,i.default.createElement(l.Dimensions,{className:"flex-preview-container"},function(t){var n=t.width,o=t.height;return e.renderViewer(o,n)})),this.renderErrorSnackbar(),d)},t})(i.default.PureComponent);t._DocViewer=k;var B=function(e){return{activatedAnnotationRectangle:T.getActivatedDocumentAnnotationRectangleIfComments2Ready(e)}},U=E.connect(B)(k);t.DocViewer=U}),define("modules/clean/react/previews/pdf_viewer/event_emitter",["require","exports","tslib","external/eventemitter3"],function(e,t,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),t.eventEmitter=new o.default}),define("modules/clean/react/previews/pdf_viewer/font",["require","exports"],function(e,t){"use strict";function n(e){var t=e.n.lastIndexOf(",");return{fontFamily:'"'+(t>-1?e.n.substr(0,t):e.n)+'", '+(1&e.f?"monospace":"serif"),isBold:(e.f&1<<18)>0,isItalic:(64&e.f)>0}}Object.defineProperty(t,"__esModule",{value:!0});t.renderFont=n}),define("modules/clean/react/previews/pdf_viewer/frame_messenger_shims",["require","exports","tslib","external/eventemitter3","modules/clean/frame_messenger/frame_messenger_client","modules/clean/frame_messenger/frame_messenger_host"],function(e,t,n,o,r,i){"use strict";function a(){return{parentEmitter:new o.default,childEmitter:new o.default}}Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o);t.makeChannel=a;var s=(function(e){function t(t){var n=e.call(this,[])||this;return n.eventListener=function(e){n.validActions.indexOf(e.action)>-1&&n.handler(e)},n.channel=t,n}return n.__extends(t,e),t.prototype.configureChildMessaging=function(e,t,n){this.handler=t,this.validActions=n},t.prototype.startListening=function(){this.channel.childEmitter.on("message",this.eventListener)},t.prototype.stopListening=function(){this.channel.childEmitter.off("message",this.eventListener)},t.prototype.postMessageToChildren=function(e,t){void 0===t&&(t={}),this.channel.parentEmitter.emit("message",{action:e,parameters:t})},t})(i.FrameMessengerHost);t.FrameMessengerHostShim=s;var l=(function(e){function t(t){var n=e.call(this,[])||this;return n.eventListener=function(e){n.validActions.indexOf(e.action)>-1&&n.handler(e)},n.channel=t,n}return n.__extends(t,e),t.prototype.configureParentMessaging=function(e,t,n){void 0===n&&(n=null),this.validActions=t,this.handler=e},t.prototype.postMessageToParent=function(e,t){void 0===t&&(t={}),this.channel.childEmitter.emit("message",{action:e,parameters:t})},t.prototype.startListening=function(){this.channel.parentEmitter.on("message",this.eventListener)},t.prototype.stopListening=function(){this.channel.parentEmitter.off("message",this.eventListener)},t})(r.FrameMessengerClient);t.FrameMessengerClientShim=l}),define("modules/clean/react/previews/pdf_viewer/keyboard_bindings",["require","exports","modules/clean/react/keyboard_binding/keyboard_binding","modules/clean/keycode"],function(e,t,n,o){"use strict";function r(e,r,i,a,s,l,d){var c=n.hydrateKeyboardBinding({keyboardEventCriteria:{which:o.KeyCode.F},callback:a});return t.getPageUpPageDownKeyboardBindings(r,i).concat(t.getUpDownKeyboardBindings(r,i),t.getLeftRightKeyboardBindings(r,i),[c],n.getEqualsKeyBindings(s),n.getMinusKeyBindings(l),n.getPrintKeyBindings(d))}function i(e,r,i,a,s,l,d,c,p){var u=e?t.getUpDownKeyboardBindings(a,s):t.getUpDownKeyboardBindings(r,i),f=n.hydrateKeyboardBinding({keyboardEventCriteria:{altKey:!0,which:o.KeyCode.UP},callback:a}),g=n.hydrateKeyboardBinding({keyboardEventCriteria:{altKey:!0,which:o.KeyCode.DOWN},callback:s}),m=e?t.getLeftRightKeyboardBindings(a,s).slice():[],h=n.hydrateKeyboardBinding({keyboardEventCriteria:{which:o.KeyCode.F},callback:l});return u.concat([f,g],t.getPageUpPageDownKeyboardBindings(a,s),m,[h],n.getEqualsKeyBindings(d),n.getMinusKeyBindings(c),n.getPrintKeyBindings(p))}Object.defineProperty(t,"__esModule",{value:!0}),t.getLeftRightKeyboardBindings=function(e,t){
return[n.hydrateKeyboardBinding({keyboardEventCriteria:{which:o.KeyCode.LEFT},callback:e}),n.hydrateKeyboardBinding({keyboardEventCriteria:{which:o.KeyCode.RIGHT},callback:t})]},t.getUpDownKeyboardBindings=function(e,t){return[n.hydrateKeyboardBinding({keyboardEventCriteria:{which:o.KeyCode.UP},callback:e}),n.hydrateKeyboardBinding({keyboardEventCriteria:{which:o.KeyCode.DOWN},callback:t})]},t.getPageUpPageDownKeyboardBindings=function(e,t){return[n.hydrateKeyboardBinding({keyboardEventCriteria:{which:o.KeyCode.PAGE_UP},callback:e}),n.hydrateKeyboardBinding({keyboardEventCriteria:{which:o.KeyCode.PAGE_DOWN},callback:t})]},t.getSinglePageKeyboardBindings=r,t.getContinuousPageKeyboardBindings=i}),define("modules/clean/react/previews/pdf_viewer/page",["require","exports","tslib","esignature/public/gated_esignature_layer","external/classnames","react","modules/clean/react/previews/pdf_viewer/annotation_creation_layer","modules/clean/react/previews/pdf_viewer/event_emitter","file-viewer/preview_pdf","modules/clean/react/comments2/components/annotations/loadable","modules/clean/react/comments2/data/types","modules/clean/react/previews/pdf_viewer/annotation_view_layer","modules/clean/react/previews/pdf_viewer/urls","modules/clean/react/previews/pdf_viewer/zoom","modules/clean/referrer_cleansing_redirect"],function(e,t,n,o,r,i,a,s,l,d,c,p,u,f,g){"use strict";function m(e){return!(!e||!e.ur)}function h(e){return void 0===e&&(e=[]),e.map(function(e){return e.a&&m(e.a)&&!e.a.ur.startsWith("mailto:")?n.__assign({},e,{a:n.__assign({},e.a,{ur:g.get_redirect_uri(l.normalizeUrl(e.a.ur)).toString()})}):e})}Object.defineProperty(t,"__esModule",{value:!0}),r=n.__importDefault(r),i=n.__importDefault(i),g=n.__importStar(g);var v=(function(e){function t(t){var n=e.call(this,t)||this;return n.imageLoaded=!1,n.textRendered=!1,n.onPageRef=function(e){return n.pageEl=e},n.onMouseDown=function(e){e.persist(),n.updateOffset(),n.annotationCreationDelegate.onMouseDownCallback(e)},n.onMouseMove=function(e){e.persist(),n.annotationCreationDelegate.onMouseMoveCallback(e)},n.onMouseUp=function(e){e.persist(),n.annotationCreationDelegate.onMouseUpCallback(e)},n.onMouseEnter=function(e){e.persist(),n.annotationCreationDelegate.onMouseEnterCallback(e)},n.updateOffset=function(){if(n.pageEl){var e=n.pageEl.getBoundingClientRect(),t=document.body,o=document.documentElement,r=window.pageYOffset||o.scrollTop||t.scrollTop,i=window.pageXOffset||o.scrollLeft||t.scrollLeft,a=o.clientTop||t.clientTop||0,s=o.clientLeft||t.clientLeft||0,l=e.top+r-a,d=e.left+i-s,c=e.right-e.left,p=e.bottom-e.top;n.setState({offset:{top:l,left:d,bottom:l+p,right:d+c}})}},n.onScroll=function(){n.updateOffset(),n.annotationCreationDelegate.onScrollCallback()},n.onImageLoaded=function(){n.imageLoaded||(n.imageLoaded=!0,n.props.onImageLoad&&n.props.onImageLoad(),n.onTimingEventCompleted())},n.onImageError=function(){n.props.onImageError&&n.props.onImageError(n.props.pageData.pageIndex)},n.onTextRendered=function(){n.textRendered||(n.textRendered=!0,n.onTimingEventCompleted())},n.shouldMarkTimingEventCompleted=function(){return n.imageLoaded&&(n.props.loadImageOnly||n.textRendered)},n.onTimingEventCompleted=function(){n.shouldMarkTimingEventCompleted()&&n.props.onRenderComplete&&n.props.onRenderComplete(),n.updateOffset()},n.onInternalLinkClick=function(e,t){n.props.onInternalLinkClicked&&n.props.onInternalLinkClicked(e,t)},n.state={},n.annotationCreationDelegate={onMouseDownCallback:function(e){},onMouseMoveCallback:function(e){},onMouseUpCallback:function(e){},onMouseEnterCallback:function(){},onScrollCallback:function(){}},n}return n.__extends(t,e),t.prototype.componentDidMount=function(){s.eventEmitter.on("scroll",this.onScroll),this.updateOffset()},t.prototype.componentWillUnmount=function(){s.eventEmitter.off("scroll",this.onScroll)},t.prototype.componentWillUpdate=function(e,t){this.props.pageData.pageIndex!==e.pageData.pageIndex&&(this.imageLoaded=!1,this.textRendered=!1)},t.prototype.render=function(){var e=null,t=null,n=null,s=null,g=this.props.pageData.pageIndex+1,m="pageContainer"+g,v="pageImage"+g,b=f.calculatedFetchedScaleFactor(this.props.clientScaleFactor,{originalWidth:this.props.pageData.dimension[0],originalHeight:this.props.pageData.dimension[1]}),_=i.default.createElement(l.ImgLayer,{className:"page-image-wrapper",key:v,src:u.imageUrl(this.props.imageUrlTmpl,this.props.pageData.pageIndex,100*b,this.props.useCanned),onLoad:this.onImageLoaded,onError:this.onImageError,onComponentDidMount:this.props.onImageLayerMounted});this.props.loadImageOnly||(e=i.default.createElement(l.TextLayer,{width:this.props.pageData.dimension[0],height:this.props.pageData.dimension[1],textboxes:this.props.pageData.textboxes||[],clientScaleFactor:this.props.clientScaleFactor,onRender:this.onTextRendered}),t=i.default.createElement(l.LinksLayer,{width:this.props.pageData.dimension[0],height:this.props.pageData.dimension[1],links:h(this.props.pageData.links||[]),formatMessage:this.props.formatMessage,clientScaleFactor:this.props.clientScaleFactor,onInternalLinkClicked:this.onInternalLinkClick}));var w=this.props,P=w.annotationProps,y=w.comments2AnnotationsEnabled,E=!1,M=y===c.Comments2AnnotationsMode.LegacyComponents,S=y===c.Comments2AnnotationsMode.SpectrumComponents;P&&!S&&(n=i.default.createElement(p.AnnotationViewLayer,{annotations:P.annotations||[],page:g,width:this.props.pageData.dimension[0],height:this.props.pageData.dimension[1],scaleFactor:this.props.clientScaleFactor,frameMessenger:P.frameMessenger,useOverlappingHover:M,pageEl:this.pageEl}),E=P.isAnnotationCreationEnabled,E&&(s=i.default.createElement(a.AnnotationCreationLayer,{pageNumber:g,width:this.props.pageData.dimension[0],height:this.props.pageData.dimension[1],scaleFactor:this.props.clientScaleFactor,parentOffset:this.state.offset,delegate:this.annotationCreationDelegate,frameMessenger:P.frameMessenger,isAnnotationCreationEnabled:E,isAnnotationHighlightEnabled:P.isAnnotationHighlightEnabled,isAnnotationRegionEnabled:P.isAnnotationRegionEnabled,disableTinyAnnotationRegions:M,isFocusedPage:this.props.isFocusedPage})));var A=i.default.createElement("div",{className:"c-loader"}),L={width:this.props.pageData.dimension[0]*this.props.clientScaleFactor,height:this.props.pageData.dimension[1]*this.props.clientScaleFactor},T=E&&P&&P.isAnnotationRegionEnabled,x=r.default("page",{"comments2-annotation-enabled":M,"comments2-annotation-regions-enabled":T});return i.default.createElement("div",{id:m,className:x,ref:this.onPageRef,"data-page-number":g,style:L,onMouseDown:this.onMouseDown,onMouseMove:this.onMouseMove,onMouseUp:this.onMouseUp,onMouseEnter:this.onMouseEnter},A,s,n,_,!S&&e,!S&&t,i.default.createElement(o.GatedEsignatureLayer,{pageNumber:this.props.pageData.pageIndex,width:this.props.pageData.dimension[0],height:this.props.pageData.dimension[1],scaleFactor:this.props.clientScaleFactor,offset:this.state.offset}),E&&M&&i.default.createElement(d.Comments2AnnotationOverlay,{actAsAbsoluteContainer:!1,containerEl:this.pageEl,pageIndex:this.props.pageData.pageIndex,isAnnotationRegionEnabled:T,renderAsEmpty:!1}),S&&i.default.createElement(d.AnnotationViewLayer,{page:g}),S&&i.default.createElement(d.AnnotationConductorLayer,{page:g,layerSize:L},e,t))},t})(i.default.PureComponent);t.Page=v}),define("modules/clean/react/previews/pdf_viewer/password_modal",["require","exports","tslib","external/classnames","react","modules/clean/react/input","spectrum/modal","modules/core/i18n"],function(e,t,n,o,r,i,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),r=n.__importDefault(r),i=n.__importStar(i);var l=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={password:""},t.onChange=function(e){t.setState({password:e.target.value})},t.onClickSubmit=function(){t.props.onSubmit(t.state.password)},t.onFormSubmit=function(e){e.preventDefault(),t.onClickSubmit()},t}return n.__extends(t,e),t.prototype.componentDidMount=function(){"function"==typeof this.props.onComponentDidMount&&this.props.onComponentDidMount()},t.prototype.getMessage=function(){return this.props.enteredWrongPassword?s._("The password you entered is incorrect, please try again."):s._("Enter the password to open this file.")},t.prototype.render=function(){var e=this.props,t=e.enteredWrongPassword,n=e.onDismiss,l=this.state.password,d=o.default("db-modal-message",{"wrong-password":t});return r.default.createElement(a.UtilityModal,{ariaLabel:"password-modal",className:"password-modal",title:s._("This file is password protected"),primaryAction:s._("Submit"),secondaryAction:s._("Cancel"),onPrimaryAction:this.onClickSubmit,onSecondaryAction:n,open:!0,overlayClassName:"file-viewer-modal-overlay"},r.default.createElement("form",{method:"post",onSubmit:this.onFormSubmit},r.default.createElement("div",{className:d},this.getMessage(),r.default.createElement(i.password,{value:l,placeholder:s._("Password"),onChange:this.onChange}),r.default.createElement("input",{type:"submit",style:{display:"none"}}))))},t.defaultProps={enteredWrongPassword:!1},t})(r.default.PureComponent);t.PasswordModal=l}),define("modules/clean/react/previews/pdf_viewer/single_page",["require","exports","tslib","react","external/lodash","modules/core/browser_detection","modules/clean/react/previews/pdf_viewer/utils","modules/clean/react/previews/pdf_viewer/zoom","modules/clean/react/previews/pdf_viewer/page","modules/clean/react/previews/pdf_viewer/event_emitter"],function(e,t,n,o,r,i,a,s,l,d){"use strict";function c(){return!i.is_mobile_or_tablet()}Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),r=n.__importStar(r);t.deviceSupported=c;var p=(function(e){function t(t){var n=e.call(this,t)||this;return n.zoomIn=function(){if(!n.props.isFullscreen){var e=Math.min(1.1*n.state.clientScaleFactor,10);n.setState({clientScaleFactor:e})}},n.zoomOut=function(){if(!n.props.isFullscreen){var e=Math.max(n.state.clientScaleFactor/1.1,.1);n.setState({clientScaleFactor:e})}},n.pageDown=function(){n.props.onPageNumberUpdated(n.props.currentPageIndex+1,function(){})},n.pageUp=function(){n.props.onPageNumberUpdated(n.props.currentPageIndex-1,function(){})},n.debouncedPageDown=r.debounce(n.pageDown,40,{leading:!0,trailing:!1}),n.debouncedPageUp=r.debounce(n.pageUp,40,{leading:!0,trailing:!1}),n.handleWheel=function(e){var t=n.fitClientScaleFactor;n.state.clientScaleFactor.toFixed(2)<=t.toFixed(2)&&(e.deltaY>0?n.debouncedPageDown():e.deltaY<0&&n.debouncedPageUp())},n.state={clientScaleFactor:n.fitClientScaleFactor,fittingMode:s.FittingMode.FIT_PAGE},n}return n.__extends(t,e),Object.defineProperty(t.prototype,"fitClientScaleFactor",{get:function(){return s.computeClientScaleFactor(s.FittingMode.FIT_PAGE,this.props.metadata.dimensions,this.props.height,this.props.width-32)},enumerable:!0,configurable:!0}),t.prototype.componentDidUpdate=function(e,t){if(e.height!==this.props.height||e.width!==this.props.width){var n=s.computeClientScaleFactor(this.state.fittingMode,this.props.metadata.dimensions,this.props.height,this.props.width-32);this.setState({clientScaleFactor:n})}},t.prototype.componentDidMount=function(){d.eventEmitter.on("zoom-in",this.zoomIn),d.eventEmitter.on("zoom-out",this.zoomOut)},t.prototype.componentWillUnmount=function(){d.eventEmitter.off("zoom-in",this.zoomIn),d.eventEmitter.off("zoom-out",this.zoomOut)},t.prototype.render=function(){var e=this.props,t=e.annotationProps,n=e.comments2AnnotationsEnabled,r=e.currentPageIndex,i=e.useCanned,s=e.imageUrlTmpl,d=e.pages,c=e.onPageRenderComplete,p=e.onPageImageLoad,u=e.formatMessage,f=this.props.pages[r].dimension,g=a.getTotalSize([f],this.state.clientScaleFactor,16)[1],m={height:g,margin:"auto"},h={top:0};return o.default.createElement("div",{className:"viewer-container__sizer single-page",onWheel:this.handleWheel},o.default.createElement("div",{style:m},o.default.createElement("div",{className:"page-container-inner",style:h},o.default.createElement(l.Page,{formatMessage:u,key:r,pageData:d[r],imageUrlTmpl:s,isFocusedPage:!0,useCanned:i,clientScaleFactor:this.state.clientScaleFactor,onRenderComplete:c,onImageLoad:p,loadImageOnly:!1,annotationProps:a.annotationsAtPage(t,r),onImageError:this.props.onImageError,comments2AnnotationsEnabled:n,onImageLayerMounted:this.props.onImageLayerMounted}))))},t})(o.default.PureComponent);t.SinglePage=p}),define("modules/clean/react/previews/pdf_viewer/text/bidi",["require","exports"],function(e,t){"use strict";function n(e){return 0!==(1&e)}function o(e){return 0===(1&e)}function r(e,t,n){for(var o=t,r=e.length;o<r;++o)if(e[o]!==n)return o;return o}function i(e,t,n,o){for(var r=t;r<n;++r)e[r]=o}function a(e,t,n){for(var o=t,r=n-1;o<r;++o,--r){var i=e[o];e[o]=e[r],e[r]=i}}function s(e,t,n){return{str:e,dir:n?"ttb":t?"ltr":"rtl"}}function l(e,t,l){var f=!0,g=e.length;if(0===g||l)return s(e,f,l);p.length=g,u.length=g;var m,h,v=0;for(m=0;m<g;++m){p[m]=e.charAt(m);var b=e.charCodeAt(m),_="L";b<=255?_=d[b]:1424<=b&&b<=1524?_="R":1536<=b&&b<=1791?_=c[255&b]:1792<=b&&b<=2220&&(_="AL"),"R"!==_&&"AL"!==_&&"AN"!==_||v++,u[m]=_}if(0===v)return f=!0,s(e,f);t===-1&&(v/g<.3?(f=!0,t=0):(f=!1,t=1));var w=[];for(m=0;m<g;++m)w[m]=t;var P=n(t)?"R":"L",y=P,E=y,M=y;for(m=0;m<g;++m)"NSM"===u[m]?u[m]=M:M=u[m];M=y;var S;for(m=0;m<g;++m)S=u[m],"EN"===S?u[m]="AL"===M?"AN":"EN":"R"!==S&&"L"!==S&&"AL"!==S||(M=S);for(m=0;m<g;++m)S=u[m],"AL"===S&&(u[m]="R");for(m=1;m<g-1;++m)"ES"===u[m]&&"EN"===u[m-1]&&"EN"===u[m+1]&&(u[m]="EN"),"CS"!==u[m]||"EN"!==u[m-1]&&"AN"!==u[m-1]||u[m+1]!==u[m-1]||(u[m]=u[m-1]);for(m=0;m<g;++m)if("EN"===u[m]){var A;for(A=m-1;A>=0&&"ET"===u[A];--A)u[A]="EN";for(A=m+1;A<g&&"ET"===u[A];++A)u[A]="EN"}for(m=0;m<g;++m)S=u[m],"WS"!==S&&"ES"!==S&&"ET"!==S&&"CS"!==S||(u[m]="ON");for(M=y,m=0;m<g;++m)S=u[m],"EN"===S?u[m]="L"===M?"L":"EN":"R"!==S&&"L"!==S||(M=S);for(m=0;m<g;++m)if("ON"===u[m]){var L=r(u,m+1,"ON"),T=y;m>0&&(T=u[m-1]);var x=E;L+1<g&&(x=u[L+1]),"L"!==T&&(T="R"),"L"!==x&&(x="R"),T===x&&i(u,m,L,T),m=L-1}for(m=0;m<g;++m)"ON"===u[m]&&(u[m]=P);for(m=0;m<g;++m)S=u[m],o(w[m])?"R"===S?w[m]+=1:"AN"!==S&&"EN"!==S||(w[m]+=2):"L"!==S&&"AN"!==S&&"EN"!==S||(w[m]+=1);var C,I=-1,F=99;for(m=0,h=w.length;m<h;++m)C=w[m],I<C&&(I=C),F>C&&n(C)&&(F=C);for(C=I;C>=F;--C){var D=-1;for(m=0,h=w.length;m<h;++m)w[m]<C?D>=0&&(a(p,D,m),D=-1):D<0&&(D=m);D>=0&&a(p,D,w.length)}for(m=0,h=p.length;m<h;++m){var N=p[m];"<"!==N&&">"!==N||(p[m]="")}return s(p.join(""),f)}Object.defineProperty(t,"__esModule",{value:!0});var d=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","ON","ON","ET","ET","ET","ON","ON","ON","ON","ON","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","ON","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","ON","ON","ON","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","ON","ET","ET","ET","ET","ON","ON","ON","ON","L","ON","ON","BN","ON","ON","ET","ET","EN","EN","ON","L","ON","ON","ON","EN","L","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","L","L","L","L","L","L","L","L"],c=["AN","AN","AN","AN","AN","AN","ON","ON","AL","ET","ET","AL","CS","AL","ON","ON","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","ON","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","ON","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL"],p=[],u=[];t.bidi=l}),define("modules/clean/react/previews/pdf_viewer/text/unicode",["require","exports"],function(e,t){"use strict";function n(e){var t;return function(){return e&&(t=Object.create(null),e(t),e=null),t}}function o(e){var t=i[13];return e>=t.begin&&e<t.end||(t=i[11],e>=t.begin&&e<t.end)}function r(e){var t=e.length;if(t<=1||!o(e.charCodeAt(0)))return e;for(var n="",r=t-1;r>=0;r--)n+=e[r];return n}Object.defineProperty(t,"__esModule",{value:!0});var i=(n(function(e){e[63721]=169,e[63193]=169,e[63720]=174,e[63194]=174,e[63722]=8482,e[63195]=8482,e[63729]=9127,e[63730]=9128,e[63731]=9129,e[63740]=9131,e[63741]=9132,e[63742]=9133,e[63726]=9121,e[63727]=9122,e[63728]=9123,e[63737]=9124,e[63738]=9125,e[63739]=9126,e[63723]=9115,e[63724]=9116,e[63725]=9117,e[63734]=9118,e[63735]=9119,e[63736]=9120}),[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}]);t.getNormalizedUnicodes=n(function(e){e[""]=" ",e[""]=" ",e[""]=" ",e[""]="",e[""]=" ",e[""]="IJ",e[""]="ij",e[""]="L",e[""]="l",e[""]="n",e[""]="s",e[""]="D",e[""]="D",e[""]="d",e[""]="LJ",e[""]="Lj",e[""]="lj",e[""]="NJ",e[""]="Nj",e[""]="nj",e[""]="DZ",e[""]="Dz",e[""]="dz",e[""]=" ",e[""]=" ",e[""]=" ",e[""]=" ",e[""]=" ",e[""]=" ",e[""]=" ",e[""]=" ",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="a",e[""]=" ",e[""]=" ",e[""]=" ",e[""]=" ",e[""]=" ",e[""]=" ",e[""]=" ",e[""]=" ",e[""]=" ",e[""]=" ",e[""]=" ",e[""]=" ",e[""]=" ",e[""]=".",e[""]="..",e[""]="...",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="!!",e[""]=" ",e[""]="??",e[""]="?!",e[""]="!?",e[""]="",e[""]=" ",e[""]="Rs",e[""]="a/c",e[""]="a/s",e[""]="C",e[""]="c/o",e[""]="c/u",e[""]="",e[""]="F",e[""]="No",e[""]="TEL",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="FAX",e[""]="I",e[""]="II",e[""]="III",e[""]="IV",e[""]="V",e[""]="VI",e[""]="VII",e[""]="VIII",e[""]="IX",e[""]="X",e[""]="XI",e[""]="XII",e[""]="L",e[""]="C",e[""]="D",e[""]="M",e[""]="i",e[""]="ii",e[""]="iii",e[""]="iv",e[""]="v",e[""]="vi",e[""]="vii",e[""]="viii",e[""]="ix",e[""]="x",e[""]="xi",e[""]="xii",e[""]="l",e[""]="c",e[""]="d",e[""]="m",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="(1)",e[""]="(2)",e[""]="(3)",e[""]="(4)",e[""]="(5)",e[""]="(6)",e[""]="(7)",e[""]="(8)",e[""]="(9)",e[""]="(10)",e[""]="(11)",e[""]="(12)",e[""]="(13)",e[""]="(14)",e[""]="(15)",e[""]="(16)",e[""]="(17)",e[""]="(18)",e[""]="(19)",e[""]="(20)",e[""]="1.",e[""]="2.",e[""]="3.",e[""]="4.",e[""]="5.",e[""]="6.",e[""]="7.",e[""]="8.",e[""]="9.",e[""]="10.",e[""]="11.",e[""]="12.",e[""]="13.",e[""]="14.",e[""]="15.",e[""]="16.",e[""]="17.",e[""]="18.",e[""]="19.",e[""]="20.",e[""]="(a)",e[""]="(b)",e[""]="(c)",e[""]="(d)",e[""]="(e)",e[""]="(f)",e[""]="(g)",e[""]="(h)",e[""]="(i)",e[""]="(j)",e[""]="(k)",e[""]="(l)",e[""]="(m)",e[""]="(n)",e[""]="(o)",e[""]="(p)",e[""]="(q)",e[""]="(r)",e[""]="(s)",e[""]="(t)",e[""]="(u)",e[""]="(v)",e[""]="(w)",e[""]="(x)",e[""]="(y)",e[""]="(z)",e[""]="",e[""]="::=";e[""]="==",e[""]="===",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="";e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]=" ",e[""]=" ",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="1",e[""]="2",e[""]="3",e[""]="4",e[""]="5",e[""]="6",e[""]="7",e[""]="8",e[""]="9",e[""]="10",e[""]="11",e[""]="12",e[""]="0",e[""]="1",e[""]="2";e[""]="3",e[""]="4",e[""]="5",e[""]="6",e[""]="7",e[""]="8",e[""]="9",e[""]="10",e[""]="11",e[""]="12",e[""]="13",e[""]="14",e[""]="15",e[""]="16",e[""]="17",e[""]="18",e[""]="19",e[""]="20",e[""]="21",e[""]="22",e[""]="23",e[""]="24",e[""]="1",e[""]="2",e[""]="3",e[""]="4",e[""]="5",e[""]="6",e[""]="7",e[""]="8",e[""]="9",e[""]="10",e[""]="11",e[""]="12",e[""]="13",e[""]="14",e[""]="15",e[""]="16",e[""]="17",e[""]="18",e[""]="19",e[""]="20",e[""]="21",e[""]="22",e[""]="23",e[""]="24",e[""]="25",e[""]="26",e[""]="27",e[""]="28",e[""]="29",e[""]="30",e[""]="31",e[""]="ff",e[""]="fi",e[""]="fl",e[""]="ffi",e[""]="ffl",e[""]="t",e[""]="st",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="";e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]=" ",e[""]=" ",e[""]=" ",e[""]=" ",e[""]=" ",e[""]=" ",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",
e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="";e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="";e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="_",e[""]="_",e[""]="_",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]=""}),t.reverseIfRtl=r}),define("modules/clean/react/previews/pdf_viewer/transform",["require","exports","tslib","modules/clean/react/previews/pdf_viewer/font","file-viewer/preview_pdf","modules/clean/referrer_cleansing_redirect","modules/core/exception"],function(e,t,n,o,r,i,a){"use strict";function s(e,t,n){return n.map(function(e){return e.coordinates.map(function(e){return{x:e.x,y:t-e.y}})})}function l(e,t,n,o,r,i,a){return a.map(function(a){return{coordinates:a.map(function(e){return{x:(e.x-t)/i,y:r-(e.y-n)/i}}),page:e,page_size:{width:o,height:r}}})}function d(e){try{var t=r.transformText(e);return n.__assign({},t,{str:t.str.map(function(e){if(e.type===r.TextNodeType.link)try{return n.__assign({},e,{href:i.get_redirect_uri(e.text).toString()})}catch(e){}return e})})}catch(e){a.reportException({err:new Error("PDF Text transformation failed"),tags:["pdfPreviews"],severity:a.SEVERITY.NONCRITICAL})}return{dir:r.TextDir.ltr,str:[]}}function c(e){return e&&e.pages?Object.keys(e.pages).reduce(function(t,n){return t[n]=(e.pages[n]||[]).map(function(e){var t=d(e.t);return{d:e.d,t:e.t,r:e.r,h:e.h,rawText:e.t,transformedText:t.str,dir:t.dir,font:o.renderFont(e.font)}}),t},{}):{}}Object.defineProperty(t,"__esModule",{value:!0}),i=n.__importStar(i),a=n.__importStar(a),t.transformPdfCoordinates=s,t.transformViewportCoordinates=l,t.transformPdfgenText=c}),define("modules/clean/react/previews/pdf_viewer/utils",["require","exports","tslib","modules/clean/react/previews/pdf_viewer/event_emitter"],function(e,t,n,o){"use strict";function r(e){if(p===e)return u;var t=[];return e.forEach(function(e){for(var n=e[0],o=e[1],r=e[2],i=0;i<r;i++)t.push([n,o])}),p=e,u=t,t}function i(e,t,n){return e.map(function(e){return[e[0]*t,e[1]*t]}).reduce(function(e,t){var o=e[0],r=e[1],i=t[0],a=t[1];return[Math.max(o,i),r+n+a]},[0,0])}function a(e,t){for(var n=r(e),o=[],i=0;i<n.length;i++){var a=n[i],s=a[0],l=a[1];o.push(t(i,s,l))}return o}function s(e){(new Image).src=e}function l(e,t){if(e.postMessageToParent("annotation-hidden"),o.eventEmitter.emit("resize"),t){var n=document,r=window.getSelection?window.getSelection():n.selection;if(r){var i=r.anchorNode,a=r.focusNode;t.contains(i)&&t.contains(a)&&(window.getSelection?window.getSelection().removeAllRanges():n.selection&&n.selection.empty())}}}function d(e,t){if(e)return n.__assign({},e,{annotations:e.annotations[t]||[]})}function c(e,t){void 0===t&&(t={});var n=e[0],o=e[1],r=t.maxWidth,i=t.maxHeight;if(void 0!==r&&void 0!==i){var a=Math.min(r/n,i/o);return[a*n,a*o]}return void 0!==r?[r,r/n*o]:void 0!==i?[i/o*n,i]:e}Object.defineProperty(t,"__esModule",{value:!0});var p,u;t.expandDimensions=r,t.getTotalSize=i,t.mapPages=a,t.prefetchImage=s,t.resetAnnotationState=l,t.annotationsAtPage=d,t.scaleDimension=c}),define("modules/clean/react/previews/pdf_viewer/zoom",["require","exports","modules/clean/previews/util","modules/core/browser_detection"],function(e,t,n,o){"use strict";function r(){return d.FIT_PAGE}function i(e){return n.isPptExtension(e)&&!o.is_mobile_or_tablet()?u.SINGLE_PAGE:u.CONTINUOUS}function a(e,t,n,o){var r=1;if(e===d.FIT_PAGE){for(var i=0,a=0,s=0,l=t;s<l.length;s++){var c=l[s],u=c[0],f=c[1];a=Math.max(u,a),i=Math.max(f,i)}r=Math.min(n/i,o/a)}else e===d.FIT_TO_WIDTH&&(r=o/t[0][0]);return Math.min(r,p)}function s(e,t){return 2048/Math.max(e,t)}function l(e,t){if(t){var n=t.originalHeight;if(s(t.originalWidth,n)>e)return 0}for(var o=0,r=c;o<r.length;o++){var i=r[o];if(i>=e)return i}return p}Object.defineProperty(t,"__esModule",{value:!0});var d,c=[1,2,4],p=Math.max.apply(Math,c);(function(e){e[e.NONE=0]="NONE",e[e.FIT_TO_WIDTH=1]="FIT_TO_WIDTH",e[e.FIT_PAGE=2]="FIT_PAGE"})(d=t.FittingMode||(t.FittingMode={}));var u;(function(e){e[e.CONTINUOUS=0]="CONTINUOUS",e[e.SINGLE_PAGE=1]="SINGLE_PAGE"})(u=t.ScrollMode||(t.ScrollMode={})),t.fullscreenFittingMode=r,t.defaultScrollMode=i,t.computeClientScaleFactor=a,t.calculatedFetchedScaleFactor=l}),define("modules/clean/react/previews/preview_pdf",["require","exports","tslib","react","external/react-redux","modules/clean/previews/util","modules/clean/annotations/annotation","modules/clean/react/previews/constants","file-viewer/data/riviera_api","modules/clean/react/file_viewer/location_utils","modules/clean/react/previews/pdf_viewer/password_modal","modules/clean/react/file_viewer/constants","modules/clean/react/previews/pdf_viewer/doc_viewer","modules/clean/react/previews/pdf_viewer/event_emitter","modules/clean/react/file_viewer/data/actions","modules/clean/react/file_viewer/data/selectors","modules/clean/previews/data/selectors","modules/clean/previews/data/actions","external/lodash","modules/clean/react/previews/preview_toolbar_container","modules/clean/react/file_viewer/frame_interface","modules/clean/react/previews/pdf_viewer/frame_messenger_shims","modules/clean/web_timing_logger","modules/clean/react/previews/pdf_viewer/transform","modules/clean/react/previews/pdf_viewer/urls"],function(e,t,n,o,r,i,a,s,l,d,c,p,u,f,g,m,h,v,b,_,w,P,y,E,M){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),y=n.__importStar(y);var S=["pdf"],A=(function(e){function t(t){var o=e.call(this,t)||this;return o.downloadSucceedLogged=!1,o.renderSucceededLogged=!1,o.previewContainerElm=null,o.onRefPreview=function(e){return o.previewContainerElm=e},o.submitPassword=function(e){o._refreshBlob(e)},o.dismissPassword=function(){o.props.onError&&o.props.onError(s.ErrorType.PasswordProtectedError)},o.debouncedFetchDataForPage=b.debounce(o.fetchDataForPage,100),o._refreshBlob=function(e){var t=o.props,n=t.refreshBlobAction,r=t.revisionId,i=o.props,a=i.imageUrlTmpl,s=i.textUrlTmpl,l=i.refreshUrl;"function"==typeof n&&n(r,l||"",{image_url_tmpl:a,text_url_tmpl:s,refresh_url:l},e)},o.onToolbarMounted=function(e){o._frameMessengerClient.postMessageToParent("page-change",{current_page:e+1,pages_count:o.props.docMetadata&&o.props.docMetadata.metadata?o.props.docMetadata.metadata.page_count:0,doc_type:i.isPptExtension(o.props.fileExtension)?p.DocType.ppt:p.DocType.pdf})},o.onScrollToAnnotation=function(e){var t=function(n,o){o===e.page-1&&(f.eventEmitter.off("page-set-to",t),f.eventEmitter.emit("highlight-annotation",e.commentActivity))};f.eventEmitter.on("page-set-to",t),f.eventEmitter.emit("set-current-page",e.page-1)},o._onScrollToPage=function(e){o._frameMessengerClient.postMessageToParent("page-change",{current_page:e+1,pages_count:o.props.docMetadata&&o.props.docMetadata.metadata?o.props.docMetadata.metadata.page_count:0,doc_type:i.isPptExtension(o.props.fileExtension)?p.DocType.ppt:p.DocType.pdf});var t=50*Math.floor(e/50);t+50-e<15&&(t+=50),o.debouncedFetchDataForPage(t)},o.onFileFeedbackUIReady=function(){o._frameMessengerClient.postMessageToParent("page-rendered")},o.onUpdateAnnotations=function(e){var t=e.annotations.reduce(function(e,t){var n=t.annotation.pdf_coordinates[0].page,o=n-1;return e[o]=e[o]||[],e[o].push(t),e},[]);o.setState({annotations:t})},o.onRemoveAllAnnotations=function(){o.setState({annotations:[]})},o.onEnableAnnotationCreation=function(){o.setState({isAnnotationCreationEnabled:!0})},o.onDisableAnnotationCreation=function(){o.setState({isAnnotationCreationEnabled:!1})},o.onEnableRegionCreation=function(){var e=o.props.enableRegionCreation;e&&e()},o.onDisableRegionCreation=function(){var e=o.props.disableRegionCreation;e&&e()},o.onClearAnnotationSelection=function(){window.getSelection().removeAllRanges()},o.onMetadataLoad=function(e){o._frameMessengerClient.postMessageToParent("doc-metadata-load",{metadata:e})},o.onRequestDocMetadata=function(){var e=o.props.docMetadata;e&&e.metadata&&o._frameMessengerClient.postMessageToParent("doc-metadata-load",{metadata:e.metadata})},o.onAnnotationPlaced=function(e){o.setState({pendingAnnotation:n.__assign({},e,{commentActivity:{activity_key:"pending"},options:{isGhostAnnotation:!1,annotationNumber:-1,isAnnotationNumberingEnabled:!1}})})},o.onAnnotationHidden=function(){o.setState({pendingAnnotation:void 0})},o.onSelectionChange=b.throttle(function(){o.setState({selectionIsInViewer:o.isSelectionInViewer()})},150),o.onPageRenderComplete=function(){o.downloadSucceedLogged||(o.downloadSucceedLogged=!0,o.logFilePreviewEvent(p.EventType.FilePreviewDownloadSucceeded)),o.renderSucceededLogged||(o.renderSucceededLogged=!0,o.markPrimaryEvent(),o.logFilePreviewEvent(p.EventType.FilePreviewRenderSucceeded),"function"==typeof o.props.setRenderStatusSuccess&&o.props.setRenderStatusSuccess(),o._frameMessengerClient.postMessageToParent("page-rendered"))},o.onPageImageLoad=function(){o.markPrimaryEvent()},o.markPrimaryEvent=function(){y.mark_time_to_view(),y.mark_time_to_interactive(),o.props.filePreviewSession&&o.props.filePreviewSession.markPrimaryEvent()},o.handleImageLayerMounted=function(){o.logFilePreviewEvent(p.EventType.FilePreviewDownloadAttempted)},o.sendIdleMouse=b.debounce(function(){o._frameMessengerClient.postMessageToParent("idle-mouse")},1500),o.onMouseMove=b.throttle(function(){o._frameMessengerClient.postMessageToParent("active-mouse"),o.sendIdleMouse()},16),o.onToolbarShow=function(){o.setState({isToolbarVisible:!0})},o.onToolbarHide=function(){o.setState({isToolbarVisible:!1})},o.state={passwordRetryAttempt:0,isAnnotationHighlightEnabled:!0,showPasswordPrompt:!1,selectionIsInViewer:!1,transformedText:E.transformPdfgenText(t.docMetadata&&t.docMetadata.text)},o.logFilePreviewEvent(p.EventType.FilePreviewSupportConfirmed),t.docMetadata&&t.docMetadata.metadata&&o.logFilePreviewEvent(p.EventType.FilePreviewDownloadAttempted),o}return n.__extends(t,e),t.prototype.componentDidMount=function(){var e=this;this.frameMessengerChannel=P.makeChannel(),this.frameMessengerHost=new P.FrameMessengerHostShim(this.frameMessengerChannel),this._frameMessengerClient=new P.FrameMessengerClientShim(this.frameMessengerChannel),this._frameMessengerClient.configureParentMessaging(function(e){return f.eventEmitter.emit(e.action,e.parameters)},["open-file","page-up","page-down","set-current-page","file-feedback-ui-ready","update-annotations","focus-annotation","hover-annotation","enable-annotation-creation","disable-annotation-creation","enable-region-creation","disable-region-creation","zoom-in","zoom-out","print","remove-all-annotations","scroll-to-annotation","clear-annotation-selection","request-doc-metadata","place-default-annotation","hide-annotation"]),this._frameMessengerClient.startListening(),w.FileViewerFrameInterface.setFrameMessengerFactory(function(){return new P.FrameMessengerHostShim(e.frameMessengerChannel)}),this.props.invalidateFrameMessenger&&this.props.invalidateFrameMessenger(),this.logFilePreviewEvent(p.EventType.FilePreviewDownloadAttempted),"function"==typeof this.props.fetchDocMetadata&&this.props.fetchDocMetadata(this.props.revisionId,M.textUrl(this.props.textUrlTmpl,!0)),this.refreshIntervalId=window.setInterval(function(){e._refreshBlob()},108e5),f.eventEmitter.on("file-feedback-ui-ready",this.onFileFeedbackUIReady),f.eventEmitter.on("scroll-to-annotation",this.onScrollToAnnotation),f.eventEmitter.on("update-annotations",this.onUpdateAnnotations),f.eventEmitter.on("remove-all-annotations",this.onRemoveAllAnnotations),f.eventEmitter.on("enable-annotation-creation",this.onEnableAnnotationCreation),f.eventEmitter.on("disable-annotation-creation",this.onDisableAnnotationCreation),f.eventEmitter.on("enable-region-creation",this.onEnableRegionCreation),f.eventEmitter.on("disable-region-creation",this.onDisableRegionCreation),f.eventEmitter.on("clear-annotation-selection",this.onClearAnnotationSelection),f.eventEmitter.on("request-doc-metadata",this.onRequestDocMetadata),f.eventEmitter.on("annotation-placed",this.onAnnotationPlaced),f.eventEmitter.on("annotation-hidden",this.onAnnotationHidden),document.addEventListener("selectionchange",this.onSelectionChange)},t.prototype.componentWillUnmount=function(){f.eventEmitter.off("file-feedback-ui-ready",this.onFileFeedbackUIReady),f.eventEmitter.off("scroll-to-annotation",this.onScrollToAnnotation),f.eventEmitter.off("update-annotations",this.onUpdateAnnotations),f.eventEmitter.off("remove-all-annotations",this.onRemoveAllAnnotations),f.eventEmitter.off("enable-annotation-creation",this.onEnableAnnotationCreation),f.eventEmitter.off("disable-annotation-creation",this.onDisableAnnotationCreation),f.eventEmitter.off("enable-region-creation",this.onEnableRegionCreation),f.eventEmitter.off("disable-region-creation",this.onDisableRegionCreation),f.eventEmitter.off("clear-annotation-selection",this.onClearAnnotationSelection),f.eventEmitter.off("request-doc-metadata",this.onRequestDocMetadata),f.eventEmitter.off("annotation-placed",this.onAnnotationPlaced),f.eventEmitter.off("annotation-hidden",this.onAnnotationHidden),document.removeEventListener("selectionchange",this.onSelectionChange),window.clearInterval(this.refreshIntervalId),d.updatePageQuery(null)},t.prototype.componentWillMount=function(){w.FileViewerFrameInterface.setFrameMessengerFactory(void 0)},t.prototype.logFilePreviewEvent=function(e,t){void 0===t&&(t={}),this.props.filePreviewSession&&this.props.filePreviewSession.recordEvent(e,t)},t.prototype.handleError=function(e,t){var n=this.props.onError;e===l.RivieraStatus.PasswordProtected?t&&S.includes(t)?this.setState({showPasswordPrompt:!0,passwordRetryAttempt:this.state.passwordRetryAttempt+1}):"function"==typeof n&&n(s.ErrorType.PasswordProtectedError,e):(this.logFilePreviewEvent(p.EventType.FilePreviewDownloadFailed,{rivieraStatusCode:e?e.toString():""}),"function"==typeof n&&n(s.ErrorType.LoadError,e))},t.prototype.handleMetadataLoad=function(e,t){e&&(this.onMetadataLoad(e.metadata),"function"==typeof t&&t(),this.setState({showPasswordPrompt:!1}))},t.prototype.componentWillReceiveProps=function(e){var t=e.docMetadata,n=e.revisionId,o=e.fileExtension,r=e.onLoad,i=e.textUrlTmpl,a=e.fetchDocMetadata,s=this.props,d=s.revisionId,c=s.docMetadata,u=s.textUrlTmpl;if(n!==d||i!==u)this.logFilePreviewEvent(p.EventType.FilePreviewSupportConfirmed),this.logFilePreviewEvent(p.EventType.FilePreviewDownloadAttempted),this.setState({passwordRetryAttempt:0,showPasswordPrompt:!1}),this.downloadSucceedLogged=!1,this.renderSucceededLogged=!1,"function"==typeof a&&a(n,M.textUrl(i,!0));else if(t&&t!==c){var f=t.error,g=t.metadata,m=t.text;!f||c&&f===c.error?g?(c&&g===c.metadata||(g.page_count?c&&c.metadata||this.handleMetadataLoad(t,r):this.handleError(l.RivieraStatus.Unknown)),c&&m===c.text||this.setState({transformedText:E.transformPdfgenText(m)})):this.handleError(l.RivieraStatus.Unknown,o):this.handleError(f.statusCode,o)}},Object.defineProperty(t.prototype,"startPage",{get:function(){if(this.props.location){var e=d.getPageQuery(this.props.location);if(e)return e-1}return 0},enumerable:!0,configurable:!0}),t.prototype.fetchDataForPage=function(e){if(e%50!==0)throw new Error("invalid page lower bound");var t=this.props,n=t.revisionId,o=t.textUrlTmpl,r=t.docMetadata,i=t.fetchDataForPageAction;if("function"==typeof i){if(r){var a=r.metadata,s=r.text;if(a&&a.page_count<=e)return;if(s&&s.pages&&s.pages[e])return}i(n,o,e,e+50)}},t.prototype.isSelectionInViewer=function(){var e=window.getSelection();if(!this.previewContainerElm)return!1;for(var t=0;t<e.rangeCount;++t)if(!this.previewContainerElm.contains(e.getRangeAt(t).commonAncestorContainer))return!1;return!0},t.prototype.getAnnotations=function(){var e=this.state,t=e.annotations,n=void 0===t?[]:t,o=e.pendingAnnotation;if(e.selectionIsInViewer||!o||o.annotation.type!==a.AnnotationTypes.HIGHLIGHT)return n;var r=b.clone(n),i=o.annotation.pdf_coordinates[0].page-1;return r[i]=(r[i]||[]).concat([o]),r},t.prototype.render=function(){var e=this.state,t=e.showPasswordPrompt,n=e.passwordRetryAttempt,r=e.isToolbarVisible,s=e.isAnnotationCreationEnabled,l=e.isAnnotationHighlightEnabled,d=e.pendingAnnotation,f=e.transformedText,g=this.props,m=g.docMetadata,h=g.isSidebarOpen,v=g.fileExtension,b=g.onCloseViewer,w=g.isFullscreen,P=g.shouldDisableAnnotations,y=g.isArchiveFile,E=g.sharePermission,M=g.sizeClass,S={annotations:this.getAnnotations(),isAnnotationCreationEnabled:!!s,isAnnotationRegionEnabled:!(!this.props.isAnnotationRegionEnabled||d&&d.annotation.type===a.AnnotationTypes.HIGHLIGHT),isAnnotationHighlightEnabled:!!l,frameMessenger:this._frameMessengerClient},A=m&&m.metadata&&m.metadata.page_count||0,L=i.isPptExtension(v)?p.DocType.ppt:p.DocType.pdf;return o.default.createElement("div",{ref:this.onRefPreview,className:"preview-content preview-pdf preview-pdf-ssr",onMouseMove:this.onMouseMove,onTouchStart:this.onMouseMove,onTouchMove:this.onMouseMove},t?o.default.createElement(c.PasswordModal,{onSubmit:this.submitPassword,onDismiss:this.dismissPassword,enteredWrongPassword:n>1,onComponentDidMount:this.markPrimaryEvent}):null,o.default.createElement(u.DocViewer,{onToolbarMounted:this.onToolbarMounted,onPageChange:this._onScrollToPage,annotationProps:S,fileExtension:this.props.fileExtension,isFullscreen:this.props.isFullscreen,isSidebarOpen:this.props.isSidebarOpen,isToolbarVisible:r,links:m?m.text.links:{},filePreviewSession:this.props.filePreviewSession,metadata:m?m.metadata:void 0,onExitFullscreen:this.props.onExitFullscreen,onPageImageLoad:this.onPageImageLoad,onPageRenderComplete:this.onPageRenderComplete,placeholderImageUrl:this.props.previewThumbnailUrl,printProps:this.props.printProps,sizeClass:M,text:f,imageUrlTmpl:this.props.imageUrlTmpl,useCanned:this.props.useCanned,startPage:this.startPage,comments2AnnotationsEnabled:this.props.comments2AnnotationsEnabled,onImageLayerMounted:this.handleImageLayerMounted}),m&&m.metadata&&m.metadata.page_count>0?o.default.createElement(_.PreviewToolbarContainer,{forceDisableRegionAnnotation:P,isSidebarOpen:h&&!!h[L],isFullscreen:w,previewToolbarProps:{afterFileViewerExit:b,docType:L,isArchiveFile:y,fileExtension:v,isFullscreen:w,sharePermission:E,pagesCount:A,shouldDisplayRegionCreationButton:!1,frameMessenger:this.frameMessengerHost,onToolbarShow:this.onToolbarShow,onToolbarHide:this.onToolbarHide,sizeClass:M}}):null)},t})(o.default.PureComponent);t._PreviewPDF=A;var L=r.connect(function(e,t){return{docMetadata:h.getDocMetadataByRevisionId(e,t.revisionId),isAnnotationRegionEnabled:m.getIsAnnotationRegionEnabled(e),isSidebarOpen:m.getIsSidebarOpen(e)}},{enableRegionCreation:g.enableRegionCreation,disableRegionCreation:g.disableRegionCreation,refreshBlobAction:v.refreshBlobAction,fetchDocMetadata:v.fetchDocMetadata,fetchDataForPageAction:v.fetchDataForPage})(A);t.PreviewPDF=L}),define("modules/clean/react/previews/preview_pdf_only",["require","exports","tslib","react","external/lodash","external/lodash","external/react-redux","external/classnames","modules/clean/previews/util","modules/clean/react/previews/constants","file-viewer/data/riviera_api","modules/clean/react/file_viewer/location_utils","modules/clean/react/previews/pdf_viewer/password_modal","modules/clean/react/file_viewer/constants","modules/clean/react/previews/pdf_viewer/event_emitter","modules/clean/react/file_viewer/data/selectors","modules/clean/previews/data/selectors","modules/clean/previews/data/actions","modules/clean/react/previews/preview_toolbar_container","modules/clean/web_timing_logger","modules/clean/react/previews/pdf_viewer/transform","modules/clean/react/previews/loading_indicator","modules/clean/react/previews/pdf_viewer/async_print_modal","modules/clean/react/previews/pdf_viewer/continuous_page","modules/clean/react/previews/pdf_viewer/single_page","modules/clean/react/previews/pdf_viewer/utils","modules/clean/react/file_viewer/sidebar_helpers","modules/clean/react/file_viewer/full_screen_helpers","modules/clean/react/previews/pdf_viewer/zoom","spectrum/dimensions","modules/clean/react/comments2/data/selectors","modules/clean/react/keyboard_binding/keyboard_binding_connector","modules/clean/react/previews/pdf_viewer/placeholder_image","modules/core/browser","modules/clean/react/keyboard_binding/keyboard_binding","modules/clean/react/previews/pdf_viewer/keyboard_bindings","spectrum/snackbar","modules/clean/react/previews/pdf_viewer/urls","modules/core/i18n","modules/clean/react/previews/pdf_viewer/resize_listener","modules/clean/react/previews/pdf_viewer/frame_messenger","modules/clean/react/previews/pdf_viewer/urls","modules/clean/react/previews/powerpoint/with_frame_messenger","modules/clean/react/previews/powerpoint/with_annotations","file-viewer/preview_pdf/sidebar","file-viewer/strings","file-viewer/i18n","esignature/public/gated_esignature_field_flag_group"],function(e,t,n,o,r,i,a,s,l,d,c,p,u,f,g,m,h,v,b,_,w,P,y,E,M,S,A,L,T,x,C,I,F,D,N,O,R,k,B,U,z,H,K,j,W,q,V,G){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),r=n.__importStar(r),s=n.__importDefault(s),_=n.__importStar(_),D=n.__importStar(D);var Z=V.createFormatters("en",q.strings,V.createI18nCache()).formatMessage,Q=["pdf"],Y=(function(e){function t(t){var n=e.call(this,t)||this;n.downloadSucceedLogged=!1,n.renderSucceededLogged=!1,n.containerRef=function(e){return n.containerDOM=e},n.continuousPageRef=function(e){return n.continuousPage=e},n.singlePageRef=function(e){return n.singlePage=e},n.submitPassword=function(e){n._refreshBlob(e)},n.dismissPassword=function(){n.props.onError&&n.props.onError(d.ErrorType.PasswordProtectedError)},n.debouncedFetchDataForPage=i.debounce(n.fetchDataForPage,100),n._refreshBlob=function(e){var t=n.props,o=t.refreshBlobAction,r=t.revisionId,i=n.props,a=i.imageUrlTmpl,s=i.textUrlTmpl,l=i.refreshUrl;"function"==typeof o&&o(r,l||"",{image_url_tmpl:a,text_url_tmpl:s,refresh_url:l},e)},n.onToolbarMounted=function(e){n.props.frameMessengerClient.postMessageToParent("page-change",{current_page:e+1,pages_count:n.props.docMetadata&&n.props.docMetadata.metadata?n.props.docMetadata.metadata.page_count:0,doc_type:l.isPptExtension(n.props.fileExtension)?f.DocType.ppt:f.DocType.pdf})},n._onScrollToPage=function(e){n.props.frameMessengerClient.postMessageToParent("page-change",{current_page:e+1,pages_count:n.props.docMetadata&&n.props.docMetadata.metadata?n.props.docMetadata.metadata.page_count:0,doc_type:l.isPptExtension(n.props.fileExtension)?f.DocType.ppt:f.DocType.pdf});var t=50*Math.floor(e/50);t+50-e<15&&(t+=50),n.debouncedFetchDataForPage(t)},n.onMetadataLoad=function(e){n.props.frameMessengerClient.postMessageToParent("doc-metadata-load",{metadata:e})},n.onPageRenderComplete=function(){n.downloadSucceedLogged||(n.downloadSucceedLogged=!0,n.logFilePreviewEvent(f.EventType.FilePreviewDownloadSucceeded)),n.renderSucceededLogged||(n.renderSucceededLogged=!0,n.markPrimaryEvent(),n.logFilePreviewEvent(f.EventType.FilePreviewRenderSucceeded),"function"==typeof n.props.setRenderStatusSuccess&&n.props.setRenderStatusSuccess(),n.props.frameMessengerClient.postMessageToParent(z.WT_EVENT_PAGE_RENDERED)),n.setState({pageRendered:!0})},n.onPageImageLoad=function(){n.markPrimaryEvent()},n.markPrimaryEvent=function(){_.mark_time_to_view(),_.mark_time_to_interactive(),n.props.filePreviewSession&&n.props.filePreviewSession.markPrimaryEvent()},n.handleImageLayerMounted=function(){n.logFilePreviewEvent(f.EventType.FilePreviewDownloadAttempted)},n.sendIdleMouse=i.debounce(function(){n.props.frameMessengerClient.postMessageToParent("idle-mouse")},1500),n.onMouseMove=i.throttle(function(){n.props.frameMessengerClient.postMessageToParent("active-mouse"),n.sendIdleMouse()},16),n.onToolbarShow=function(){n.setState({isToolbarVisible:!0})},n.onToolbarHide=function(){n.setState({isToolbarVisible:!1})},n.onResize=function(){var e=n.props,t=e.annotationProps;e.docMetadata&&t&&S.resetAnnotationState(t.frameMessenger,n.containerDOM)},n.shouldNotMoveToPage=function(){n.setState({shouldMoveToPage:!1})},n.setTextLayerPageIndex=function(){n.setState({textLayerPageIndex:n.state.currentPageIndex})},n.onFirstPageError=function(){n.setState({firstPageFailed:!0})},n.onError=function(e){n.setState({error:e})},n.onImageError=function(){n.setState({error:B._("Some pages failed to load")})},n.onReload=function(){D.reload(!0)},n.onDismissError=function(){n.setState({error:void 0})},n.enterFullscreen=function(){n.props.isFullscreen||L.enterFullScreen(f.UserActionContext.Keyboard)},n.setPage=function(e,t){void 0===t&&(t=function(){}),n.props.docMetadata&&n.props.docMetadata.metadata&&(e<0||e>=n.props.docMetadata.metadata.page_count||(n._onScrollToPage(e),n.setState({currentPageIndex:e},t)))},n.jumpToPage=function(e,t){void 0===t&&(t=function(){}),n.setState({shouldMoveToPage:!0}),n.setPage(e,t)},n.pageDown=function(){n.jumpToPage(n.state.currentPageIndex+1)},n.pageUp=function(){n.jumpToPage(n.state.currentPageIndex-1)},n.scrollDown=function(){n.continuousPage||n.pageDown(),n.continuousPage.scrollDown()},n.scrollUp=function(){n.continuousPage||n.pageUp(),n.continuousPage.scrollUp()},n.zoomIn=function(){n.continuousPage&&n.continuousPage.zoomIn(),n.singlePage&&n.singlePage.zoomIn()},n.zoomOut=function(){n.continuousPage&&n.continuousPage.zoomOut(),n.singlePage&&n.singlePage.zoomOut()},n.print=function(){g.eventEmitter.emit("print",{context:f.UserActionContext.Keyboard})},n.onPageUp=N.withPreventDefault(n.pageUp),n.onPageDown=N.withPreventDefault(n.pageDown),n.onScrollUp=N.withPreventDefault(n.scrollUp),n.onScrollDown=N.withPreventDefault(n.scrollDown),n.onEnterFullscreen=N.withPreventDefault(n.enterFullscreen),n.onZoomIn=N.withPreventDefault(n.zoomIn),n.onZoomOut=N.withPreventDefault(n.zoomOut),n.onPrintKeyPressed=N.withPreventDefault(n.print),n.docFullScreenKeyboardBindings=n.docType===f.DocType.pdf?O.getContinuousPageKeyboardBindings(!0,n.onScrollUp,n.onScrollDown,n.onPageUp,n.onPageDown,n.onEnterFullscreen,n.onZoomIn,n.onZoomOut,n.onPrintKeyPressed):O.getSinglePageKeyboardBindings(!0,n.onPageUp,n.onPageDown,n.onEnterFullscreen,n.onZoomIn,n.onZoomOut,n.onPrintKeyPressed),n.docSidebarFocusedKeyboardBindings=n.docType===f.DocType.pdf?O.getContinuousPageKeyboardBindings(!1,n.pageUp,n.onPageDown,n.onPageUp,n.onPageDown,n.onEnterFullscreen,n.onZoomIn,n.onZoomOut,n.onPrintKeyPressed):O.getSinglePageKeyboardBindings(!1,n.onPageUp,n.onPageDown,n.onEnterFullscreen,n.onZoomIn,n.onZoomOut,n.onPrintKeyPressed),n.docKeyboardBindings=n.docType===f.DocType.pdf?O.getContinuousPageKeyboardBindings(!1,n.onScrollUp,n.onScrollDown,n.onPageUp,n.onPageDown,n.onEnterFullscreen,n.onZoomIn,n.onZoomOut,n.onPrintKeyPressed):O.getSinglePageKeyboardBindings(!1,n.onPageUp,n.onPageDown,n.onEnterFullscreen,n.onZoomIn,n.onZoomOut,n.onPrintKeyPressed),n.getDocKeyboardBindings=function(e,t){return e?n.docFullScreenKeyboardBindings:t?n.docSidebarFocusedKeyboardBindings:n.docKeyboardBindings},n.handleSidebarClick=function(e){n.jumpToPage(e),n.focusSidebar()},n.focusSidebar=function(){n.setState({isSidebarFocused:!0})},n.unfocusSidebar=function(){n.setState({isSidebarFocused:!1})},n.renderBadge=function(e,t){return[o.default.createElement(G.GatedFieldFlagGroup,{page:e,maxHeight:t})]};var r=n.props.docMetadata,a=(void 0===r?{}:r).text,s=void 0===a?{}:a,c=w.transformPdfgenText(s),p=s.links?s.links:{};return n.state={passwordRetryAttempt:0,
showPasswordPrompt:!1,transformedText:c,links:p,fittingMode:n.props.isFullscreen?T.fullscreenFittingMode():l.isPptExtension(t.fileExtension)?T.FittingMode.FIT_PAGE:T.FittingMode.FIT_TO_WIDTH,currentPageIndex:0,shouldMoveToPage:!1,textLayerPageIndex:0,isSidebarFocused:!1},n.logFilePreviewEvent(f.EventType.FilePreviewSupportConfirmed),t.docMetadata&&t.docMetadata.metadata&&n.logFilePreviewEvent(f.EventType.FilePreviewDownloadAttempted),n.docType=l.isPptExtension(t.fileExtension)?f.DocType.ppt:f.DocType.pdf,n}return n.__extends(t,e),t.prototype.componentDidMount=function(){var e=this;this.logFilePreviewEvent(f.EventType.FilePreviewDownloadAttempted),"function"==typeof this.props.fetchDocMetadata&&this.props.fetchDocMetadata(this.props.revisionId,H.textUrl(this.props.textUrlTmpl,!0)),this.refreshIntervalId=window.setInterval(function(){e._refreshBlob()},108e5),g.eventEmitter.on("page-down",this.pageDown),g.eventEmitter.on("page-up",this.pageUp),g.eventEmitter.on("set-current-page",this.jumpToPage),g.eventEmitter.on("page-set",this.shouldNotMoveToPage),g.eventEmitter.on("error",this.onError),g.eventEmitter.on("toolbar-mounted",this.onToolbarMounted);var t=this.props.docMetadata,n=(void 0===t?{}:t).metadata,o=void 0===n?void 0:n;o&&this.startPage&&this.startPage>=0&&this.startPage<o.page_count&&this.jumpToPage(this.startPage)},t.prototype.componentWillUnmount=function(){g.eventEmitter.off("page-down",this.pageDown),g.eventEmitter.off("page-up",this.pageUp),g.eventEmitter.off("set-current-page",this.jumpToPage),g.eventEmitter.off("page-set",this.shouldNotMoveToPage),g.eventEmitter.off("error",this.onError),g.eventEmitter.off("toolbar-mounted",this.onToolbarMounted),window.clearInterval(this.refreshIntervalId),p.updatePageQuery(null)},t.prototype.componentDidUpdate=function(e){var t=e.activatedAnnotationRectangle,n=e.docMetadata,o=(void 0===n?{}:n).metadata,r=void 0===o?void 0:o,i=this.props,a=i.activatedAnnotationRectangle,s=i.docMetadata,l=(void 0===s?{}:s).metadata,d=void 0===l?void 0:l;if(a&&t!==a)return void this.jumpToPage(a.page);!r&&d&&this.startPage&&this.startPage>=0&&this.startPage<d.page_count&&this.jumpToPage(this.startPage)},t.prototype.componentWillReceiveProps=function(e){var t=e.docMetadata,n=e.revisionId,o=e.fileExtension,r=e.onLoad,i=e.textUrlTmpl,a=e.fetchDocMetadata,s=this.props,d=s.revisionId,p=s.docMetadata,u=s.textUrlTmpl,g=this.state.fittingMode;if(this.props.isFullscreen!==e.isFullscreen&&(g=e.isFullscreen?T.fullscreenFittingMode():l.isPptExtension(e.fileExtension)?T.FittingMode.FIT_PAGE:T.FittingMode.FIT_TO_WIDTH,this.setState({fittingMode:g})),this.props.fileExtension!==e.fileExtension&&(this.docType=l.isPptExtension(e.fileExtension)?f.DocType.ppt:f.DocType.pdf),n!==d||i!==u)this.logFilePreviewEvent(f.EventType.FilePreviewSupportConfirmed),this.logFilePreviewEvent(f.EventType.FilePreviewDownloadAttempted),this.setState({passwordRetryAttempt:0,showPasswordPrompt:!1}),this.downloadSucceedLogged=!1,this.renderSucceededLogged=!1,"function"==typeof a&&a(n,H.textUrl(i,!0));else if(t&&t!==p){var m=t.error,h=t.metadata,v=t.text;!m||p&&m===p.error?h?(p&&h===p.metadata||(h.page_count?p&&p.metadata||this.handleMetadataLoad(t,r):this.handleError(c.RivieraStatus.Unknown)),p&&v===p.text||this.setState({links:v.links||{},transformedText:w.transformPdfgenText(v)})):this.handleError(c.RivieraStatus.Unknown,o):this.handleError(m.statusCode,o)}},Object.defineProperty(t.prototype,"startPage",{get:function(){if(this.props.location){var e=p.getPageQuery(this.props.location);if(e)return e-1}return 0},enumerable:!0,configurable:!0}),t.prototype.logFilePreviewEvent=function(e,t){void 0===t&&(t={}),this.props.filePreviewSession&&this.props.filePreviewSession.recordEvent(e,t)},t.prototype.handleError=function(e,t){var n=this.props.onError;e===c.RivieraStatus.PasswordProtected?t&&Q.includes(t)?this.setState({showPasswordPrompt:!0,passwordRetryAttempt:this.state.passwordRetryAttempt+1}):"function"==typeof n&&n(d.ErrorType.PasswordProtectedError,e):(this.logFilePreviewEvent(f.EventType.FilePreviewDownloadFailed,{rivieraStatusCode:e?e.toString():""}),"function"==typeof n&&n(d.ErrorType.LoadError,e))},t.prototype.handleMetadataLoad=function(e,t){e&&(this.onMetadataLoad(e.metadata),"function"==typeof t&&t(),this.setState({showPasswordPrompt:!1}))},t.prototype.fetchDataForPage=function(e){if(e%50!==0)throw new Error("invalid page lower bound");var t=this.props,n=t.revisionId,o=t.textUrlTmpl,r=t.docMetadata,i=t.fetchDataForPageAction;if("function"==typeof i){if(r){var a=r.metadata,s=r.text;if(a&&a.page_count<=e)return;if(s&&s.pages&&s.pages[e])return}i(n,o,e,e+50)}},t.prototype.isSidebarOpen=function(e,t){void 0===t&&(t=this.props);var n=t.isSidebarOpen,o=t.sizeClass,r=t.isFullscreen;return A.isSidebarEnabled(e,o,!!r)&&(n||{})[e]},t.prototype.renderErrorSnackbar=function(){if(!this.state.error)return null;var e={"pdf-snackbar":!0,"pdf-snackbar__toolbar-visible":this.state.isToolbarVisible};return o.default.createElement(R.Snackbar,{className:s.default(e),title:this.state.error,variant:"fail",disablePositioningAndBackdrop:!0},o.default.createElement(R.SnackbarAction,{onClick:this.onReload},"Reload"),o.default.createElement(R.SnackbarAction,{onClick:this.onDismissError},"Close"))},t.prototype.renderViewer=function(e,t){var i=this.props,a=i.annotationProps,s=i.docMetadata,l=void 0===s?{}:s,c=l.metadata,p=void 0===c?void 0:c,u=l.text,g=void 0===u?{}:u,m=this.props,h=m.comments2AnnotationsEnabled,v=m.isFullscreen,b=m.imageUrlTmpl,_=m.useCanned,w=this.state,P=w.links,y=w.transformedText;if(p&&g&&p.page_count>0){var A={height:e,width:t,comments2AnnotationsEnabled:h,currentPageIndex:this.state.currentPageIndex,imageUrlTmpl:b,useCanned:_,annotationProps:a,metadata:p,onImageError:this.onImageError,isFullscreen:v,onPageImageLoad:this.onPageImageLoad,onPageRenderComplete:this.onPageRenderComplete,onPageNumberUpdated:this.setPage,onImageLayerMounted:this.handleImageLayerMounted},L=S.expandDimensions(p.dimensions),T=r.range(0,p.page_count).map(function(e){return{pageIndex:e,dimension:L[e],textboxes:y?y[e]:[],links:P&&P[e]||[],thumbnailUrl:k.imageUrl(b,e,Math.ceil(200*W.SIDEBAR_THUMBNAIL_WIDTH/L[e][0]),_)}});return this.docType===f.DocType.ppt&&M.deviceSupported()?o.default.createElement(M.SinglePage,n.__assign({},A,{formatMessage:Z,pages:T,ref:this.singlePageRef})):o.default.createElement(E.ContinuousPage,n.__assign({},A,{formatMessage:Z,pages:T,nextFieldId:this.props.nextFieldId,shouldMoveToPage:this.state.shouldMoveToPage,textLayerPage:this.state.textLayerPageIndex,updateTextLayerPageIndex:this.setTextLayerPageIndex,comments2AnnotationsEnabled:h,isMounted:this.props.filePreviewSession&&(this.props.filePreviewSession.sourceContext===d.PreviewSourceContext.Home||this.props.filePreviewSession.sourceContext===d.PreviewSourceContext.Browse),jumpToPage:this.jumpToPage,ref:this.continuousPageRef}))}return null},t.prototype.renderSidebar=function(){var e=this,t=this.isSidebarOpen(this.docType),n=this.props.docMetadata,i=(void 0===n?{}:n).metadata,a=void 0===i?void 0:i;if(a){var l=S.expandDimensions(a.dimensions),d=r.range(0,a.page_count).map(function(t){return{dimension:l[t],thumbnailUrl:k.imageUrl(e.props.imageUrlTmpl,t,Math.ceil(200*W.SIDEBAR_THUMBNAIL_WIDTH/l[t][0]),e.props.useCanned),renderBadge:e.renderBadge}});return o.default.createElement(W.Sidebar,{className:s.default("fv-sidebar",{open:t}),currentPageIndex:this.state.currentPageIndex,pages:d,formatMessage:Z,isFocused:this.state.isSidebarFocused,onPageChange:this.handleSidebarClick,onFocus:this.focusSidebar,onBlur:this.unfocusSidebar})}return null},t.prototype.renderCloseFullscreenButton=function(){return this.props.isFullscreen?o.default.createElement("div",{className:"close-x"},o.default.createElement("button",{onClick:this.props.onExitFullscreen,className:"close-x-button","aria-label":B._("Close")},"")):null},t.prototype.renderPlaceholder=function(){var e=this.props.previewThumbnailUrl;return this.state.pageRendered||!e||this.state.firstPageFailed?null:o.default.createElement(F.PlaceholderImage,{url:e,addLeftMargin:l.isPptExtension(this.props.fileExtension),onError:this.onFirstPageError})},t.prototype.render=function(){var e=this,t=this.props,n=t.docMetadata,r=t.isSidebarOpen,i=t.fileExtension,a=t.onCloseViewer,l=t.isFullscreen,d=t.shouldDisableAnnotations,c=t.isArchiveFile,p=t.sharePermission,f=t.sizeClass,g=n&&n.metadata?n.metadata:void 0,m=n&&n.metadata&&n.metadata.page_count||0,h=this.renderSidebar(),v=this.renderCloseFullscreenButton(),_={"viewer-container":!0,"sidebar-visible":this.isSidebarOpen(this.docType)},w=this.renderPlaceholder(),E=this.state.pageRendered?null:o.default.createElement(P.LoadingIndicator,{className:"loading-indicator"}),M=g&&this.props.printProps?o.default.createElement(y.AsyncPrintModal,{imageUrlTmpl:this.props.imageUrlTmpl,useCanned:this.props.useCanned,metadata:g,printProps:this.props.printProps}):null;return o.default.createElement("div",{className:"preview-content preview-pdf preview-pdf-ssr",onMouseMove:this.onMouseMove,onTouchStart:this.onMouseMove,onTouchMove:this.onMouseMove},this.state.showPasswordPrompt?o.default.createElement(u.PasswordModal,{onSubmit:this.submitPassword,onDismiss:this.dismissPassword,enteredWrongPassword:this.state.passwordRetryAttempt>1,onComponentDidMount:this.markPrimaryEvent}):null,o.default.createElement("div",{className:s.default(_)},E,w,o.default.createElement(U.ResizeListener,{onChange:this.onResize}),v,o.default.createElement("div",{className:s.default("pdf-viewer",{fullscreen:this.props.isFullscreen}),style:{visibility:this.state.pageRendered?"visible":"hidden"},ref:this.containerRef},o.default.createElement(I.KeyboardBindingConnector,{keyboardBindings:this.getDocKeyboardBindings(!!this.props.isFullscreen,this.state.isSidebarFocused)}),h,o.default.createElement(x.Dimensions,{className:"flex-preview-container"},function(t){var n=t.width,o=t.height;return e.renderViewer(o,n)})),this.renderErrorSnackbar(),M),n&&n.metadata&&n.metadata.page_count>0?o.default.createElement(b.PreviewToolbarContainer,{forceDisableRegionAnnotation:d,isSidebarOpen:r&&!!r[this.docType],isFullscreen:l,previewToolbarProps:{afterFileViewerExit:a,docType:this.docType,isArchiveFile:c,fileExtension:i,isFullscreen:l,sharePermission:p,pagesCount:m,shouldDisplayRegionCreationButton:!1,frameMessenger:this.props.frameMessengerHost,onToolbarShow:this.onToolbarShow,onToolbarHide:this.onToolbarHide,sizeClass:f}}):null)},t})(o.default.PureComponent);t._PreviewPDF=Y;var X=function(e,t){return{docMetadata:h.getDocMetadataByRevisionId(e,t.revisionId),isSidebarOpen:m.getIsSidebarOpen(e),activatedAnnotationRectangle:C.getActivatedDocumentAnnotationRectangleIfComments2Ready(e)}},J={refreshBlobAction:v.refreshBlobAction,fetchDocMetadata:v.fetchDocMetadata,fetchDataForPageAction:v.fetchDataForPage},$=i.flow([j.withAnnotations,K.withFrameMessenger(z.FRAME_MESSAGES_FROM_PARENT),a.connect(X,J)])(Y);t.PreviewPDF=$}),define("modules/clean/react/previews/preview_ppt",["require","exports","tslib","react","external/classnames","external/lodash","external/react-redux","modules/clean/react/file_viewer/constants","modules/clean/react/keyboard_binding/keyboard_binding_connector","modules/clean/react/previews/pdf_viewer/placeholder_image","modules/clean/react/previews/loading_indicator","modules/clean/react/previews/pdf_viewer/zoom","modules/clean/react/file_viewer/sidebar_helpers","modules/clean/react/keyboard_binding/keyboard_binding","modules/clean/react/file_viewer/data/selectors","modules/clean/react/previews/preview_toolbar_container","modules/clean/react/file_viewer/location_utils","modules/clean/react/previews/pdf_viewer/utils","modules/clean/react/previews/pdf_viewer/transform","modules/clean/react/previews/pdf_viewer/urls","modules/clean/react/previews/pdf_viewer/keyboard_bindings","modules/clean/react/previews/pdf_viewer/async_print_modal","modules/clean/react/previews/powerpoint/error_snackbar","modules/clean/react/previews/pdf_viewer/resize_listener","modules/clean/react/previews/powerpoint/close_button","modules/clean/react/previews/powerpoint/autoresize_page","modules/clean/react/previews/pdf_viewer/event_emitter","modules/clean/react/file_viewer/full_screen_helpers","modules/clean/react/previews/powerpoint/with_frame_messenger","modules/clean/react/previews/powerpoint/with_annotations","modules/clean/web_timing_logger","modules/clean/react/previews/powerpoint/with_document_metadata","modules/core/browser","modules/clean/react/previews/pdf_viewer/frame_messenger","file-viewer/preview_pdf","file-viewer/strings","file-viewer/i18n","modules/clean/react/comments2/data/selectors"],function(e,t,n,o,r,i,a,s,l,d,c,p,u,f,g,m,h,v,b,_,w,P,y,E,M,S,A,L,T,x,C,I,F,D,N,O,R,k){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),r=n.__importDefault(r),C=n.__importStar(C),F=n.__importStar(F);var B=R.createFormatters("en",O.strings,R.createI18nCache()).formatMessage,U=(function(e){function t(t){var n=e.call(this,t)||this;return n.downloadSucceedLogged=!1,n.renderSucceededLogged=!1,n.containerRef=function(e){return n.containerDOM=e},n.onFirstPageError=function(){n.setState({firstPageFailed:!0})},n.onResize=function(){var e=n.props,t=e.docMetadata,o=e.annotationProps;t&&o&&v.resetAnnotationState(o.frameMessenger,n.containerDOM)},n.sendIdleMouse=i.debounce(function(){n.props.frameMessengerClient.postMessageToParent("idle-mouse")},1500),n.onMouseMove=i.throttle(function(){n.props.frameMessengerClient.postMessageToParent("active-mouse"),n.sendIdleMouse()},16),n.reload=function(){F.reload(!0)},n.dismissError=function(){n.setState({error:void 0})},n.setPage=function(e,t){void 0===t&&(t=function(){});var o=n.props.docMetadata;o&&o.metadata&&(e<0||e>=o.metadata.page_count||(n.onPageChange(e),n.setState({pageIndex:e},t)))},n.onPageRenderComplete=function(){n.setState({pageRendered:!0}),n.renderSucceededLogged||(n.renderSucceededLogged=!0,n.markPrimaryEvent(),n.logFilePreviewEvent(s.EventType.FilePreviewRenderSucceeded),"function"==typeof n.props.setRenderStatusSuccess&&n.props.setRenderStatusSuccess(),n.props.frameMessengerClient.postMessageToParent(D.WT_EVENT_PAGE_RENDERED))},n.onPageImageLoad=function(){n.downloadSucceedLogged||(n.downloadSucceedLogged=!0,n.markPrimaryEvent(),n.logFilePreviewEvent(s.EventType.FilePreviewDownloadSucceeded))},n.onPageChange=function(e){n.props.frameMessengerClient.postMessageToParent("page-change",{current_page:e+1,pages_count:n.props.docMetadata&&n.props.docMetadata.metadata?n.props.docMetadata.metadata.page_count:0,doc_type:s.DocType.ppt})},n.markPrimaryEvent=function(){C.mark_time_to_view(),C.mark_time_to_interactive();var e=n.props.filePreviewSession;e&&e.markPrimaryEvent()},n.pageDown=function(){n.jumpToPage(n.state.pageIndex+1)},n.pageUp=function(){n.jumpToPage(n.state.pageIndex-1)},n.jumpToPage=function(e,t){void 0===t&&(t=function(){}),n.setState({shouldMoveToPage:!0}),n.setPage(e,t)},n.shouldNotMoveToPage=function(){n.setState({shouldMoveToPage:!1})},n.onError=function(e){n.setState({error:e})},n.onToolbarMounted=function(e){n.onPageChange(e)},n.onToolbarShow=function(){n.setState({isToolbarVisible:!0})},n.onToolbarHide=function(){n.setState({isToolbarVisible:!1})},n.setupToolbar=function(){A.eventEmitter.on("page-down",n.pageDown),A.eventEmitter.on("page-up",n.pageUp),A.eventEmitter.on("set-current-page",n.jumpToPage),A.eventEmitter.on("page-set",n.shouldNotMoveToPage),A.eventEmitter.on("error",n.onError),A.eventEmitter.on("toolbar-mounted",n.onToolbarMounted)},n.teardownToolbar=function(){A.eventEmitter.off("page-down",n.pageDown),A.eventEmitter.off("page-up",n.pageUp),A.eventEmitter.off("set-current-page",n.jumpToPage),A.eventEmitter.off("page-set",n.shouldNotMoveToPage),A.eventEmitter.off("error",n.onError),A.eventEmitter.off("toolbar-mounted",n.onToolbarMounted)},n.zoomIn=function(){n.props.frameMessengerHost.postMessageToChildren("zoom-in")},n.zoomOut=function(){n.props.frameMessengerHost.postMessageToChildren("zoom-out")},n.print=function(){A.eventEmitter.emit("print",{context:s.UserActionContext.Keyboard})},n.enterFullscreen=function(){n.props.isFullscreen||L.enterFullScreen(s.UserActionContext.Keyboard)},n.onPageUp=f.withPreventDefault(n.pageUp),n.onPageDown=f.withPreventDefault(n.pageDown),n.onEnterFullscreen=f.withPreventDefault(n.enterFullscreen),n.onZoomIn=f.withPreventDefault(n.zoomIn),n.onZoomOut=f.withPreventDefault(n.zoomOut),n.onPrintKeyPressed=f.withPreventDefault(n.print),n.handleSidebarClick=function(e){n.jumpToPage(e),n.focusSidebar()},n.focusSidebar=function(){n.setState({isSidebarFocused:!0})},n.unfocusSidebar=function(){n.setState({isSidebarFocused:!1})},n.getPages=function(){var e=n.props,t=e.docMetadata,o=e.imageUrlTmpl,r=e.useCanned,a=v.expandDimensions(t.metadata.dimensions),s=t?b.transformPdfgenText(t.text):void 0,l=t?t.text.links||{}:{},d=t.metadata.page_count;return i.range(0,d).map(function(e){return{pageIndex:e,dimension:a[e],textboxes:s?s[e]:[],links:l[e]||[],thumbnailUrl:_.imageUrl(o,e,Math.ceil(200*N.SIDEBAR_THUMBNAIL_WIDTH/a[e][0]),r)}})},n.state={pageIndex:0,fittingMode:p.FittingMode.FIT_PAGE,isSidebarFocused:!1,shouldMoveToPage:!1},n.logFilePreviewEvent(s.EventType.FilePreviewSupportConfirmed),n}return n.__extends(t,e),t.prototype.logFilePreviewEvent=function(e,t){void 0===t&&(t={});var n=this.props.filePreviewSession;n&&n.recordEvent(e,t)},t.prototype.componentDidMount=function(){this.logFilePreviewEvent(s.EventType.FilePreviewDownloadAttempted),this.setupToolbar();var e=this.props,t=e.docMetadata,n=e.startPage;t&&t.metadata&&n&&n>=0&&n<t.metadata.page_count&&this.jumpToPage(n)},t.prototype.componentWillUnmount=function(){this.teardownToolbar(),h.updatePageQuery(null)},t.prototype.componentDidUpdate=function(e){var t=this.props.activatedAnnotationRectangle;t&&e.activatedAnnotationRectangle!==t&&this.jumpToPage(t.page)},t.prototype.render=function(){var e=this.props,t=e.docMetadata,i=e.annotationProps,a=e.fileExtension,p=e.frameMessengerHost,f=e.imageUrlTmpl,g=e.isArchiveFile,h=e.isFullscreen,v=e.isSidebarOpen,b=e.onCloseViewer,_=e.onExitFullscreen,A=e.placeholderImageUrl,L=e.printProps,T=e.sharePermission,x=e.shouldDisableAnnotations,C=e.sizeClass,I=e.useCanned;if(!t||!t.metadata)return null;var F=t.metadata,D=u.isSidebarEnabled(s.DocType.ppt,C,!!h)&&!!(v||{})[s.DocType.ppt],O=!this.state.pageRendered,R=!this.state.pageRendered&&A&&!this.state.firstPageFailed,k=h,U=!!this.state.error,z=!!L,H=F&&F.page_count>0,K=this.state.pageIndex,j=w.getSinglePageKeyboardBindings(h,this.onPageUp,this.onPageDown,this.onEnterFullscreen,this.onZoomIn,this.onZoomOut,this.onPrintKeyPressed),W=this.getPages();return o.default.createElement("div",{className:"preview-content preview-pdf preview-pdf-ssr",onMouseMove:this.onMouseMove,onTouchStart:this.onMouseMove,onTouchMove:this.onMouseMove},o.default.createElement("div",{className:r.default({"viewer-container":!0,"sidebar-visible":D})},O?o.default.createElement(c.LoadingIndicator,{className:"loading-indicator"}):null,R?o.default.createElement(d.PlaceholderImage,{url:A,addLeftMargin:!0,onError:this.onFirstPageError}):null,k?o.default.createElement(M.CloseButton,{onClick:_}):null,o.default.createElement(E.ResizeListener,{onChange:this.onResize}),o.default.createElement("div",{className:"pdf-viewer",style:{visibility:this.state.pageRendered?"visible":"hidden"},ref:this.containerRef},o.default.createElement(N.Sidebar,{className:r.default("fv-sidebar",{open:v}),currentPageIndex:this.state.pageIndex,pages:W,formatMessage:B,isFocused:this.state.isSidebarFocused,onPageChange:this.handleSidebarClick,onFocus:this.focusSidebar,onBlur:this.unfocusSidebar}),o.default.createElement(l.KeyboardBindingConnector,{keyboardBindings:j}),o.default.createElement(S.AutoresizePage,n.__assign({},this.props,{formatMessage:B,imageUrlTmpl:f,annotationProps:i,currentPageIndex:K,isSidebarOpen:!!v&&v[s.DocType.ppt],metadata:F,onPageNumberUpdated:this.setPage,onPageRenderComplete:this.onPageRenderComplete,onPageImageLoad:this.onPageImageLoad,pages:W}))),H?o.default.createElement(m.PreviewToolbarContainer,{forceDisableRegionAnnotation:x,isSidebarOpen:v&&!!v[s.DocType.ppt],isFullscreen:h,previewToolbarProps:{afterFileViewerExit:b,docType:s.DocType.ppt,isArchiveFile:g,fileExtension:a,isFullscreen:h,sharePermission:T,pagesCount:W.length,shouldDisplayRegionCreationButton:!1,frameMessenger:p,onToolbarShow:this.onToolbarShow,onToolbarHide:this.onToolbarHide,sizeClass:C}}):null,U?o.default.createElement(y.ErrorSnackbar,{error:this.state.error,isToolbarVisible:!!this.state.isToolbarVisible,onSubmit:this.reload,onCancel:this.dismissError}):null,z?o.default.createElement(P.AsyncPrintModal,{imageUrlTmpl:f,useCanned:I,metadata:F,printProps:L}):null))},t})(o.default.Component);t._PreviewPPT=U;var z=function(e,t){return{activatedAnnotationRectangle:k.getActivatedDocumentAnnotationRectangleIfComments2Ready(e),isSidebarOpen:g.getIsSidebarOpen(e)}},H=i.flow([x.withAnnotations,I.withDocumentMetadata,T.withFrameMessenger(D.FRAME_MESSAGES_FROM_PARENT),a.connect(z,{})])(U);t.PreviewPPT=H});
//# sourceMappingURL=pkg-file_viewer_pdf.min.js-vflo9DOv4.map