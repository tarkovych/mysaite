define("modules/clean/form_util/name_parser",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(function(){function e(){}return e.splitFullName=function(e){var t=e.split(" ");return[t[0],t.slice(1).join(" ")]},e})();t.default=i}),define("modules/clean/legacy_pyxl_controllers/login_or_register",["require","exports","tslib","jquery","modules/clean/auth_event_logger","modules/clean/register_form"],function(e,t,i,r,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=i.__importDefault(r),s=i.__importStar(s);var a=(function(){function e(e){var t=this;this.$login_form=e.find(".login-register-login-part"),this.$register_form=e.find(".login-register-register-part"),this.logAppropriateAuthIntent(),e.click(function(e){if(r.default(e.target).hasClass("login-register-switch-link"))return e.preventDefault(),t._toggle_forms(),t.$login_form.find(".text-input input:visible").first().focus(),t.$register_form.find(".text-input input:visible").first().focus()}),this.$register_form.on(s.USER_EXISTS,function(e){t._toggle_forms();for(var i in e.prefill){var r=e.prefill[i];t.$login_form.find(i).val(r)}return t.$login_form.find(e.focus).focus()})}return e.prototype.logAppropriateAuthIntent=function(){this.$login_form.is(":visible")?n.AuthEventLogger.log_web_login_intent():this.$register_form.is(":visible")&&n.AuthEventLogger.log_web_signup_intent()},e.prototype._toggle_forms=function(){this.$login_form.toggle(),this.$register_form.toggle(),this.logAppropriateAuthIntent()},e})();t.default=a}),define("modules/clean/mailcheck",["require","exports","modules/core/html","modules/core/i18n"],function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(function(){var e=(function(){function e(e,t,i){void 0===i&&(i={}),this.$input=e,this.$suggestion_container=t,this.checkInput();var r=i.livecheck===!0?"keyup blur":"blur";this.$input.on(r,this.checkInput.bind(this))}return e.initClass=function(){this.DOMAINS=["gmail.com","hotmail.com","yahoo.com","aol.com","web.de","gmx.de","googlemail.com","me.com","live.com","msn.com","mail.ru","comcast.net","google.com","mac.com"],this.WHITELIST_REGEXS=[/ymail.com/,/yahoo\.co\./,/yahoo\.com\./,/hotmail\.co\./,/hotmail\.com\./,/gmx\.net/,/gmx\.at/,/gmx\.ch/,/gmx\.com/,/mail\.com/,/web\.com/],this.THRESHOLD=2},e.prototype.checkInput=function(){var e=this.suggest(this.$input.val());e?this.populate(e):this.clear()},e.prototype.populate=function(e){var t=this,n=i.HTML.escape(e.local).toHTML(),s=i.HTML.escape(e.domain).toHTML(),a=n+"@<span class='email_warning_area'>"+s+"</span>";return this.$suggestion_container.html(new i.HTML(r._("Did you mean <a>%(suggested_email)s</a>?").format({suggested_email:a})).toHTML()),this.$suggestion_container.show(),this.$suggestion_container.on("click",function(){return t.$input.val(e.full),t.clear()})},e.prototype.clear=function(){return this.$suggestion_container.empty(),this.$suggestion_container.hide()},e.prototype.suggest=function(e){if(void 0===e&&(e=""),e.length){e=e.toLowerCase();var t=this.splitEmail(e);if(!t)return!1;var i=t.local,r=t.domain;if(this.whitelistedDomain(r))return!1;var n=this.findClosestDomain(r);return!!n&&{local:i,domain:n,full:i+"@"+n}}},e.prototype.whitelistedDomain=function(t){for(var i=0,r=Array.from(e.WHITELIST_REGEXS);i<r.length;i++){if(r[i].test(t))return!0}return!1},e.prototype.splitEmail=function(e){var t=e.split("@");return 2===t.length&&{local:t[0],domain:t[1]}},e.prototype.findClosestDomain=function(t){for(var i=99,r=null,n=0,s=Array.from(e.DOMAINS);n<s.length;n++){var a=s[n],o=this.stringDistance(t,a);o<i&&(i=o,r=a)}return!!(r&&r!==t&&i<=e.THRESHOLD)&&r},e.prototype.stringDistance=function(e,t){if(null==e||0===e.length)return null==t||0===t.length?0:t.length;if(null==t||0===t.length)return e.length;for(var i=0,r=0,n=0,s=0;i+r<e.length&&i+n<t.length;){if(e.charAt(i+r)===t.charAt(i+n))s++;else{r=0,n=0;for(var a=0;a<5;){if(i+a<e.length&&e.charAt(i+a)===t.charAt(i)){r=a;break}if(i+a<t.length&&e.charAt(i)===t.charAt(i+a)){n=a;break}a++}}i++}return(e.length+t.length)/2-s},e})();return e.initClass(),e})();t.default=n}),define("modules/clean/register_form",["require","exports","tslib","jquery","modules/clean/abuse/invisible_recaptcha","modules/clean/legacy_pyxl_controllers/ajax_form","modules/clean/em_string","modules/clean/form_util/name_parser","modules/clean/mailcheck","modules/clean/profile_services/auth_callback_handler","modules/clean/profile_services/profile_services_constants","modules/clean/profile_services/profile_services_link","modules/clean/web_register_logging_data","modules/core/accessible_announce","modules/core/browser"],function(e,t,i,r,n,s,a,o,l,c,g,h,m,u,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=i.__importDefault(r),s=i.__importDefault(s),o=i.__importDefault(o),l=i.__importDefault(l),g=i.__importDefault(g),_=i.__importStar(_);var p=(function(){function e(e,t,i,o,c,m,u,_,p,d){void 0===d&&(d=!1);var f=this;this._handle_google_callback=this._handle_google_callback.bind(this),this._before_submit=this._before_submit.bind(this),this._on_register_success=this._on_register_success.bind(this),this._animate_form=this._animate_form.bind(this),this._index_error_handler=this._index_error_handler.bind(this),this._combined_name_handler=this._combined_name_handler.bind(this),this.$registerFormContainer=e,this.canRedirect=i,this.showForm=o,this.clientSideValidation=c,this.customErrorHandler=m,this.combinedName=u,this.lastNameGoesFirst=_,this.signupEndpoint=p,this.$registerForm=this.$registerFormContainer.find(".register-form");var v;"index"===this.customErrorHandler&&(v=this._index_error_handler,this.$registerForm.on("click change","input",this._index_clear_error_handler)),this.registerController=new s.default(this.$registerForm,this._before_submit,{client_side_validation:this.clientSideValidation,error_handler:v}),this.cont=this.$registerForm.find("input[name='cont']").val(),this.$registerForm.find(".login-button, .auth-google").prop("disabled",!1),this.$registerForm.find(".login-button.disabled-button").prop("disabled",!0),n.loadRecaptchaAndSetupInvisibleRecaptcha(this.registerController,this.$registerForm,"email","REGISTER",d);var b=this.$registerForm.find("label[for='tos_agree']"),w=parseInt(b.css("font-size"),10);if(new a.Emstring(b.text()).length*w>200&&this.$registerForm.find(".checkbox").removeClass("checkbox-inline"),this.$registerForm.on(s.default.SUCCESS_EVENT,this._on_register_success),this.showForm){if(this.$registerForm.find("input[type='hidden'][name='is_third_party_auth']").val()){var x=function(e,t){return!r.default(t).val()};this.$registerFormContainer.find("input").filter(":visible").filter(x).first().focus()}}else this.$registerForm.find(".login-button").on("click",function(e){f.$registerFormContainer.hasClass("form_shown")||(e.preventDefault(),f._animate_form())});this.$registerForm.find(".auth-google").click(function(e){var t=function(e){f._handle_google_callback(e)},i="true"===e.target.getAttribute("data-third-party-no-popup");(new h.ProfileServicesLinkingHandler).auth_service_create_user_if_needed(g.default.GOOGLE,t,"register_form",!i)}),"small"===t?(this.$registerForm.find(".bubble-dropdown-container .bubble-dropdown").css({visibility:"hidden"}),this.$registerForm.find(".password-input-meter").css({cursor:"default"})):new l.default(this.$registerForm.find(".input-email"),this.$registerForm.find(".email-suggestion"),{livecheck:!1});var F=this.$registerForm.find("input[type='checkbox'][name='tos_agree']");F.length>0&&F.on("change",function(e){var t=f.$registerForm.find(".agree .error-message");t.length>0&&t[0].remove()})}return e.prototype._handle_google_callback=function(t){var r=this.$registerForm.find("input[type='hidden'][name='cont']").val(),n=this.$registerForm.find("input[type='hidden'][name='cont']").val(),s=this.$registerForm.find("input[type='hidden'][name='signup_tag']").val(),a=this.$registerForm.find("input[type='hidden'][name='k']").val(),o=this.$registerForm.find("input[type='hidden'][name='eh']").val(),l=m.getWebRegisterLoggingData();c.handleRegisterResponse(t,i.__assign({registerCont:r,loginCont:n,signupTag:s,canRedirect:this.canRedirect,k:a,eh:o,signupEndpoint:this.signupEndpoint},l),{form:this.$registerForm,newAccount:e.NEW_ACCOUNT_FROM_3RD_PARTY,userExists:e.USER_EXISTS})},e.prototype._before_submit=function(){this.combinedName===!0&&this._combined_name_handler();var e=m.setWebRegisterLoggingData({signup_endpoint:this.signupEndpoint});this.registerController.add_additional_data(e)},e.prototype._on_register_success=function(t,i){this.$registerForm.trigger(e.REGISTER_SUCCESS,i),this.canRedirect&&(this.cont?_.redirect(this.cont):i.redirect_url&&_.redirect(i.redirect_url))},e.prototype._animate_form=function(){var e=this;this.$registerFormContainer.hasClass("form_shown")||r.default.when(this.$registerFormContainer.animate({height:this.$registerForm.height()},{easing:"easeInOutCubic",duration:500})).done(function(){e.$registerFormContainer.addClass("form_shown"),e.$registerFormContainer.filter(":input").filter(":visible").first().focus()})},e.prototype.fill=function(e){var t=this;Object.keys(e).forEach(function(i){return t.$registerForm.find("[name="+i+"]").val(e[i])})},e.prototype._index_error_handler=function(e){this.$registerFormContainer.find(".register-form__errors").remove();var t=r.default("<ul />").addClass("register-form__errors"),i=[];for(var n in e)if(e.hasOwnProperty(n)){var s=e[n],a=s.message_text||s.message_html;i.push(a),r.default("<li />").addClass("register-form__error").html(a).appendTo(t),this.$registerForm.find(".input-"+n).addClass("text-input--error"),"tos_agree"===n&&this.$registerForm.find(".checkbox-inline.agree").addClass("checkbox-inline--error"),this.combinedName&&"fname"===n&&(this.$registerForm.find(".input-fullname").addClass("text-input--error"),this.$registerForm.find("input[name='fullname']").addClass("input-error")),this.$registerForm.find("input[name='"+n+"']").addClass("input-error")}return this.$registerFormContainer.append(t),u.AccessibleAnnounce.assertive(i.join(". "))},e.prototype._index_clear_error_handler=function(e){var t=r.default(e.target);t.removeClass("input-error"),"checkbox"===t.attr("type")?t.parents(".checkbox-inline--error").removeClass("checkbox-inline--error"):t.parents(".text-input--error").removeClass("text-input--error")},e.prototype._combined_name_handler=function(){var e=this.$registerFormContainer.find('input[name="fullname"]'),t=this.$registerFormContainer.find('input[name="fname"]'),i=this.$registerFormContainer.find('input[name="lname"]'),r=o.default.splitFullName(e.val()),n=r[0],s=r[1];this.lastNameGoesFirst!==!0?(t.val(n),void 0!==s&&s!==n&&i.val(s)):(i.val(n),void 0!==s&&s!==n&&t.val(s))},e.REGISTER_SUCCESS="db:register:success",e.NEW_ACCOUNT_FROM_3RD_PARTY="db:register:new_account_from_3rd_party",e.USER_EXISTS="db:register:user_exists",e})();t.RegisterForm=p}),define("modules/clean/sharing/components/shared_file_or_folder_icon_large",["require","exports","tslib","react","modules/clean/react/icon/icon_helper","modules/clean/react/image","modules/clean/static_urls"],function(e,t,i,r,n,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=i.__importDefault(r);var o={srcLowRes:"/static/images/sharing/icons/large/unknown-vflRnqOVn.png",srcHighRes:"/static/images/sharing/icons/large/unknown@2x-vflgnv9Bs.png"},l={srcLowRes:"/static/images/sharing/icons/large/shared_folder-vfljnpWr_.png",srcHighRes:"/static/images/sharing/icons/large/shared_folder@2x-vflpRoaHq.png"},c={page_white:o,page_white_text:{srcLowRes:"/static/images/sharing/icons/large/txt-vfl4dn7R8.png",srcHighRes:"/static/images/sharing/icons/large/txt@2x-vfl_v0hpP.png"},page_white_word:{srcLowRes:"/static/images/sharing/icons/large/docx-vfl2kAs3n.png",srcHighRes:"/static/images/sharing/icons/large/docx@2x-vflSrFLiG.png"},page_white_acrobat:{srcLowRes:"/static/images/sharing/icons/large/pdf-vflrJJawN.png",srcHighRes:"/static/images/sharing/icons/large/pdf@2x-vfl04qNI7.png"},page_white_excel:{srcLowRes:"/static/images/sharing/icons/large/xls-vfl8cd6tM.png",srcHighRes:"/static/images/sharing/icons/large/xls@2x-vfldSEjfl.png"},page_white_powerpoint:{srcLowRes:"/static/images/sharing/icons/large/ppt-vflamwJ4g.png",srcHighRes:"/static/images/sharing/icons/large/ppt@2x-vflrb0ogZ.png"},page_white_code:{srcLowRes:"/static/images/sharing/icons/large/script-vflcYYtYc.png",srcHighRes:"/static/images/sharing/icons/large/script@2x-vflkxv3of.png"},page_white_gear:{srcLowRes:"/static/images/sharing/icons/large/exe-vfl99Y51F.png",srcHighRes:"/static/images/sharing/icons/large/exe@2x-vflsQ_S6B.png"},page_white_sound:{srcLowRes:"/static/images/sharing/icons/large/audio-vflVzskiy.png",srcHighRes:"/static/images/sharing/icons/large/audio@2x-vflI_zQtD.png"},page_white_picture:{srcLowRes:"/static/images/sharing/icons/large/image-vflTL6Nfs.png",srcHighRes:"/static/images/sharing/icons/large/image@2x-vflTKaKku.png"},page_white_film:{srcLowRes:"/static/images/sharing/icons/large/video-vfltrDfSC.png",srcHighRes:"/static/images/sharing/icons/large/video@2x-vflSpKNE9.png"},page_white_compressed:{srcLowRes:"/static/images/sharing/icons/large/zip-vflETSv91.png",srcHighRes:"/static/images/sharing/icons/large/zip@2x-vflAc-sdX.png"},package:{srcLowRes:"/static/images/sharing/icons/large/pkg-vflN9_n2y.png",srcHighRes:"/static/images/sharing/icons/large/pkg@2x-vfl4QnAXg.png"},page_white_dvd:o,page_white_vector:{srcLowRes:"/static/images/sharing/icons/large/ai-vflH4RhCD.png",srcHighRes:"/static/images/sharing/icons/large/ai@2x-vflaGAOs7.png"},page_white_paint:{srcLowRes:"/static/images/sharing/icons/large/psd-vfl11zEUp.png",srcHighRes:"/static/images/sharing/icons/large/psd@2x-vflsow1pP.png"},page_white_flash:{srcLowRes:"/static/images/sharing/icons/large/flash-vfl6-62NP.png",srcHighRes:"/static/images/sharing/icons/large/flash@2x-vfljFWK5c.png"},page_white_linkfile:o},g=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getIconFileName=function(){if(!t.props.isFile)return l;if(t.props.contentName){return c[n.file_icon(t.props.contentName)]||o}return o},t}return i.__extends(t,e),t.prototype.render=function(){var e=this.getIconFileName(),t=e.srcLowRes,i=e.srcHighRes;return r.default.createElement(s.Image,{className:this.props.className,src:a.static_url(t),srcHiRes:a.static_url(i),alt:this.props.contentName})},t})(r.default.Component);t.SharedFileOrFolderIconLarge=g}),define("modules/clean/sharing/invitation_signup_page",["require","exports","tslib","react","jquery","modules/clean/em_string","modules/clean/react_format","modules/clean/react/maestro_nav/shared_code/constants","modules/clean/react/maestro_nav/shared_code/dropbox_logo","modules/clean/react/maestro_nav/shared_code/strings","modules/clean/sharing/components/shared_file_or_folder_icon_large","modules/core/i18n"],function(e,t,i,r,n,s,a,o,l,c,g,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=i.__importDefault(r),n=i.__importDefault(n),h=i.__importStar(h);var m=h.i18n_default_project("sharing")._,u=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.onSignInClick=function(){var e=n.default(".login-register-container"),t=e.find(".login-register-login-part"),i=e.find(".login-register-register-part");t.show(),i.hide(),t.find(".text-input input:visible").first().focus()},t.prototype.render=function(){return r.default.createElement("div",{id:"page-header",className:"page-header-border"},r.default.createElement("a",{className:"maestro-nav__home-button",href:"https://"+o.WWW_HOST+"/"},r.default.createElement(l.DropboxLogo,{className:"maestro-nav__logo","aria-label":c.homeAriaLabel()})),r.default.createElement("a",{className:"invitation-signup-page-sign-in",onClick:this.onSignInClick},m("Sign in")))},t})(r.default.Component);t.InvitationSignupPageHeader=u;var _=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.render=function(){var e,t={sender_name:s.Emstring.em_snippet(this.props.senderDisplayName,28,.5),content_name:s.Emstring.em_snippet(this.props.contentName,32,.5),sender_name_span:r.default.createElement("span",{className:"sf-invite-referral__sender-name"}),content_name_span:r.default.createElement("span",{className:"sf-invite-referral__folder-name"})};return e=this.props.isFile?a.reactFormat(m("<sender_name_span>%(sender_name)s</sender_name_span>           wants to share the file           <content_name_span>%(content_name)s</content_name_span> with you."),t):a.reactFormat(m("<sender_name_span>%(sender_name)s</sender_name_span> wants to           share the folder <content_name_span>%(content_name)s</content_name_span>           with you."),t),r.default.createElement("div",{className:"sf-invite-referral__header"},r.default.createElement(g.SharedFileOrFolderIconLarge,{className:"sf-invite-referral__graphic",isFile:this.props.isFile,contentName:this.props.contentName}),r.default.createElement("h1",{className:"sf-invite-referral__heading"},e))},t})(r.default.Component);t.SharedFolderHeader=_});
//# sourceMappingURL=pkg-login-and-register-pages.min.js-vflPvVemM.map