define(["require","exports","tslib","react","external/react-redux","modules/core/i18n","modules/clean/datetime","modules/clean/previews/util","modules/clean/react/pass/constants","modules/core/user_i18n","external/prop-types","deep-integrations/platform/server/localization","modules/clean/integrations/profile_card","modules/clean/redux/types","modules/clean/redux/selectors","external/reselect"],function(e,t,r,o,a,n,i,s,l,c,u,d,p,_,m,S){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),a=r.__importStar(a),c=r.__importStar(c),u=r.__importStar(u);var f=(function(e){function t(t){return e.call(this,t)||this}return r.__extends(t,e),t.prototype._buildSeenStateMessage=function(){var e=this.props.userInfo,t="";if(e.isActive)t=n._("Viewing now");else if(null!=e.whenLastSeen){if(t=n._("Viewed %(ago)s",{comment:'Format like "Viewed 5 days ago"'}),t=t.replace("%(ago)s",i.ago(1e3*e.whenLastSeen,!1,!0,!0)),s.shouldShowPlatformInfo()){var r="",o=e.platformType;o===l.PASS_PLATFORM.DESKTOP?r=n._("on desktop"):o===l.PASS_PLATFORM.WEB?r=n._("on web"):o===l.PASS_PLATFORM.MOBILE&&(r=n._("on mobile")),t+=" "+r}}else{var a="";switch(e.accessLevel){case"owner":a=n._("Owner");break;case"writer":a=n._("Can edit");break;case"reader":a=n._("Can comment");break;case"reader_no_comment":case void 0:a=n._("Can view")}t+=""+a}return t},t.prototype.render=function(){var e=this.props,t=e.userInfo,r=e.fileInfo,a=e.avatarColor,n=e.listServices,i=e.onConnectService,s=e.onConnectServices;return o.default.createElement(p.StatefulProfileCardWithWrapper,{targetUser:{account_id:t.key,display_name:t.displayName,email:t.email},file:r,localization:d.localization,featureGates:{showMessageSection:!1,showCalendarSection:!t.isViewer},seenState:this._buildSeenStateMessage(),avatarColor:a,isActive:t.isActive,initials:c.getInitials(t.displayName),photoUrl:t.photoUrl,listServices:n,onConnectService:i,onConnectServices:s})},t.contextTypes={isIntegrationTooltipEnabled:u.func},t})(o.default.Component);t.ProfileCardPopoverComponent=f;var v=S.createSelector([function(e){var t=m.getStateAtNamespace(e,_.INTEGRATIONS_NAMESPACE_KEY);return t&&t.listServices}],function(e){return e}),w=function(e){return{listServices:v(e)}};t.ProfileCardPopover=a.connect(w)(f)});
//# sourceMappingURL=profile_card_popover.min.js-vflvcSxzh.map